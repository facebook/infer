<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>AnalysisGlobalState (infer.IR.AnalysisGlobalState)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">infer</a> &#x00BB; <a href="../index.html">IR</a> &#x00BB; AnalysisGlobalState</nav><header class="odoc-preamble"><h1>Module <code><span>IR.AnalysisGlobalState</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#global-state-for-the-backend-analyses">Global state for the backend analyses</a></li></ul></nav><div class="odoc-content"><h3 id="global-state-for-the-backend-analyses"><a href="#global-state-for-the-backend-analyses" class="anchor"></a>Global state for the backend analyses</h3><p>While global state should be kept under control at possible (so try to introduce as little of it as possible!), it is sometimes too convenient to ignore. This module lets us do it safely, at least until infer becomes multicore. In particular, global state is appropriately and safely stashed away and restored when the analysis of a procedure is suspended to go analyze another procedure with ondemand (see the <a href="../../Backend/Ondemand/index.html"><code>Backend.Ondemand</code></a> module).</p><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-save"><a href="#val-save" class="anchor"></a><code><span><span class="keyword">val</span> save : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-restore"><a href="#val-restore" class="anchor"></a><code><span><span class="keyword">val</span> restore : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-initialize"><a href="#val-initialize" class="anchor"></a><code><span><span class="keyword">val</span> initialize : <span><a href="../Procdesc/index.html#type-t">Procdesc.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Tenv/index.html#type-t">Tenv.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-register"><a href="#val-register" class="anchor"></a><code><span><span class="keyword">val</span> register : 
  <span><span class="label">init</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">save</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">restore</span>:<span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>Register pieces of global state from other analysis modules:</p><ul><li><code>save</code> and <code>restore</code> are called when suspending/resuming the analysis of the procedure when we need to go analyze a dependency</li><li><code>init</code> is called when the analysis of a procedure starts</li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-register_ref"><a href="#val-register_ref" class="anchor"></a><code><span><span class="keyword">val</span> register_ref : <span><span class="label">init</span>:<span>(<span>unit <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span><span class="type-var">'a</span> <a href="../../IStdlib/IStd/index.html#type-ref">IStdlib.IStd.ref</a></span> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>special case of a value stored in a reference; <code>init</code> sets the ref to <code>init ()</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-register_ref_with_proc_desc_and_tenv"><a href="#val-register_ref_with_proc_desc_and_tenv" class="anchor"></a><code><span><span class="keyword">val</span> register_ref_with_proc_desc_and_tenv : 
  <span><span class="label">init</span>:<span>(<span><a href="../Procdesc/index.html#type-t">Procdesc.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Tenv/index.html#type-t">Tenv.t</a> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span class="type-var">'a</span> <a href="../../IStdlib/IStd/index.html#type-ref">IStdlib.IStd.ref</a></span> <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div><div class="spec-doc"><p>same as <code>register_ref</code> but <code>init</code> takes a proc desc and a tenv</p></div></div></div></body></html>
