<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>CCallSpecializedWithClosures (infer.Backend.CCallSpecializedWithClosures)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">infer</a> &#x00BB; <a href="../index.html">Backend</a> &#x00BB; CCallSpecializedWithClosures</nav><header class="odoc-preamble"><h1>Module <code><span>Backend.CCallSpecializedWithClosures</span></code></h1></header><div class="odoc-content"><p>This preanalysis aims to create specialized clones of methods that have blocks as arguments and that are called with concrete closures, and then it calls these clone methods instead of the original ones. One complication is with the captured variables in the closure: we add them to the formals of the cloned method and pass them through to the concrete blocks. We do this transformation in two steps:</p><p>1. Go through all the callers of methods with blocks as parameters, and create the clone methods. In this preanalysis we only create the attributes for the new method, not the code. We also update the call instructions in the callers to represent a call to the cloned method with updated arguments: we don't need to pass closure's arguments anymore, we instead pass the captured variables as new arguments.</p><p>2. (In ClosureSubstSpecializedMethod.ml) We add the corresponding code to the newly created clones: this means swapping the call to the block variable with a call to the corresponding block. Moreover, we add some of the new formals (that correspond to the captured variables) to the arguments of the call.</p><div class="odoc-spec"><div class="spec value" id="val-process" class="anchored"><a href="#val-process" class="anchor"></a><code><span><span class="keyword">val</span> process : <span><a href="../../IR/Procdesc/index.html#type-t">IR.Procdesc.t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div></div></body></html>