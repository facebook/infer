<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>JSourceFileInfo (infer.JavaFrontend.JSourceFileInfo)</title><link rel="stylesheet" href="../../../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../_odoc_support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">infer</a> &#x00BB; <a href="../index.html">JavaFrontend</a> &#x00BB; JSourceFileInfo</nav><header class="odoc-preamble"><h1>Module <code><span>JavaFrontend.JSourceFileInfo</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-Array"><a href="#module-Array" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Array/index.html">Array</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-incr_linenum"><a href="#val-incr_linenum" class="anchor"></a><code><span><span class="keyword">val</span> incr_linenum : <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>classic Ocamllex function to update current lexbuf line at each end of line</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-end_pos"><a href="#val-end_pos" class="anchor"></a><code><span><span class="keyword">val</span> end_pos : <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> int * int</span></code></div><div class="spec-doc"><p>position of the char just after lexbuf</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-location_suffix"><a href="#val-location_suffix" class="anchor"></a><code><span><span class="keyword">val</span> location_suffix : <span>string <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> int * int</span></code></div><div class="spec-doc"><p>return the exact position start of the suffix <code>classname</code> in <code>lexbuf</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-location_start"><a href="#val-location_start" class="anchor"></a><code><span><span class="keyword">val</span> location_start : <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> int * int</span></code></div><div class="spec-doc"><p>return the position start of <code>lexbuf</code></p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-expr"><a href="#type-expr" class="anchor"></a><code><span><span class="keyword">type</span> expr</span><span> = </span></code><ol><li id="type-expr.AllocExpr" class="def variant constructor anchored"><a href="#type-expr.AllocExpr" class="anchor"></a><code><span>| </span><span><span class="constructor">AllocExpr</span></span></code></li><li id="type-expr.OtherExpr" class="def variant constructor anchored"><a href="#type-expr.OtherExpr" class="anchor"></a><code><span>| </span><span><span class="constructor">OtherExpr</span></span></code></li></ol></div><div class="spec-doc"><p>We traverse the structure of the source file by recording the encompassing blocks in a stack of frame. We use the stack to recover the full inner class name at bytecode level</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-frame"><a href="#type-frame" class="anchor"></a><code><span><span class="keyword">type</span> frame</span><span> = </span><span>{</span></code><ol><li id="type-frame.short_class_name" class="def record field anchored"><a href="#type-frame.short_class_name" class="anchor"></a><code><span>short_class_name : string;</span></code></li><li id="type-frame.is_enum" class="def record field anchored"><a href="#type-frame.is_enum" class="anchor"></a><code><span>is_enum : bool;</span></code></li><li id="type-frame.next_anonymous_class" class="def record field anchored"><a href="#type-frame.next_anonymous_class" class="anchor"></a><code><span>next_anonymous_class : int;</span></code></li><li id="type-frame.opened_blocks" class="def record field anchored"><a href="#type-frame.opened_blocks" class="anchor"></a><code><span>opened_blocks : int;</span></code></li><li id="type-frame.exprs" class="def record field anchored"><a href="#type-frame.exprs" class="anchor"></a><code><span>exprs : <span><a href="#type-expr">expr</a> list</span>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-state"><a href="#type-state" class="anchor"></a><code><span><span class="keyword">type</span> state</span><span> = </span><span>{</span></code><ol><li id="type-state.stack" class="def record field anchored"><a href="#type-state.stack" class="anchor"></a><code><span>stack : <span><a href="#type-frame">frame</a> list</span>;</span></code></li><li id="type-state.record_location" class="def record field anchored"><a href="#type-state.record_location" class="anchor"></a><code><span>record_location : <span>classname:string <span class="arrow">&#45;&gt;</span></span> <span>col:int <span class="arrow">&#45;&gt;</span></span> <span>line:int <span class="arrow">&#45;&gt;</span></span> unit;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-push"><a href="#val-push" class="anchor"></a><code><span><span class="keyword">val</span> push : <span><a href="#type-frame">frame</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-state">state</a></span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Missing_opening_bracket"><a href="#exception-Missing_opening_bracket" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Missing_opening_bracket</span></span></code></div></div><div class="odoc-spec"><div class="spec exception anchored" id="exception-Missing_opening_parenthesis"><a href="#exception-Missing_opening_parenthesis" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Missing_opening_parenthesis</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_package"><a href="#val-add_package" class="anchor"></a><code><span><span class="keyword">val</span> add_package : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-state">state</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pop_class"><a href="#val-pop_class" class="anchor"></a><code><span><span class="keyword">val</span> pop_class : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-state">state</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-incr_next_anonymous"><a href="#val-incr_next_anonymous" class="anchor"></a><code><span><span class="keyword">val</span> incr_next_anonymous : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-state">state</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_expr"><a href="#val-add_expr" class="anchor"></a><code><span><span class="keyword">val</span> add_expr : <span><a href="#type-expr">expr</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-state">state</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pop_exprs"><a href="#val-pop_exprs" class="anchor"></a><code><span><span class="keyword">val</span> pop_exprs : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-expr">expr</a> * <a href="#type-state">state</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-in_field_declaration_area"><a href="#val-in_field_declaration_area" class="anchor"></a><code><span><span class="keyword">val</span> in_field_declaration_area : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_opened_blocks"><a href="#val-get_opened_blocks" class="anchor"></a><code><span><span class="keyword">val</span> get_opened_blocks : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_enum"><a href="#val-is_enum" class="anchor"></a><code><span><span class="keyword">val</span> is_enum : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_next_anonymous_class"><a href="#val-get_next_anonymous_class" class="anchor"></a><code><span><span class="keyword">val</span> get_next_anonymous_class : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-decr_opened_blocks"><a href="#val-decr_opened_blocks" class="anchor"></a><code><span><span class="keyword">val</span> decr_opened_blocks : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-state">state</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-incr_opened_blocks"><a href="#val-incr_opened_blocks" class="anchor"></a><code><span><span class="keyword">val</span> incr_opened_blocks : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-state">state</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-long_class_name"><a href="#val-long_class_name" class="anchor"></a><code><span><span class="keyword">val</span> long_class_name : <span>string <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-__ocaml_lex_tables"><a href="#val-__ocaml_lex_tables" class="anchor"></a><code><span><span class="keyword">val</span> __ocaml_lex_tables : <span class="xref-unresolved">Stdlib</span>.Lexing.lex_tables</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-class_scan"><a href="#val-class_scan" class="anchor"></a><code><span><span class="keyword">val</span> class_scan : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-__ocaml_lex_class_scan_rec"><a href="#val-__ocaml_lex_class_scan_rec" class="anchor"></a><code><span><span class="keyword">val</span> __ocaml_lex_class_scan_rec : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-do_at_next_left_bracket"><a href="#val-do_at_next_left_bracket" class="anchor"></a><code><span><span class="keyword">val</span> do_at_next_left_bracket : 
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-__ocaml_lex_do_at_next_left_bracket_rec"><a href="#val-__ocaml_lex_do_at_next_left_bracket_rec" class="anchor"></a><code><span><span class="keyword">val</span> __ocaml_lex_do_at_next_left_bracket_rec : 
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-search_anonymous_class_body"><a href="#val-search_anonymous_class_body" class="anchor"></a><code><span><span class="keyword">val</span> search_anonymous_class_body : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-__ocaml_lex_search_anonymous_class_body_rec"><a href="#val-__ocaml_lex_search_anonymous_class_body_rec" class="anchor"></a><code><span><span class="keyword">val</span> __ocaml_lex_search_anonymous_class_body_rec : 
  <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-found_entrance_of_anonymous_class"><a href="#val-found_entrance_of_anonymous_class" class="anchor"></a><code><span><span class="keyword">val</span> found_entrance_of_anonymous_class : <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-__ocaml_lex_found_entrance_of_anonymous_class_rec"><a href="#val-__ocaml_lex_found_entrance_of_anonymous_class_rec" class="anchor"></a><code><span><span class="keyword">val</span> __ocaml_lex_found_entrance_of_anonymous_class_rec : 
  <span><a href="#type-state">state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-skip_well_parenthesized_angles"><a href="#val-skip_well_parenthesized_angles" class="anchor"></a><code><span><span class="keyword">val</span> skip_well_parenthesized_angles : 
  <span><span class="xref-unresolved">Core__Int</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-__ocaml_lex_skip_well_parenthesized_angles_rec"><a href="#val-__ocaml_lex_skip_well_parenthesized_angles_rec" class="anchor"></a><code><span><span class="keyword">val</span> __ocaml_lex_skip_well_parenthesized_angles_rec : 
  <span><span class="xref-unresolved">Core__Int</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-skip_well_parenthesized_parentheses"><a href="#val-skip_well_parenthesized_parentheses" class="anchor"></a><code><span><span class="keyword">val</span> skip_well_parenthesized_parentheses : 
  <span><span class="xref-unresolved">Core__Int</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-__ocaml_lex_skip_well_parenthesized_parentheses_rec"><a href="#val-__ocaml_lex_skip_well_parenthesized_parentheses_rec" class="anchor"></a><code><span><span class="keyword">val</span> __ocaml_lex_skip_well_parenthesized_parentheses_rec : 
  <span><span class="xref-unresolved">Core__Int</span>.t <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-skip_string"><a href="#val-skip_string" class="anchor"></a><code><span><span class="keyword">val</span> skip_string : 
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-__ocaml_lex_skip_string_rec"><a href="#val-__ocaml_lex_skip_string_rec" class="anchor"></a><code><span><span class="keyword">val</span> __ocaml_lex_skip_string_rec : 
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-skip_comments"><a href="#val-skip_comments" class="anchor"></a><code><span><span class="keyword">val</span> skip_comments : 
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-__ocaml_lex_skip_comments_rec"><a href="#val-__ocaml_lex_skip_comments_rec" class="anchor"></a><code><span><span class="keyword">val</span> __ocaml_lex_skip_comments_rec : 
  <span><span>(<span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="xref-unresolved">Stdlib</span>.Lexing.lexbuf <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-collect_class_location"><a href="#val-collect_class_location" class="anchor"></a><code><span><span class="keyword">val</span> collect_class_location : <span><a href="../JProgramDesc/index.html#type-t">JProgramDesc.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../IBase/SourceFile/index.html#type-t">IBase.SourceFile.t</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.unit</span></code></div><div class="spec-doc"><p>We scan source file <code>file</code> and record location of each class declaration</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-debug_on_file"><a href="#val-debug_on_file" class="anchor"></a><code><span><span class="keyword">val</span> debug_on_file : <span><span class="xref-unresolved">Base</span>.string <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Base</span>.unit</span></code></div></div></div></body></html>