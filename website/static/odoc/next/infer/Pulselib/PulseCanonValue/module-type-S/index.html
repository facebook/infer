<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>S (infer.Pulselib.PulseCanonValue.S)</title><link rel="stylesheet" href="../../../../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../_odoc_support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">infer</a> &#x00BB; <a href="../../index.html">Pulselib</a> &#x00BB; <a href="../index.html">PulseCanonValue</a> &#x00BB; S</nav><header class="odoc-preamble"><h1>Module type <code><span>PulseCanonValue.S</span></code></h1><p>elements of the base abstract domain (stack, heap, attributes) with a type-safe interface that reflects the expected normalization status of the abstract values they mention</p></header><nav class="odoc-toc"><ul><li><a href="#functions-to-normalize-abstract-values">Functions to normalize abstract values</a></li><li><a href="#domain-elements,-revisited-to-be-safe-wrt-value-normalization">Domain elements, revisited to be safe wrt value normalization</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <span class="keyword">private</span> <a href="../../PulseAbstractValue/index.html#type-t">Pulselib.PulseBasicInterface.AbstractValue.t</a></span></code></div><div class="spec-doc"><p>an abstract value that is the canonical representative of its equivalence class (of other abstract values that are equal to it) in the current state (this may not be true if more equalities are added or generally any time the formula inside the state changes)</p></div></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="xref-unresolved">Ppx_compare_lib</span>.Comparable.S <span class="keyword">with</span> <span><span class="keyword">type</span> <span class="xref-unresolved">t</span> := <span class="xref-unresolved">t</span></span></span></code></summary><div class="odoc-spec"><div class="spec value anchored" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span><span class="keyword">val</span> compare : <span><a href="#type-t">t</a> <span class="xref-unresolved">Base__Ppx_compare_lib</span>.compare</span></span></code></div></div></details></div><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <span class="xref-unresolved">Ppx_compare_lib</span>.Equal.S <span class="keyword">with</span> <span><span class="keyword">type</span> <span class="xref-unresolved">t</span> := <span class="xref-unresolved">t</span></span></span></code></summary><div class="odoc-spec"><div class="spec value anchored" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span><span class="keyword">val</span> equal : <span><a href="#type-t">t</a> <span class="xref-unresolved">Base__Ppx_compare_lib</span>.equal</span></span></code></div></div></details></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span><span class="keyword">val</span> pp : <span><span class="xref-unresolved">F</span>.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Set"><a href="#module-Set" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Set/index.html">Set</a></span><span> : <a href="../../../IStdlib/PrettyPrintable/module-type-PPSet/index.html">IStdlib.PrettyPrintable.PPSet</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../../IStdlib/PrettyPrintable/module-type-PPSet/index.html#type-elt">elt</a> = <a href="#type-t">t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-downcast_set"><a href="#val-downcast_set" class="anchor"></a><code><span><span class="keyword">val</span> downcast_set : <span><a href="Set/index.html#type-t">Set.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../PulseAbstractValue/Set/index.html#type-t">Pulselib.PulseBasicInterface.AbstractValue.Set.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unsafe_cast_set"><a href="#val-unsafe_cast_set" class="anchor"></a><code><span><span class="keyword">val</span> unsafe_cast_set : <span><a href="../../PulseAbstractValue/Set/index.html#type-t">Pulselib.PulseBasicInterface.AbstractValue.Set.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Set/index.html#type-t">Set.t</a></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> unsafe, obviously; please add a comment why you need to use this and suppress this warning locally with [@alert &quot;-deprecated&quot;]</li></ul></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-needs_canon"><a href="#type-needs_canon" class="anchor"></a><code><span><span class="keyword">type</span> needs_canon</span></code></div><div class="spec-doc"><p>an abstract value that needs to be normalized; just <code>AbstractValue.t</code> under the hood too</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-astate"><a href="#type-astate" class="anchor"></a><code><span><span class="keyword">type</span> astate</span></code></div><div class="spec-doc"><p><code>PulseAbductiveDomain.t</code> but we cannot mention it there otherwise it would create a circular dependency.</p></div></div><h3 id="functions-to-normalize-abstract-values"><a href="#functions-to-normalize-abstract-values" class="anchor"></a>Functions to normalize abstract values</h3><p>Also provided are helper functions that normalize inside of more complex values such as tuples. In that case the functions take care to preserve physical equality if the input value is already its own canonical representative.</p><p>We need separate functions for <code>AbstractValue.t</code> and <code>needs_canon</code> values because of the type system. By convention functions that end in <code>'</code> are the same as the non-primed ones but operate on <code>AbstractValue.t</code> instead of <code>needs_canon</code> ones.</p><div class="odoc-spec"><div class="spec value anchored" id="val-canon"><a href="#val-canon" class="anchor"></a><code><span><span class="keyword">val</span> canon : <span><a href="#type-astate">astate</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-needs_canon">needs_canon</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>fetch the canonical representative of the given <code>needs_canon</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-canon'"><a href="#val-canon'" class="anchor"></a><code><span><span class="keyword">val</span> canon' : <span><a href="#type-astate">astate</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../PulseAbstractValue/index.html#type-t">Pulselib.PulseBasicInterface.AbstractValue.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>fetch the canonical representative of the given <code>AbstractValue.t</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-canon_fst"><a href="#val-canon_fst" class="anchor"></a><code><span><span class="keyword">val</span> canon_fst : <span><a href="#type-astate">astate</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-needs_canon">needs_canon</a> * <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a> * <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-canon_fst'"><a href="#val-canon_fst'" class="anchor"></a><code><span><span class="keyword">val</span> canon_fst' : 
  <span><a href="#type-astate">astate</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="../../PulseAbstractValue/index.html#type-t">Pulselib.PulseBasicInterface.AbstractValue.t</a> * <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a> * <span class="type-var">'a</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-canon_snd_fst"><a href="#val-canon_snd_fst" class="anchor"></a><code><span><span class="keyword">val</span> canon_snd_fst : <span><a href="#type-astate">astate</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span>(<a href="#type-needs_canon">needs_canon</a> * <span class="type-var">'b</span>)</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span> * <span>(<a href="#type-t">t</a> * <span class="type-var">'b</span>)</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-canon_opt"><a href="#val-canon_opt" class="anchor"></a><code><span><span class="keyword">val</span> canon_opt : <span><a href="#type-astate">astate</a> <span class="arrow">&#45;&gt;</span></span> <span><span><a href="#type-needs_canon">needs_canon</a> option</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-t">t</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-canon_opt'"><a href="#val-canon_opt'" class="anchor"></a><code><span><span class="keyword">val</span> canon_opt' : 
  <span><a href="#type-astate">astate</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../../PulseAbstractValue/index.html#type-t">Pulselib.PulseBasicInterface.AbstractValue.t</a> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-t">t</a> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-canon_opt_fst"><a href="#val-canon_opt_fst" class="anchor"></a><code><span><span class="keyword">val</span> canon_opt_fst : <span><a href="#type-astate">astate</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>(<a href="#type-needs_canon">needs_canon</a> * <span class="type-var">'a</span>)</span> option</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="#type-t">t</a> * <span class="type-var">'a</span>)</span> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-canon_opt_fst4'"><a href="#val-canon_opt_fst4'" class="anchor"></a><code><span><span class="keyword">val</span> canon_opt_fst4' : 
  <span><a href="#type-astate">astate</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<a href="../../PulseAbstractValue/index.html#type-t">Pulselib.PulseBasicInterface.AbstractValue.t</a> * <span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span>)</span> option</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<a href="#type-t">t</a> * <span class="type-var">'a</span> * <span class="type-var">'b</span> * <span class="type-var">'c</span>)</span> option</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mk_fresh"><a href="#val-mk_fresh" class="anchor"></a><code><span><span class="keyword">val</span> mk_fresh : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p>This is just <code>AbstractValue.mk_fresh</code> so technically is only guaranteed to produce a canonical representative if the value is not immediately made equal to another one... Use with caution!</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-unsafe_cast"><a href="#val-unsafe_cast" class="anchor"></a><code><span><span class="keyword">val</span> unsafe_cast : <span><a href="../../PulseAbstractValue/index.html#type-t">Pulselib.PulseBasicInterface.AbstractValue.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div><div class="spec-doc"><ul class="at-tags"><li class="deprecated"><span class="at-tag">deprecated</span> unsafe, obviously; please add a comment why you need to use this and suppress this warning locally with [@alert &quot;-deprecated&quot;]</li></ul></div></div><h3 id="domain-elements,-revisited-to-be-safe-wrt-value-normalization"><a href="#domain-elements,-revisited-to-be-safe-wrt-value-normalization" class="anchor"></a>Domain elements, revisited to be safe wrt value normalization</h3><div class="odoc-spec"><div class="spec module anchored" id="module-Stack"><a href="#module-Stack" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Stack/index.html">Stack</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Memory"><a href="#module-Memory" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Memory/index.html">Memory</a></span><span> : 
  <a href="../../PulseBaseMemory/module-type-S/index.html">PulseBaseMemory.S</a>
    <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../PulseBaseMemory/module-type-S/index.html#type-key">key</a> := <a href="#type-t">t</a></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="../../PulseBaseMemory/module-type-S/index.html#type-in_map_t">in_map_t</a> :=
           <a href="../../PulseAbstractValue/index.html#type-t">Pulselib.PulseBasicInterface.AbstractValue.t</a>
           * <a href="../../PulseValueHistory/index.html#type-t">Pulselib.PulseBasicInterface.ValueHistory.t</a></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="../../PulseBaseMemory/module-type-S/index.html#type-out_of_map_t">out_of_map_t</a> :=
           <a href="#type-needs_canon">needs_canon</a> * <a href="../../PulseValueHistory/index.html#type-t">Pulselib.PulseBasicInterface.ValueHistory.t</a></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="../../PulseBaseMemory/module-type-S/index.html#type-t">t</a> = <a href="../../PulseBaseMemory/index.html#type-t">PulseBaseMemory.t</a></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="../../PulseBaseMemory/module-type-S/Edges/index.html#type-t">Edges.t</a> = <a href="../../PulseBaseMemory/Edges/index.html#type-t">PulseBaseMemory.Edges.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-canon_access"><a href="#val-canon_access" class="anchor"></a><code><span><span class="keyword">val</span> canon_access : <span><a href="#type-astate">astate</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../PulseAccess/index.html#type-t">PulseAccess.t</a> <span class="arrow">&#45;&gt;</span></span> <a href="Memory/Access/index.html#type-t">Memory.Access.t</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Attributes"><a href="#module-Attributes" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Attributes/index.html">Attributes</a></span><span> : 
  <a href="../../PulseBaseAddressAttributes/module-type-S/index.html">PulseBaseAddressAttributes.S</a>
    <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../../PulseBaseAddressAttributes/module-type-S/index.html#type-key">key</a> := <a href="#type-t">t</a></span>
     <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="../../PulseBaseAddressAttributes/module-type-S/index.html#type-t">t</a> = <a href="../../PulseBaseAddressAttributes/index.html#type-t">PulseBaseAddressAttributes.t</a></span></span></code></div></div></div></body></html>