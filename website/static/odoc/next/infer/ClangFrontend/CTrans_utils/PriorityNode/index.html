<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>PriorityNode (infer.ClangFrontend.CTrans_utils.PriorityNode)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">infer</a> &#x00BB; <a href="../../index.html">ClangFrontend</a> &#x00BB; <a href="../index.html">CTrans_utils</a> &#x00BB; PriorityNode</nav><header class="odoc-preamble"><h1>Module <code><span>CTrans_utils.PriorityNode</span></code></h1><p>priority_node is used to enforce some kind of policy for creating nodes in the cfg. Certain elements of the AST _must_ create nodes therefore there is no need for them to use priority_node. Certain elements instead need or need not to create a node depending of certain factors. When an element of the latter kind wants to create a node it must claim priority first (like taking a lock). priority can be claimes only when it is free. If an element of AST succedes in claiming priority its id (pointer) is recorded in priority. After an element has finished it frees the priority. In general an AST element E checks if an ancestor has claimed priority. If priority is already claimed E does not have to create a node. If priority is free then it means E has to create the node. Then E claims priority and release it afterward.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <a href="../index.html#type-priority_node">priority_node</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-is_priority_free"><a href="#val-is_priority_free" class="anchor"></a><code><span><span class="keyword">val</span> is_priority_free : <span><a href="../index.html#type-trans_state">trans_state</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-try_claim_priority_node"><a href="#val-try_claim_priority_node" class="anchor"></a><code><span><span class="keyword">val</span> try_claim_priority_node : 
  <span><a href="../index.html#type-trans_state">trans_state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../index.html#type-trans_state">trans_state</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-force_claim_priority_node"><a href="#val-force_claim_priority_node" class="anchor"></a><code><span><span class="keyword">val</span> force_claim_priority_node : 
  <span><a href="../index.html#type-trans_state">trans_state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../index.html#type-trans_state">trans_state</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-own_priority_node"><a href="#val-own_priority_node" class="anchor"></a><code><span><span class="keyword">val</span> own_priority_node : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compute_controls_to_parent"><a href="#val-compute_controls_to_parent" class="anchor"></a><code><span><span class="keyword">val</span> compute_controls_to_parent : 
  <span><a href="../index.html#type-trans_state">trans_state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../IBase/Location/index.html#type-t">IBase.Location.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../IR/Procdesc/Node/index.html#type-stmt_nodekind">IR.Procdesc.Node.stmt_nodekind</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../index.html#type-control">control</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../index.html#type-control">control</a></span></code></div><div class="spec-doc"><p>Used by translation functions to handle potential cfg nodes. It connects nodes returned by the translation of stmt children and deals with creating or not a cfg node depending of owning the priority_node. It returns the <code>control</code> that should be passed to the parent.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compute_control_to_parent"><a href="#val-compute_control_to_parent" class="anchor"></a><code><span><span class="keyword">val</span> compute_control_to_parent : 
  <span><a href="../index.html#type-trans_state">trans_state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../IBase/Location/index.html#type-t">IBase.Location.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../IR/Procdesc/Node/index.html#type-stmt_nodekind">IR.Procdesc.Node.stmt_nodekind</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-control">control</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../index.html#type-control">control</a></span></code></div><div class="spec-doc"><p>like <code>compute_controls_to_parent</code> but for a singleton, so the only possible effect is creating a node</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compute_results_to_parent"><a href="#val-compute_results_to_parent" class="anchor"></a><code><span><span class="keyword">val</span> compute_results_to_parent : 
  <span><a href="../index.html#type-trans_state">trans_state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../IBase/Location/index.html#type-t">IBase.Location.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../IR/Procdesc/Node/index.html#type-stmt_nodekind">IR.Procdesc.Node.stmt_nodekind</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">return</span>:<span>(<a href="../../../IR/Exp/index.html#type-t">IR.Exp.t</a> * <a href="../../../IR/Typ/index.html#type-t">IR.Typ.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span><a href="../index.html#type-trans_result">trans_result</a> list</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../index.html#type-trans_result">trans_result</a></span></code></div><div class="spec-doc"><p>convenience wrapper around <code>compute_controls_to_parent</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compute_result_to_parent"><a href="#val-compute_result_to_parent" class="anchor"></a><code><span><span class="keyword">val</span> compute_result_to_parent : 
  <span><a href="../index.html#type-trans_state">trans_state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../IBase/Location/index.html#type-t">IBase.Location.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../IR/Procdesc/Node/index.html#type-stmt_nodekind">IR.Procdesc.Node.stmt_nodekind</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-trans_result">trans_result</a> <span class="arrow">&#45;&gt;</span></span>
  <a href="../index.html#type-trans_result">trans_result</a></span></code></div><div class="spec-doc"><p>convenience function like <code>compute_results_to_parent</code> when there is a single <code>trans_result</code> to consider</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-force_sequential"><a href="#val-force_sequential" class="anchor"></a><code><span><span class="keyword">val</span> force_sequential : 
  <span><a href="../../../IBase/Location/index.html#type-t">IBase.Location.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../IR/Procdesc/Node/index.html#type-stmt_nodekind">IR.Procdesc.Node.stmt_nodekind</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-trans_state">trans_state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">mk_first_opt</span>:
    <span>(<span><a href="../index.html#type-trans_state">trans_state</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-trans_result">trans_result</a> option</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">mk_second</span>:<span>(<span><a href="../index.html#type-trans_state">trans_state</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-trans_result">trans_result</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">mk_return</span>:<span>(<span><span class="label">fst</span>:<a href="../index.html#type-trans_result">trans_result</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">snd</span>:<a href="../index.html#type-trans_result">trans_result</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../IR/Exp/index.html#type-t">IR.Exp.t</a> * <a href="../../../IR/Typ/index.html#type-t">IR.Typ.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../index.html#type-trans_result">trans_result</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-force_sequential_with_acc"><a href="#val-force_sequential_with_acc" class="anchor"></a><code><span><span class="keyword">val</span> force_sequential_with_acc : 
  <span><a href="../../../IBase/Location/index.html#type-t">IBase.Location.t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../IR/Procdesc/Node/index.html#type-stmt_nodekind">IR.Procdesc.Node.stmt_nodekind</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../index.html#type-trans_state">trans_state</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="../../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">mk_first</span>:
    <span>(<span><a href="../index.html#type-trans_state">trans_state</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-trans_result">trans_result</a> * <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">mk_second</span>:
    <span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="../index.html#type-trans_state">trans_state</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span class="arrow">&#45;&gt;</span></span> <a href="../index.html#type-trans_result">trans_result</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="label">mk_return</span>:<span>(<span><span class="label">fst</span>:<a href="../index.html#type-trans_result">trans_result</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="label">snd</span>:<a href="../index.html#type-trans_result">trans_result</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../../IR/Exp/index.html#type-t">IR.Exp.t</a> * <a href="../../../IR/Typ/index.html#type-t">IR.Typ.t</a>)</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="../index.html#type-trans_result">trans_result</a></span></code></div></div></div></body></html>
