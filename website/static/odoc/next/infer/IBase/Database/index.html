<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Database (infer.IBase.Database)</title><link rel="stylesheet" href="../../../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../_odoc_support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">infer</a> &#x00BB; <a href="../index.html">IBase</a> &#x00BB; Database</nav><header class="odoc-preamble"><h1>Module <code><span>IBase.Database</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-id"><a href="#type-id" class="anchor"></a><code><span><span class="keyword">type</span> id</span><span> = </span></code><ol><li id="type-id.CaptureDatabase" class="def variant constructor anchored"><a href="#type-id.CaptureDatabase" class="anchor"></a><code><span>| </span><span><span class="constructor">CaptureDatabase</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>the capture databse *</p><span class="comment-delim">*)</span></div></li><li id="type-id.AnalysisDatabase" class="def variant constructor anchored"><a href="#type-id.AnalysisDatabase" class="anchor"></a><code><span>| </span><span><span class="constructor">AnalysisDatabase</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>the analysis/summaries database *</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-location"><a href="#type-location" class="anchor"></a><code><span><span class="keyword">type</span> location</span><span> = </span></code><ol><li id="type-location.Primary" class="def variant constructor anchored"><a href="#type-location.Primary" class="anchor"></a><code><span>| </span><span><span class="constructor">Primary</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>primary location under <code>Config.results_dir</code></p><span class="comment-delim">*)</span></div></li><li id="type-location.Secondary" class="def variant constructor anchored"><a href="#type-location.Secondary" class="anchor"></a><code><span>| </span><span><span class="constructor">Secondary</span> <span class="keyword">of</span> string</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>secondary location in the specified path</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-analysis_table"><a href="#type-analysis_table" class="anchor"></a><code><span><span class="keyword">type</span> analysis_table</span><span> = </span></code><ol><li id="type-analysis_table.Specs" class="def variant constructor anchored"><a href="#type-analysis_table.Specs" class="anchor"></a><code><span>| </span><span><span class="constructor">Specs</span></span></code></li><li id="type-analysis_table.BiabductionModelsSpecs" class="def variant constructor anchored"><a href="#type-analysis_table.BiabductionModelsSpecs" class="anchor"></a><code><span>| </span><span><span class="constructor">BiabductionModelsSpecs</span></span></code></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-string_of_analysis_table"><a href="#val-string_of_analysis_table" class="anchor"></a><code><span><span class="keyword">val</span> string_of_analysis_table : <span><a href="#type-analysis_table">analysis_table</a> <span class="arrow">&#45;&gt;</span></span> string</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-schema_hum"><a href="#val-schema_hum" class="anchor"></a><code><span><span class="keyword">val</span> schema_hum : string</span></code></div><div class="spec-doc"><p>some human-readable string describing the tables</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_tables"><a href="#val-create_tables" class="anchor"></a><code><span><span class="keyword">val</span> create_tables : <span>?prefix:string <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Sqlite3</span>.db <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-id">id</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-get_database"><a href="#val-get_database" class="anchor"></a><code><span><span class="keyword">val</span> get_database : <span><a href="#type-id">id</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Sqlite3</span>.db</span></code></div><div class="spec-doc"><p>You should always use this function to access the database, as the connection to it may change during the execution (see <code>new_database_connection</code>).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create_db"><a href="#val-create_db" class="anchor"></a><code><span><span class="keyword">val</span> create_db : <span><a href="#type-location">location</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-id">id</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>create the database file and initialize all the necessary tables</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-new_database_connection"><a href="#val-new_database_connection" class="anchor"></a><code><span><span class="keyword">val</span> new_database_connection : <span><a href="#type-location">location</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-id">id</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-new_database_connections"><a href="#val-new_database_connections" class="anchor"></a><code><span><span class="keyword">val</span> new_database_connections : <span><a href="#type-location">location</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>Closes the previous connections to the databases (if any), and opens new ones. Needed after calls to fork(2).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-ensure_database_connection"><a href="#val-ensure_database_connection" class="anchor"></a><code><span><span class="keyword">val</span> ensure_database_connection : <span><a href="#type-location">location</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-id">id</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>open a new connection to the specified database if there isn't one already</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-db_close"><a href="#val-db_close" class="anchor"></a><code><span><span class="keyword">val</span> db_close : <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p>close the current connection to the database</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-registered_stmt"><a href="#type-registered_stmt" class="anchor"></a><code><span><span class="keyword">type</span> registered_stmt</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-register_statement"><a href="#val-register_statement" class="anchor"></a><code><span><span class="keyword">val</span> register_statement : 
  <span><a href="#type-id">id</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(<span class="type-var">'a</span>, unit, string, <a href="#type-registered_stmt">registered_stmt</a>)</span> <span class="xref-unresolved">Base</span>.format4</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div><div class="spec-doc"><p>Return a function unit -&gt; Sqlite3.stmt that can be called (once the DB has been initialized) to get the prepared statement corresponding to the current DB connection. Use this to prepare statements only once per DB connection.</p><p>In particular, clients of this need not worry about calling <code>Sqlite3.finalize</code> on the returned statement, or about generating new statements when the connection to the DB changes: this is all handled internally.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-with_registered_statement"><a href="#val-with_registered_statement" class="anchor"></a><code><span><span class="keyword">val</span> with_registered_statement : 
  <span><a href="#type-registered_stmt">registered_stmt</a> <span class="arrow">&#45;&gt;</span></span>
  <span>f:<span>(<span><span class="xref-unresolved">Sqlite3</span>.db <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Sqlite3</span>.stmt <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span class="type-var">'a</span></span></code></div></div></div></body></html>