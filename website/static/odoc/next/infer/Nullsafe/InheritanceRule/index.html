<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>InheritanceRule (infer.Nullsafe.InheritanceRule)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../../index.html">infer</a> &#x00BB; <a href="../index.html">Nullsafe</a> &#x00BB; InheritanceRule</nav><header class="odoc-preamble"><h1>Module <code><span>Nullsafe.InheritanceRule</span></code></h1></header><div class="odoc-content"><p>Inheritance rule:</p><ol><li>Return type for an overridden method is covariant: overridden method is allowed to narrow down the return value to a subtype of the one from the base method; this means it is OK to make the return value non-null when it was nullable in the base)</li><li>Parameter type for an overridden method is contravariant. It is OK for a derived method to accept nullable in the params even if the base does not accept nullable.</li></ol><p>NOTE: Rule 1) is based on Java covariance rule for the return type. In contrast, rule 2) is nullsafe specific as Java does not support type contravariance for method params.</p><div class="odoc-spec"><div class="spec type" id="type-violation" class="anchored"><a href="#type-violation" class="anchor"></a><code><span><span class="keyword">type</span> violation</span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-compare_violation" class="anchored"><a href="#val-compare_violation" class="anchor"></a><code><span><span class="keyword">val</span> compare_violation : <span><a href="#type-violation">violation</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-violation">violation</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-type_role" class="anchored"><a href="#type-type_role" class="anchor"></a><code><span><span class="keyword">type</span> type_role</span><span> = </span></code><table><tr id="type-type_role.Param" class="anchored"><td class="def variant constructor"><a href="#type-type_role.Param" class="anchor"></a><code><span>| </span><span><span class="constructor">Param</span></span></code></td></tr><tr id="type-type_role.Ret" class="anchored"><td class="def variant constructor"><a href="#type-type_role.Ret" class="anchor"></a><code><span>| </span><span><span class="constructor">Ret</span></span></code></td></tr></table></div></div><div class="odoc-spec"><div class="spec value" id="val-check" class="anchored"><a href="#val-check" class="anchor"></a><code><span><span class="keyword">val</span> check : <span><a href="#type-type_role">type_role</a> <span class="arrow">&#45;&gt;</span></span> <span>base:<a href="../Nullability/index.html#type-t">Nullability.t</a> <span class="arrow">&#45;&gt;</span></span> <span>overridden:<a href="../Nullability/index.html#type-t">Nullability.t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(unit, <a href="#type-violation">violation</a>)</span> <a href="../../IStdlib/IStd/index.html#type-result">IStdlib.IStd.result</a></span></span></code></div><div class="spec-doc"><p>See description of the rule in the header of the file. Note that formal fact of violation might or might not be reported to the user, depending on the mode. See <code>to_reportable_violation</code></p></div></div><div class="odoc-spec"><div class="spec module" id="module-ReportableViolation" class="anchored"><a href="#module-ReportableViolation" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="ReportableViolation/index.html">ReportableViolation</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Violation that needs to be reported to the user.</p></div></div></div></body></html>