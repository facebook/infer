<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Nullsafe (infer.Nullsafe)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">infer</a> &#x00BB; Nullsafe</nav><header class="odoc-preamble"><h1>Module <code><span>Nullsafe</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module" id="module-AggregatedSummaries" class="anchored"><a href="#module-AggregatedSummaries" class="anchor"></a><code><span><span class="keyword">module</span> <a href="AggregatedSummaries/index.html">AggregatedSummaries</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Results of proc-level analysis, grouped by Java class they belong to. Useful for class-level analysis, when summaries for all methods are calculated and need to be combined together.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-AnnotatedField" class="anchored"><a href="#module-AnnotatedField" class="anchor"></a><code><span><span class="keyword">module</span> <a href="AnnotatedField/index.html">AnnotatedField</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Representation of a declared class field with nullsafe-specific data</p></div></div><div class="odoc-spec"><div class="spec module" id="module-AnnotatedNullability" class="anchored"><a href="#module-AnnotatedNullability" class="anchor"></a><code><span><span class="keyword">module</span> <a href="AnnotatedNullability/index.html">AnnotatedNullability</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Nullability of a type in Java program (e.g. in a function or field declaration). It might come from explicit annotations (or lack of annotation), or from other sources, including conventions about defaults, models, or the mode nullsafe runs in. NOTE: This is complementary to <a href="InferredNullability/index.html#type-t"><code>InferredNullability.t</code></a>. <a href="InferredNullability/index.html"><code>InferredNullability</code></a> contains info about _actual_ nullability (what did nullsafe infer according to its flow-sensitive rules.). In contrast, AnnotatedNullability represents _formal_ type as it appears in the program code. NOTE: Nullsafe disregards user-provided annotations for local types, so annotated nullability applies only for types declared at methods and field level.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-AnnotatedSignature" class="anchored"><a href="#module-AnnotatedSignature" class="anchor"></a><code><span><span class="keyword">module</span> <a href="AnnotatedSignature/index.html">AnnotatedSignature</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Method signature with annotations.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-AnnotatedType" class="anchored"><a href="#module-AnnotatedType" class="anchor"></a><code><span><span class="keyword">module</span> <a href="AnnotatedType/index.html">AnnotatedType</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Formal type in program together with its nullability information.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-AnnotationGraph" class="anchored"><a href="#module-AnnotationGraph" class="anchor"></a><code><span><span class="keyword">module</span> <a href="AnnotationGraph/index.html">AnnotationGraph</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Annotation graph for a Java class comprises of: * Nodes (annotation points): potential places in the class declaration to be annotated as <code>@Nullable</code> * For each annotation point the graph stores what will happen if this annotation point becomes real <code>@Nullable</code> (new violations that will arise) * Edges: if annotating a point A will require annotating another point B as <code>@Nullable</code>, A -&gt; B are connected in the graph.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-AssignmentRule" class="anchored"><a href="#module-AssignmentRule" class="anchor"></a><code><span><span class="keyword">module</span> <a href="AssignmentRule/index.html">AssignmentRule</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Assignment rule should be checked when a value is assigned to a location. Assignment can be explicit (lhs = rhs) or implicit (e.g. returning from a function). This rule checks if null can be passed to a place that does not expect null.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-ClassLevelAnalysis" class="anchored"><a href="#module-ClassLevelAnalysis" class="anchor"></a><code><span><span class="keyword">module</span> <a href="ClassLevelAnalysis/index.html">ClassLevelAnalysis</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>This stage is called for each Java class after all corresponding proc summaries are calculated.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-DereferenceRule" class="anchored"><a href="#module-DereferenceRule" class="anchor"></a><code><span><span class="keyword">module</span> <a href="DereferenceRule/index.html">DereferenceRule</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Dereference rule should be checked every type an object is dereferenced. The rule checks if the reference is nullable.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Eradicate" class="anchored"><a href="#module-Eradicate" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Eradicate/index.html">Eradicate</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>The main entry point for Nullsafe typechecker.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-EradicateChecks" class="anchored"><a href="#module-EradicateChecks" class="anchor"></a><code><span><span class="keyword">module</span> <a href="EradicateChecks/index.html">EradicateChecks</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Module for the checks called by Eradicate.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-EradicateReporting" class="anchored"><a href="#module-EradicateReporting" class="anchor"></a><code><span><span class="keyword">module</span> <a href="EradicateReporting/index.html">EradicateReporting</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-ErrorRenderingUtils" class="anchored"><a href="#module-ErrorRenderingUtils" class="anchor"></a><code><span><span class="keyword">module</span> <a href="ErrorRenderingUtils/index.html">ErrorRenderingUtils</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Helper tools for nicer rendering nullsafe error.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-FileLevelAnalysis" class="anchored"><a href="#module-FileLevelAnalysis" class="anchor"></a><code><span><span class="keyword">module</span> <a href="FileLevelAnalysis/index.html">FileLevelAnalysis</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-IDEnv" class="anchored"><a href="#module-IDEnv" class="anchor"></a><code><span><span class="keyword">module</span> <a href="IDEnv/index.html">IDEnv</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Environment for temporary identifiers used in instructions. Lazy implementation: only created when actually used.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-ImmutableChecker" class="anchored"><a href="#module-ImmutableChecker" class="anchor"></a><code><span><span class="keyword">module</span> <a href="ImmutableChecker/index.html">ImmutableChecker</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-InferredNullability" class="anchored"><a href="#module-InferredNullability" class="anchor"></a><code><span><span class="keyword">module</span> <a href="InferredNullability/index.html">InferredNullability</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Module to represent nullability of expressions inferred during flow-sensitive symbolic execution. NOTE: This is complementaty to <a href="InferredNullability/index.html#type-t"><code>InferredNullability.t</code></a>. <a href="InferredNullability/index.html"><code>InferredNullability</code></a> contains info about _formal_ nullability (what does the code say about nullability of a given type, according to explicit annotations and implicit agreements (e.g. models)). In contrast, InferredNullability represents what Nullsafe thinks about such and such expression according to its type inference rules.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-InheritanceRule" class="anchored"><a href="#module-InheritanceRule" class="anchor"></a><code><span><span class="keyword">module</span> <a href="InheritanceRule/index.html">InheritanceRule</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Inheritance rule:</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Initializers" class="anchored"><a href="#module-Initializers" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Initializers/index.html">Initializers</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Functionality for evaluating typestates after class initialization. Nullsafe's notion of initialization augments Java's one in the following way:</p></div></div><div class="odoc-spec"><div class="spec module" id="module-ModelTables" class="anchored"><a href="#module-ModelTables" class="anchor"></a><code><span><span class="keyword">module</span> <a href="ModelTables/index.html">ModelTables</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-Models" class="anchored"><a href="#module-Models" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Models/index.html">Models</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Methods dealing with specific knowledge about code in important third libraries, standard libraries, etc</p></div></div><div class="odoc-spec"><div class="spec module" id="module-Nullability" class="anchored"><a href="#module-Nullability" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Nullability/index.html">Nullability</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-NullsafeInit" class="anchored"><a href="#module-NullsafeInit" class="anchor"></a><code><span><span class="keyword">module</span> <a href="NullsafeInit/index.html">NullsafeInit</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-NullsafeIssue" class="anchored"><a href="#module-NullsafeIssue" class="anchor"></a><code><span><span class="keyword">module</span> <a href="NullsafeIssue/index.html">NullsafeIssue</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Information about the nullsafe issue to be reported to the user / put into the result json</p></div></div><div class="odoc-spec"><div class="spec module" id="module-NullsafeMode" class="anchored"><a href="#module-NullsafeMode" class="anchor"></a><code><span><span class="keyword">module</span> <a href="NullsafeMode/index.html">NullsafeMode</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Represents a type-checking mode of nullsafe.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-NullsafeSummary" class="anchored"><a href="#module-NullsafeSummary" class="anchor"></a><code><span><span class="keyword">module</span> <a href="NullsafeSummary/index.html">NullsafeSummary</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Summary of per-procedure nullsafe result analysis</p></div></div><div class="odoc-spec"><div class="spec module" id="module-OverAnnotatedRule" class="anchored"><a href="#module-OverAnnotatedRule" class="anchor"></a><code><span><span class="keyword">module</span> <a href="OverAnnotatedRule/index.html">OverAnnotatedRule</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Checks if a type in signature (e.g. return value) can be made more specific. NOTE: This rule is complementatary to assignment rule. While assignment rule checks a single assignment `lhs = rhs`, this rule checks checks ALL assignments to `lhs` in the program. NOTE: Violation of this rule is not a type violation, hence it should never be surfaced as error: `lhs`'s type can be intentionally made broad by code author (e.g. to anticipate future changes in the implementation). Heuristits are required to correctly surface overannotated rule to the user. This rule is useful for some scenarios, especially for nullability code conversions when it is expected that some signatures were annotated with <code>@Nullable</code> defensively, so surfacing such cases can improve API and make migration smooth.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-ProvisionalAnnotation" class="anchored"><a href="#module-ProvisionalAnnotation" class="anchor"></a><code><span><span class="keyword">module</span> <a href="ProvisionalAnnotation/index.html">ProvisionalAnnotation</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Provisional annotation is an imaginary <code>@Nullable</code> annotation that is added to a class element. * (It implies the corresponding element is NOT annotated as <code>@Nullable</code> in the source code.) * The purpose of provisional annotation is to compute Nullability graph: what would happen if such and such * element was annotated as <code>@Nullable</code>.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-ProvisionalViolation" class="anchored"><a href="#module-ProvisionalViolation" class="anchor"></a><code><span><span class="keyword">module</span> <a href="ProvisionalViolation/index.html">ProvisionalViolation</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A simple wrapper over provisional violations for Rules</p></div></div><div class="odoc-spec"><div class="spec module" id="module-ThirdPartyAnnotationGlobalRepo" class="anchored"><a href="#module-ThirdPartyAnnotationGlobalRepo" class="anchor"></a><code><span><span class="keyword">module</span> <a href="ThirdPartyAnnotationGlobalRepo/index.html">ThirdPartyAnnotationGlobalRepo</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A singleton. Should be initialized once prior to start of nullsafe.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-ThirdPartyAnnotationInfo" class="anchored"><a href="#module-ThirdPartyAnnotationInfo" class="anchor"></a><code><span><span class="keyword">module</span> <a href="ThirdPartyAnnotationInfo/index.html">ThirdPartyAnnotationInfo</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>In-memory storage the information about nullability annotation of third-party methods.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-ThirdPartyAnnotationInfoLoader" class="anchored"><a href="#module-ThirdPartyAnnotationInfoLoader" class="anchor"></a><code><span><span class="keyword">module</span> <a href="ThirdPartyAnnotationInfoLoader/index.html">ThirdPartyAnnotationInfoLoader</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-ThirdPartyMethod" class="anchored"><a href="#module-ThirdPartyMethod" class="anchor"></a><code><span><span class="keyword">module</span> <a href="ThirdPartyMethod/index.html">ThirdPartyMethod</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>A helper module responsible for representing nullability information for a single 3rd party method, as well with functionality to read this information from the 3rd party nullability repository.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-TypeCheck" class="anchored"><a href="#module-TypeCheck" class="anchor"></a><code><span><span class="keyword">module</span> <a href="TypeCheck/index.html">TypeCheck</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Module type for the type checking functions.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-TypeErr" class="anchored"><a href="#module-TypeErr" class="anchor"></a><code><span><span class="keyword">module</span> <a href="TypeErr/index.html">TypeErr</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Module for Type Error messages.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-TypeOrigin" class="anchored"><a href="#module-TypeOrigin" class="anchor"></a><code><span><span class="keyword">module</span> <a href="TypeOrigin/index.html">TypeOrigin</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-TypeState" class="anchored"><a href="#module-TypeState" class="anchor"></a><code><span><span class="keyword">module</span> <a href="TypeState/index.html">TypeState</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Module for typestates: maps from expressions to annotated types, with extensions.</p></div></div></div></body></html>