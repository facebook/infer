<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>PriorityNode (infer.ClangFrontend__CTrans_utils.PriorityNode)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.2"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">infer</a> &#x00BB; <a href="../index.html">ClangFrontend__CTrans_utils</a> &#x00BB; PriorityNode</nav><h1>Module <code>ClangFrontend__CTrans_utils.PriorityNode</code></h1><p>priority_node is used to enforce some kind of policy for creating nodes in the cfg. Certain elements of the AST _must_ create nodes therefore there is no need for them to use priority_node. Certain elements instead need or need not to create a node depending of certain factors. When an element of the latter kind wants to create a node it must claim priority first (like taking a lock). priority can be claimes only when it is free. If an element of AST succedes in claiming priority its id (pointer) is recorded in priority. After an element has finished it frees the priority. In general an AST element E checks if an ancestor has claimed priority. If priority is already claimed E does not have to create a node. If priority is free then it means E has to create the node. Then E claims priority and release it afterward.</p></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code><code> = <a href="../index.html#type-priority_node">priority_node</a></code></dt></dl><dl><dt class="spec value" id="val-is_priority_free"><a href="#val-is_priority_free" class="anchor"></a><code><span class="keyword">val</span> is_priority_free : <a href="../index.html#type-trans_state">trans_state</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-try_claim_priority_node"><a href="#val-try_claim_priority_node" class="anchor"></a><code><span class="keyword">val</span> try_claim_priority_node : <a href="../index.html#type-trans_state">trans_state</a> <span>&#45;&gt;</span> <a href="../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span>&#45;&gt;</span> <a href="../index.html#type-trans_state">trans_state</a></code></dt><dt class="spec value" id="val-force_claim_priority_node"><a href="#val-force_claim_priority_node" class="anchor"></a><code><span class="keyword">val</span> force_claim_priority_node : <a href="../index.html#type-trans_state">trans_state</a> <span>&#45;&gt;</span> <a href="../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span>&#45;&gt;</span> <a href="../index.html#type-trans_state">trans_state</a></code></dt><dt class="spec value" id="val-own_priority_node"><a href="#val-own_priority_node" class="anchor"></a><code><span class="keyword">val</span> own_priority_node : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span>&#45;&gt;</span> bool</code></dt><dt class="spec value" id="val-compute_controls_to_parent"><a href="#val-compute_controls_to_parent" class="anchor"></a><code><span class="keyword">val</span> compute_controls_to_parent : <a href="../index.html#type-trans_state">trans_state</a> <span>&#45;&gt;</span> <a href="../../IBase/Location/index.html#type-t">IBase.Location.t</a> <span>&#45;&gt;</span> <a href="../../IR/Procdesc/Node/index.html#type-stmt_nodekind">IR.Procdesc.Node.stmt_nodekind</a> <span>&#45;&gt;</span> <a href="../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span>&#45;&gt;</span> <span><a href="../index.html#type-control">control</a> list</span> <span>&#45;&gt;</span> <a href="../index.html#type-control">control</a></code></dt><dd><p>Used by translation functions to handle potential cfg nodes. It connects nodes returned by the translation of stmt children and deals with creating or not a cfg node depending of owning the priority_node. It returns the <code>control</code> that should be passed to the parent.</p></dd></dl><dl><dt class="spec value" id="val-compute_control_to_parent"><a href="#val-compute_control_to_parent" class="anchor"></a><code><span class="keyword">val</span> compute_control_to_parent : <a href="../index.html#type-trans_state">trans_state</a> <span>&#45;&gt;</span> <a href="../../IBase/Location/index.html#type-t">IBase.Location.t</a> <span>&#45;&gt;</span> <a href="../../IR/Procdesc/Node/index.html#type-stmt_nodekind">IR.Procdesc.Node.stmt_nodekind</a> <span>&#45;&gt;</span> <a href="../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span>&#45;&gt;</span> <a href="../index.html#type-control">control</a> <span>&#45;&gt;</span> <a href="../index.html#type-control">control</a></code></dt><dd><p>like <code>compute_controls_to_parent</code> but for a singleton, so the only possible effect is creating a node</p></dd></dl><dl><dt class="spec value" id="val-compute_results_to_parent"><a href="#val-compute_results_to_parent" class="anchor"></a><code><span class="keyword">val</span> compute_results_to_parent : <a href="../index.html#type-trans_state">trans_state</a> <span>&#45;&gt;</span> <a href="../../IBase/Location/index.html#type-t">IBase.Location.t</a> <span>&#45;&gt;</span> <a href="../../IR/Procdesc/Node/index.html#type-stmt_nodekind">IR.Procdesc.Node.stmt_nodekind</a> <span>&#45;&gt;</span> <a href="../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span>&#45;&gt;</span> <span>return:<span>(<a href="../../IR/Exp/index.html#type-t">IR.Exp.t</a> * <a href="../../IR/Typ/index.html#type-t">IR.Typ.t</a>)</span></span> <span>&#45;&gt;</span> <span><a href="../index.html#type-trans_result">trans_result</a> list</span> <span>&#45;&gt;</span> <a href="../index.html#type-trans_result">trans_result</a></code></dt><dd><p>convenience wrapper around <code>compute_controls_to_parent</code></p></dd></dl><dl><dt class="spec value" id="val-compute_result_to_parent"><a href="#val-compute_result_to_parent" class="anchor"></a><code><span class="keyword">val</span> compute_result_to_parent : <a href="../index.html#type-trans_state">trans_state</a> <span>&#45;&gt;</span> <a href="../../IBase/Location/index.html#type-t">IBase.Location.t</a> <span>&#45;&gt;</span> <a href="../../IR/Procdesc/Node/index.html#type-stmt_nodekind">IR.Procdesc.Node.stmt_nodekind</a> <span>&#45;&gt;</span> <a href="../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span>&#45;&gt;</span> <a href="../index.html#type-trans_result">trans_result</a> <span>&#45;&gt;</span> <a href="../index.html#type-trans_result">trans_result</a></code></dt><dd><p>convenience function like <code>compute_results_to_parent</code> when there is a single <code>trans_result</code> to consider</p></dd></dl><dl><dt class="spec value" id="val-force_sequential"><a href="#val-force_sequential" class="anchor"></a><code><span class="keyword">val</span> force_sequential : <a href="../../IBase/Location/index.html#type-t">IBase.Location.t</a> <span>&#45;&gt;</span> <a href="../../IR/Procdesc/Node/index.html#type-stmt_nodekind">IR.Procdesc.Node.stmt_nodekind</a> <span>&#45;&gt;</span> <a href="../index.html#type-trans_state">trans_state</a> <span>&#45;&gt;</span> <a href="../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span>&#45;&gt;</span> <span>mk_first_opt:<span>(<a href="../index.html#type-trans_state">trans_state</a> <span>&#45;&gt;</span> <a href="../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span>&#45;&gt;</span> <span><a href="../index.html#type-trans_result">trans_result</a> option</span>)</span></span> <span>&#45;&gt;</span> <span>mk_second:<span>(<a href="../index.html#type-trans_state">trans_state</a> <span>&#45;&gt;</span> <a href="../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span>&#45;&gt;</span> <a href="../index.html#type-trans_result">trans_result</a>)</span></span> <span>&#45;&gt;</span> <span>mk_return:<span>(<span>fst:<a href="../index.html#type-trans_result">trans_result</a></span> <span>&#45;&gt;</span> <span>snd:<a href="../index.html#type-trans_result">trans_result</a></span> <span>&#45;&gt;</span> <a href="../../IR/Exp/index.html#type-t">IR.Exp.t</a> * <a href="../../IR/Typ/index.html#type-t">IR.Typ.t</a>)</span></span> <span>&#45;&gt;</span> <a href="../index.html#type-trans_result">trans_result</a></code></dt><dt class="spec value" id="val-force_sequential_with_acc"><a href="#val-force_sequential_with_acc" class="anchor"></a><code><span class="keyword">val</span> force_sequential_with_acc : <a href="../../IBase/Location/index.html#type-t">IBase.Location.t</a> <span>&#45;&gt;</span> <a href="../../IR/Procdesc/Node/index.html#type-stmt_nodekind">IR.Procdesc.Node.stmt_nodekind</a> <span>&#45;&gt;</span> <a href="../index.html#type-trans_state">trans_state</a> <span>&#45;&gt;</span> <a href="../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span>&#45;&gt;</span> <span>mk_first:<span>(<a href="../index.html#type-trans_state">trans_state</a> <span>&#45;&gt;</span> <a href="../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span>&#45;&gt;</span> <a href="../index.html#type-trans_result">trans_result</a> * <span class="type-var">'a</span>)</span></span> <span>&#45;&gt;</span> <span>mk_second:<span>(<span class="type-var">'a</span> <span>&#45;&gt;</span> <a href="../index.html#type-trans_state">trans_state</a> <span>&#45;&gt;</span> <a href="../../ATDGenerated/Clang_ast_t/index.html#type-stmt_info">ATDGenerated.Clang_ast_t.stmt_info</a> <span>&#45;&gt;</span> <a href="../index.html#type-trans_result">trans_result</a>)</span></span> <span>&#45;&gt;</span> <span>mk_return:<span>(<span>fst:<a href="../index.html#type-trans_result">trans_result</a></span> <span>&#45;&gt;</span> <span>snd:<a href="../index.html#type-trans_result">trans_result</a></span> <span>&#45;&gt;</span> <a href="../../IR/Exp/index.html#type-t">IR.Exp.t</a> * <a href="../../IR/Typ/index.html#type-t">IR.Typ.t</a>)</span></span> <span>&#45;&gt;</span> <a href="../index.html#type-trans_result">trans_result</a></code></dt></dl></div></body></html>