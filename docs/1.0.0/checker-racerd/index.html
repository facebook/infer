<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-1.0.0 plugin-docs plugin-id-default docs-doc-id-checker-racerd">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">RacerD | Infer</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://fbinfer.com/docs/1.0.0/checker-racerd"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.0.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.0.0"><meta data-rh="true" name="docsearch:version" content="1.0.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.0.0"><meta data-rh="true" property="og:title" content="RacerD | Infer"><meta data-rh="true" name="description" content="Thread safety analysis."><meta data-rh="true" property="og:description" content="Thread safety analysis."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://fbinfer.com/docs/1.0.0/checker-racerd"><link data-rh="true" rel="alternate" href="https://fbinfer.com/docs/1.0.0/checker-racerd" hreflang="en"><link data-rh="true" rel="alternate" href="https://fbinfer.com/docs/1.0.0/checker-racerd" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://WXX0LT0N1W-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Infer RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Infer Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Infer" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.eb29ee50.css">
<link rel="preload" href="/assets/js/runtime~main.5d8d8b69.js" as="script">
<link rel="preload" href="/assets/js/main.36c7571a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#20232a;color:#fff" role="banner"><div class="content_knG7 announcementBarContent_xLdY">Support Ukraine ðŸ‡ºðŸ‡¦ <a target="_blank" rel="noopener noreferrer" href="https://opensource.facebook.com/support-ukraine"> Help Provide Humanitarian Aid to Ukraine</a>.</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Infer Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Infer Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Infer</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/getting-started">Docs</a><a class="navbar__item navbar__link" href="/docs/support">Support</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://twitter.com/fbinfer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.facebook.com/inferstaticanalyzer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/facebook/infer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.0.0/getting-started">Quick Start</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.0.0/infer-workflow">User Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/1.0.0/all-issue-types">Analyses and Issue Types</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/all-issue-types">List of all issue types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-annotation-reachability">Annotation Reachability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-biabduction">Biabduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-bufferoverrun">Buffer Overrun Analysis (InferBO)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-config-checks-between-markers">Config Checks between Markers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-cost">Cost: Runtime Complexity Analysis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-eradicate">Eradicate</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-fragment-retains-view">Fragment Retains View</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-immutable-cast">Immutable Cast</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-impurity">Impurity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-inefficient-keyset-iterator">Inefficient keySet Iterator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-linters">AST Language (AL)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-litho-required-props">Litho &quot;Required Props&quot;</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-liveness">Liveness</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-loop-hoisting">Loop Hoisting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-printf-args">`printf()` Argument Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-pulse">Pulse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-purity">Purity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-quandary">Quandary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/1.0.0/checker-racerd">RacerD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-resource-leak-lab">Resource Leak Lab Exercise</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-siof">Static Initialization Order Fiasco</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-self-in-block">Self in Block</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-starvation">Starvation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-topl-biabd">TOPL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-topl-pulse">TOPL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/1.0.0/checker-uninit">Uninitialized Value</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.0.0/about-Infer">Foundations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.0.0/absint-framework">Contribute</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/1.0.0/versions">Versions</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->Infer<!-- --> <b>1.0.0</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/checker-racerd">latest version</a></b> (<!-- -->1.1.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Analyses and Issue Types</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">RacerD</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.0.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>RacerD</h1></header><p>Thread safety analysis.</p><p>Activate with <code>--racerd</code>.</p><p>Supported languages:</p><ul><li>C/C++/ObjC: Yes</li><li>Java: Yes</li></ul><p>RacerD finds data races in your C++ and Java code. This page gives a more in-depth
explanation of how the analysis works <em>for Java code</em>, but may be less complete than the
<a href="/docs/1.0.0/all-issue-types#thread_safety_violation">Thread Safety Violation bug description page</a>.</p><p>To run the analysis, you can use plain <code>infer</code> (to run RacerD along with other
analyses that are run by default) or <code>infer --racerd-only</code> (to run only RacerD).</p><p>For example, the command <code>infer --racerd-only -- javac File.java</code> will run
RacerD on File.java.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to Background" title="Direct link to Background">â€‹</a></h2><p>RacerD statically analyzes Java code to detect potential concurrency bugs. This
analysis does not attempt to prove the absence of concurrency issues, rather, it
searches for a high-confidence class of data races. At the moment RacerD
concentrates on race conditions between methods in a class that is itself
intended to be thread safe. A race condition occurs when there are two
concurrent accesses to a class member variable that are not separated by mutual
exclusion, and at least one of the accesses is a write. Mutual exclusion can be
ensured by synchronization primitives such as locks, or by knowledge that both
accesses occur on the same thread.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="triggering-the-analysis">Triggering the analysis<a href="#triggering-the-analysis" class="hash-link" aria-label="Direct link to Triggering the analysis" title="Direct link to Triggering the analysis">â€‹</a></h2><p>RacerD doesn&#x27;t try to check <em>all</em> code for concurrency issues; it only looks at
code that it believes can run in a concurrent context. There are two signals
that RacerD looks for: (1) Explicitly annotating a class/method with
<code>@ThreadSafe</code> and (2) using a lock via the <code>synchronized</code> keyword. In both
cases, RacerD will look for concurrency issues in the code containing the signal
and all of its dependencies. In particular, it will report races between any
non-<code>private</code> methods of the same class that can perform conflicting accesses.
Annotating a class/interface with <code>@ThreadSafe</code> also triggers checking for all
of the subclasses of the class/implementations of the interface.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="warnings">Warnings<a href="#warnings" class="hash-link" aria-label="Direct link to Warnings" title="Direct link to Warnings">â€‹</a></h2><p>Let&#x27;s take a look at the different types of concurrency issues that RacerD
flags. Two of the warning types are data races (<code>Unprotected write</code> and
<code>Read/write race</code>), and the third warning type encourages adding <code>@ThreadSafe</code>
annotations to interfaces to trigger additional checking.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="unprotected-write">Unprotected write<a href="#unprotected-write" class="hash-link" aria-label="Direct link to Unprotected write" title="Direct link to Unprotected write">â€‹</a></h3><p>RacerD will report an unprotected write when one or more writes can run in
parallel without synchronization. These come in two flavors: (1) a self-race (a
write-write race that occurs due to a method running in parallel with itself)
and (2) two conflicting writes to the same location. Here&#x27;s an example of the
self-race flavor:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@ThreadSafe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class Dinner {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  private int mTemperature;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  public void makeDinner() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    boilWater();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  private void boilWater() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    mTemperature = 100; // unprotected write.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The class <code>Dinner</code> will generate the following report on the public method
<code>makeDinner()</code>:</p><p><code>There may be a Thread Safety Violation: makeDinner() indirectly writes to mTemperature outside of synchronization.</code></p><p>This warning can be fixed by synchronizing the access to <code>mTemperature</code>, making
<code>mTemperature</code> <code>volatile</code>, marking <code>makeDinner</code> as <code>@VisibleForTesting</code>, or
suppressing the warning by annotating the <code>Dinner</code> class or <code>makeDinner</code> method
with <code>@ThreadSafe(enableChecks = false)</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="readwrite-race">Read/Write Race<a href="#readwrite-race" class="hash-link" aria-label="Direct link to Read/Write Race" title="Direct link to Read/Write Race">â€‹</a></h3><p>We sometimes need to protect read accesses as well as writes. Consider the
following class with unsynchronized methods.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@ThreadSafe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class Account {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  int mBalance = 0;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  public void deposit(int amount) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if (amount &gt; 0) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      mBalance += amount;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  public int withdraw(int amount){</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if (amount &gt;= 0 &amp;&amp; mBalance - amount &gt;= 0) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      mBalance -= amount;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      return mBalance;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      return 0;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If you run the <code>withdraw()</code> method in parallel with itself or with <code>deposit()</code>
you can get unexpected results here. For instance, if the stored balance is 11
and you run <code>withdraw(10)</code> in parallel with itself you can get a negative
balance. Furthermore, if you synchronize only the write statement
<code>mBalance -= amount</code>, then you can still get this bad result. The reason is that
there is a read/write race between the boolean condition
<code>mBalance - amount &gt;= 0</code> and the writes. RacerD will duly warn</p><p><code>Read/Write race. Public method int Account.withdraw(int) reads from field Account.mBalance. Potentially races with writes in methods void Account.deposit(int), int Account.withdraw(int)</code></p><p>on the line with this boolean condition.</p><p>A solution to the threading problem here is to make both methods <code>synchronized</code>
to wrap both read and write accesses, or to use an <code>AtomicInteger</code> for
<code>mBalance</code> rather than an ordinary <code>int</code>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="interface-not-thread-safe">Interface not thread-safe<a href="#interface-not-thread-safe" class="hash-link" aria-label="Direct link to Interface not thread-safe" title="Direct link to Interface not thread-safe">â€‹</a></h3><p>In the following code, RacerD will report an <code>Interface not thread-safe</code> warning
on the call to <code>i.bar()</code>:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">interface I {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  void bar();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@ThreadSafe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">class C {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  void foo(I i) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    i.bar(); // RacerD warns here</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The way to fix this warning is to add a <code>@ThreadSafe</code> annotation to the
interface <code>I</code>, which will enforce the thread-safety of each of the
implementations of <code>I</code>.</p><p>You might wonder why it&#x27;s necessary to annotate <code>I</code> -- can&#x27;t RacerD just look at
all the implementations of <code>i</code> at the call site for <code>bar</code>? Although this is a
fine idea in principle, it&#x27;s a bad idea in practice due to a (a) separate
compilation and (b) our diff-based deployment model. In the example above, the
compiler doesn&#x27;t have to know about all implementations (or indeed, any
implementations) of <code>I</code> at the time it compiles this code, so there&#x27;s no
guarantee that RacerD will know about or be able to check all implementations of
<code>I</code>. That&#x27;s (a). For (b), say that we check that all implementations of <code>I</code> are
thread-safe at the time this code is written, but we don&#x27;t add the annotation.
If someone else comes along and adds a new implementation of <code>I</code> that is not
thread-safe, RacerD will have no way of knowing that this will cause a potential
bug in <code>foo</code>. But if <code>I</code> is annotated, RacerD will enforce that all new
implementations of <code>I</code> are thread-safe, and <code>foo</code> will remain bug-free.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="annotations-to-help-racerd-understand-your-code">Annotations to help RacerD understand your code<a href="#annotations-to-help-racerd-understand-your-code" class="hash-link" aria-label="Direct link to Annotations to help RacerD understand your code" title="Direct link to Annotations to help RacerD understand your code">â€‹</a></h2><p>Getting started with RacerD doesn&#x27;t require any annotations at all -- RacerD
will look at your usage of locks and figure out what data is not guarded
consistently. But increasing the coverage and signal-to-noise ratio may require
adding <code>@ThreadSafe</code> annotations along with some of the other annotations
described below. Most of annotations described below can be used via the Maven
Central package available
<a href="https://maven-repository.com/artifact/com.facebook.infer.annotation/infer-annotation" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="threadconfined"><code>@ThreadConfined</code><a href="#threadconfined" class="hash-link" aria-label="Direct link to threadconfined" title="Direct link to threadconfined">â€‹</a></h3><p>The intuitive idea of thread-safety is that a class is impervious to concurrency
issues for all concurrent contexts, even those that have not been written yet
(it is future-proof). RacerD implements this by naively assuming that any method
can potentially be called on any thread. You may determine, however, that an
object, method, or field is only ever accessed on a single thread during program
execution. Annotating such elements with <code>@ThreadConfined</code> informs RacerD of
this restriction. Note that a thread-confined method cannot race with itself but
it can still race with other methods.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">List mCache;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@ThreadConfined(UI)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">void prepareCache() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // populate the cache</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  mCache.add(...);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // post cache cleanup task to run later</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  mUIExecutor.execute(new Runnable() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    @ThreadConfined(UI)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public void run() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      mCache.clear();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example, both <code>prepareCache</code> and <code>run</code> touch <code>mCache</code>. But there&#x27;s no
possibility of a race between the two methods because both of them will run
sequentially on the UI thread. Adding a <code>@ThreadConfined(UI)</code> or <code>@UiThread</code>
annotation to these methods will stop it from warning that there is a race on
<code>mCache</code>. We could also choose to add a <code>@ThreadConfined</code> annotation to <code>mCache</code>
itself.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="functional"><code>@Functional</code><a href="#functional" class="hash-link" aria-label="Direct link to functional" title="Direct link to functional">â€‹</a></h3><p>Not all races are bugs; a race can be benign. Consider the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@Functional Boolean askNetworkIfShouldShowFeature();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">private Boolean mShouldShowFeature;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">@ThreadSafe boolean shouldShowFeature() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  if (mShouldShowFeature == null) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    mShouldShowFeature = askNetworkIfShouldShowFeature();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  return mShouldShowFeature;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This code caches the result of an expensive network call that checks whether the
current user should be shown an experimental feature. This code looks racy, and
indeed it is: if two threads execute <code>shouldShowFeature()</code> at the same time, one
may read <code>mShouldShowFeature</code> at the same time the other is writing it.</p><p>However, this is actually a <em>benign</em> race that the programmer intentionally
allows for performance reasons. The reason this code is safe is that the
programmer knows that <code>askNetworkIfShouldShowFeature()</code> will always return the
same value in the same run of the app. Adding synchronization would remove the
race, but acquiring/releasing locks and lock contention would potentially slow
down every call to <code>shouldShowFeature()</code>. The benign race approach makes every
call after the first fast without changing the safety of the code.</p><p>RacerD will report a race on this code by default, but adding the
<code>@Functional annotation to askNetworkIfShouldShowFeature()</code> informs RacerD that
the function is always expected to return the same value. This assumption allows
RacerD to understand that this particular code is safe, though it will still
(correctly) warn if <code>mShouldShowFeature</code> is read/written elsewhere.</p><p>Be sure not to use the <code>@Functional</code> pattern for <em>singleton instantiation</em>, as
it&#x27;s possible the &quot;singleton&quot; can be constructed more than once.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class MySingleton {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  private static sInstance;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  // Not @Functional</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  public MySingleton getInstance() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if (sInstance == null) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      // Different threads may construct their own instances.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      sInstance == new MySingleton();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return sInstance;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="returnsownership"><code>@ReturnsOwnership</code><a href="#returnsownership" class="hash-link" aria-label="Direct link to returnsownership" title="Direct link to returnsownership">â€‹</a></h3><p>RacerD does not warn on unprotected writes to <em>owned</em> objects. An object is
owned if it has been freshly allocated in the current thread and has not escaped
to another thread. RacerDf automatically tracks ownership in most cases, but it
needs help with <code>abstract</code> and <code>interface</code> methods that return ownership:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@ThreadSafe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public interface Car {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  @ReturnsOwnership abstract Car buyCar();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  void carsStuff() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Car myCar = new Car();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    myCar.wheels = 4; // RacerD won&#x27;t warn here because it knows myCar is owned</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Car otherCar = buyCar();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    otherCar.wheels = 3; // RacerD would normally warn here, but won&#x27;t because of the `@ReturnsOwnership` annotation</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="visiblefortesting"><code>@VisibleForTesting</code><a href="#visiblefortesting" class="hash-link" aria-label="Direct link to visiblefortesting" title="Direct link to visiblefortesting">â€‹</a></h3><p>RacerD reports races between any two non<code>-private</code> methods of a class that may
run in a concurrent context. Sometimes, a RacerD report may be false because one
of the methods cannot actually be called from outside the current class. One fix
is making the method <code>private</code> to enforce this, but this might break unit tests
that need to call the method in order to test it. In this case, the
<code>@VisibleForTesting</code> annotation will allow RacerD to consider the method as
effectively <code>private</code> and will still allow it to be called from the unit test:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@VisibleForTesting void setF() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  this.f = ...; // RacerD would normally warn here, but @VisibleForTesting will silence the warning</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">synchronized void setFWithLock() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  setF();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Unlike the other annotations shown here, this one lives in
<a href="https://developer.android.com/reference/android/support/annotation/VisibleForTesting.html" target="_blank" rel="noopener noreferrer">Android</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="interprocedural-reasoning">Interprocedural Reasoning<a href="#interprocedural-reasoning" class="hash-link" aria-label="Direct link to Interprocedural Reasoning" title="Direct link to Interprocedural Reasoning">â€‹</a></h2><p>An important feature of RacerD is that it finds races by analyzing not just one
file or class, but by looking at memory accesses that occur after going through
several procedure calls. It handles this even between classes and between files.</p><p>Here is a very basic example</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@ThreadSafe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">class A{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  void m1(B bb) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    bb.meth_write();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">class B{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Integer x;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> void meth_write() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   x = 88;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Class <code>B</code> is not annotated <code>@ThreadSafe</code> and does not have any locks, so RacerD
does not directly look for threading issues there. However, method <code>m1()</code> in
class <code>A</code> has a potential self-race, if it is run in parallel with itself and
the same argument for each call. RacerD discovers this.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">InterProc.java:17: error: THREAD_SAFETY_VIOLATION</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Unprotected write. Non-private method `A.m1` indirectly writes to field `&amp;this.B.x` outside of synchronization.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> Reporting because the current class is annotated `@ThreadSafe`, so we assume that this method can run in</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> parallel with other non-private methods in the class (incuding itself).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  15.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  16.     void m1(B bb) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  17. &gt;     bb.meth_write();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  18.     }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  19.   }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>RacerD does this sort of reasoning using what is known as a <em>compositional
inteprocedural analysis</em>. There, each method is analyzed independently of its
context to produce a summary of the behaviour of the procedure. In this case the
summaries for <code>m1()&#x27; and</code>meth()&#x27; include information as follows.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">Procedure: void A.m1(B)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Accesses: { Unprotected({ 1 }) -&gt; { Write to &amp;bb.B.x at void B.meth_write() at line 17 } }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Procedure: void B.meth_write()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Accesses { Unprotected({ 0 }) -&gt; { Write to &amp;this.B.x at  at line 25 } }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The descriptions here are cryptic and do not include all the information in the
summaries, but the main point is that you can use RacerD to look for races in
codebases where the mutations done by threads might occur only after a chain of
procedure calls.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="-context-and-selected-related-work"><a name="context"></a> Context and Selected Related Work<a href="#-context-and-selected-related-work" class="hash-link" aria-label="Direct link to -context-and-selected-related-work" title="Direct link to -context-and-selected-related-work">â€‹</a></h2><p>Reasoning about concurrency divides into bug detection and proving absence of
bugs. RacerD is on the detection side of reasoning.</p><p>The rapid growth in the number of interleavings is problematic for tools that
attempt exhaustive exploration. With just 150 instructions for two threads, the
number 10^88 of interleavings is more that the estimated number of atoms in the
known universe.
<a href="https://en.wikipedia.org/wiki/Partial_order_reduction" target="_blank" rel="noopener noreferrer">There has been important work which uses various techniques to attempt to reduce the number of interleavings</a>
while still in principle covering all possibilities, but scale is still a
challenge. Note that RacerD is not exhaustive: it has false negatives (missed
bugs). But in compensation it is fast, and effective (it finds bugs in
practice).</p><p>Static analysis for concurrency has attracted a lot of attention from
researchers, but difficulties with scalability and precision have meant that
previous techniques have had little industrial impact. Automatic static race
detection itself has seen significant work. The most advanced approaches,
exemplified by the <a href="http://www.cis.upenn.edu/~mhnaik/pubs/pldi06.pdf" target="_blank" rel="noopener noreferrer">Chord</a>
tool, often use a whole-program analysis paired with a sophisticated alias
analysis, two features we have consciously avoided. Generally speaking, the
leading research tools can be more precise, but RacerD is faster and can operate
without the whole program: we have opted to go for speed in a way that enables
industrial deployment on a large, rapidly changing codebase, while trying to use
as simple techniques as possible to cover many (not all) of the patterns covered
by slower but precise research tools.</p><p>An industrial static analysis tool from
<a href="http://homepages.inf.ed.ac.uk/dts/pub/avocs2015.pdf" target="_blank" rel="noopener noreferrer">Contemplate</a> also targets
@ThreadSafe annotations, but limits the amount of inter-procedural reasoning:
â€œThis analysis is interprocedural, but to keep the overall analysis scalable,
only calls to private and protected methods on the same class are followedâ€.
RacerD does deep, cross-file and cross-class inter-procedural reasoning, and yet
still scales; the inter-class capability was one of the first requests from
Facebook engineers.
<a href="https://code.facebook.com/posts/1537144479682247/finding-inter-procedural-bugs-at-scale-with-infer-static-analyzer/" target="_blank" rel="noopener noreferrer">A separate blog post looked at 100 recent data race fixes</a>
in Infer&#x27;s deployment in various bug categories, and for data races observed
that 53 of them were inter-file (and thus involving multiple classes).
<a href="#interprocedural-reasoning">See above</a> for an example of RacerD&#x27;s interprocedural
capabilities.</p><p>One reaction to the challenge of developing effective static race detectors has
been to ask the programmer to do more work to help the analyzer. Examples of
this approach include the
<a href="https://clang.llvm.org/docs/ThreadSafetyAnalysis.html" target="_blank" rel="noopener noreferrer">Clang Thread Safety Analyzer</a>,
the typing of <a href="https://doc.rust-lang.org/std/sync/struct.Mutex.html" target="_blank" rel="noopener noreferrer">locks</a> in
Rust, and the use/checking of @GuardedBy annotations in
<a href="https://homes.cs.washington.edu/~mernst/pubs/locking-semantics-nfm2016.pdf" target="_blank" rel="noopener noreferrer">Java</a>
including in
<a href="https://github.com/google/error-prone/blob/master/docs/bugpattern/GuardedBy.md" target="_blank" rel="noopener noreferrer">Google&#x27;s Error Prone analyzer</a>.
When lock annotations are present they make the analyzer&#x27;s life easier. It is possible to have a very effective race analysis without decreeing
that such annotations must be present. This was essential for our deployment,
since <em>requiring</em> lock annotations would have been a show stopper for converting
many thousands of lines of code to a concurrent context. We believe that this
finding should be transportable to new type systems and language designs, as
well as to other analyses for existing languages.</p><p>Another reaction to difficulties in static race detection has been to instead
develop dynamic analyses, automatic testing tools which work by running a
program to attempt to find flaws. Google&#x27;s Thread Sanitizer is a widely used and
mature tool in this area, which has been used in production to find many bugs in
C-family languages.
<a href="http://www.cs.columbia.edu/~junfeng/11fa-e6121/papers/thread-sanitizer.pdf" target="_blank" rel="noopener noreferrer">The Thread Sanitizer authors explicitly call out limitations with static race analyzers</a>
as part of their motivation: â€œIt seems unlikely that static detectors will work
effectively in our environment: Googleâ€™s code is large and complex enough that
it would be expensive to add the annotations required by a typical static
detectorâ€.</p><p>We have worked to limit the annotations that RacerD needs, for reasons similar
those expressed by the Thread Sanitizer authors. And we have sought to bring the
complementary benefits of static analysis â€” possibility of cheaper analysis and
fast reporting, and ability to analyze code before it is placed in a context to
run â€” to race detection. But we are interested as well in the future in
leveraging ideas in the dynamic techniques to improve or add to our analysis for
race detection.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="limitations">Limitations<a href="#limitations" class="hash-link" aria-label="Direct link to Limitations" title="Direct link to Limitations">â€‹</a></h2><p>There are a number of known limitations to the design of the race detector.</p><ul><li>It looks for races involving syntactically identical access paths, and misses
races due to aliasing</li><li>It misses races that arise from a locally declared object escaping its scope</li><li>It uses a boolean locks abstraction, and so misses races where two accesses
are mistakenly protected by different locks</li><li>It assumes a deep ownership model, which misses races where local objects
refer to or contain non-owned objects.</li><li>It avoids reasoning about weak memory and Java&#x27;s volatile keyword</li></ul><p>Most of these limitations are consistent with the design goal of reducing false
positives, even if they lead to false negatives. They also allow technical
tradeoffs which are different than if we were to favour reduction of false
negatives over false positives.</p><p>A different kind of limitation concerns the bugs searched for: Data races are
the most basic form of concurrency error, but there are many types of
concurrency issues out there that RacerD does not check for (but might in the
future). Examples include deadlock, atomicity, and check-then-act bugs (shown
below). You must look for these bugs yourself!</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">@ThreadSafe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class SynchronizedList&lt;T&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  synchronized boolean isEmpty() { ... }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  synchronized T add(T item) { ... }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// Not thread safe!!!</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class ListUtil&lt;T&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  public void addIfEmpty(SynchronizedList&lt;T&gt; list, T item) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if (list.isEmpty()) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      // In a race, another thread can add to the list here.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      list.add(item);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Finally, using <code>synchronized</code> blindly as a means to fix every unprotected write
or read is not always safe. Even with RacerD, finding, understanding, and fixing
concurrency issues is difficult. If you would like to learn more about best
practices, <a href="http://jcip.net/" target="_blank" rel="noopener noreferrer">Java Concurrency in Practice</a> is an excellent
resource.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="list-of-issue-types">List of Issue Types<a href="#list-of-issue-types" class="hash-link" aria-label="Direct link to List of Issue Types" title="Direct link to List of Issue Types">â€‹</a></h2><p>The following issue types are reported by this checker:</p><ul><li><a href="/docs/1.0.0/all-issue-types#guardedby_violation">GUARDEDBY_VIOLATION</a></li><li><a href="/docs/1.0.0/all-issue-types#interface_not_thread_safe">INTERFACE_NOT_THREAD_SAFE</a></li><li><a href="/docs/1.0.0/all-issue-types#lock_consistency_violation">LOCK_CONSISTENCY_VIOLATION</a></li><li><a href="/docs/1.0.0/all-issue-types#thread_safety_violation">THREAD_SAFETY_VIOLATION</a></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/1.0.0/checker-quandary"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Quandary</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/1.0.0/checker-resource-leak-lab"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Resource Leak Lab Exercise</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background" class="table-of-contents__link toc-highlight">Background</a></li><li><a href="#triggering-the-analysis" class="table-of-contents__link toc-highlight">Triggering the analysis</a></li><li><a href="#warnings" class="table-of-contents__link toc-highlight">Warnings</a><ul><li><a href="#unprotected-write" class="table-of-contents__link toc-highlight">Unprotected write</a></li><li><a href="#readwrite-race" class="table-of-contents__link toc-highlight">Read/Write Race</a></li><li><a href="#interface-not-thread-safe" class="table-of-contents__link toc-highlight">Interface not thread-safe</a></li></ul></li><li><a href="#annotations-to-help-racerd-understand-your-code" class="table-of-contents__link toc-highlight">Annotations to help RacerD understand your code</a><ul><li><a href="#threadconfined" class="table-of-contents__link toc-highlight"><code>@ThreadConfined</code></a></li><li><a href="#functional" class="table-of-contents__link toc-highlight"><code>@Functional</code></a></li><li><a href="#returnsownership" class="table-of-contents__link toc-highlight"><code>@ReturnsOwnership</code></a></li><li><a href="#visiblefortesting" class="table-of-contents__link toc-highlight"><code>@VisibleForTesting</code></a></li></ul></li><li><a href="#interprocedural-reasoning" class="table-of-contents__link toc-highlight">Interprocedural Reasoning</a></li><li><a href="#-context-and-selected-related-work" class="table-of-contents__link toc-highlight"><a name="context"></a> Context and Selected Related Work</a></li><li><a href="#limitations" class="table-of-contents__link toc-highlight">Limitations</a></li><li><a href="#list-of-issue-types" class="table-of-contents__link toc-highlight">List of Issue Types</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/infer-workflow">User Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/about-Infer">Foundations</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/all-issue-types">Bug Types Reference</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/absint-framework">Contribute</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/support">Support</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/infer" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/fbinfer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/inferstaticanalyzer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Facebook, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5d8d8b69.js"></script>
<script src="/assets/js/main.36c7571a.js"></script>
</body>
</html>