<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.2.0 docs-doc-page docs-doc-id-all-issue-types" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">List of all issue types | Infer</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://fbinfer.com/docs/all-issue-types"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.2.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.2.0"><meta data-rh="true" name="docsearch:version" content="1.2.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.2.0"><meta data-rh="true" property="og:title" content="List of all issue types | Infer"><meta data-rh="true" name="description" content="Here is an overview of the issue types currently reported by Infer."><meta data-rh="true" property="og:description" content="Here is an overview of the issue types currently reported by Infer."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://fbinfer.com/docs/all-issue-types"><link data-rh="true" rel="alternate" href="https://fbinfer.com/docs/all-issue-types" hreflang="en"><link data-rh="true" rel="alternate" href="https://fbinfer.com/docs/all-issue-types" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://WXX0LT0N1W-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"List of all issue types","item":"https://fbinfer.com/docs/all-issue-types"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Infer RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Infer Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6T8Z3855RZ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-6T8Z3855RZ",{anonymize_ip:!0})</script>



<link rel="search" type="application/opensearchdescription+xml" title="Infer" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.e7478e84.css">
<script src="/assets/js/runtime~main.9996d003.js" defer="defer"></script>
<script src="/assets/js/main.3090bd59.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="theme-announcement-bar announcementBar_mb4j" style="background-color:#20232a;color:#fff" role="banner"><div class="content_knG7 announcementBarContent_xLdY">Support Ukraine ðŸ‡ºðŸ‡¦ <a target="_blank" rel="noopener noreferrer" href="https://opensource.facebook.com/support-ukraine"> Help Provide Humanitarian Aid to Ukraine</a>.</div></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Infer Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.png" alt="Infer Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Infer</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/getting-started">Docs</a><a class="navbar__item navbar__link" href="/docs/support">Support</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://twitter.com/fbinfer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Twitter<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://www.facebook.com/inferstaticanalyzer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Facebook<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/facebook/infer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/getting-started">Quick Start</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/infer-workflow">User Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/all-checkers">Analyses and Issue Types</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/all-checkers">List of all checkers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/all-categories">List of all categories of issue types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/all-issue-types">List of all issue types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-annotation-reachability">Annotation Reachability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-biabduction">Biabduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-bufferoverrun">Buffer Overrun Analysis (InferBO)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-config-impact-analysis">Config Impact Analysis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-cost">Cost: Complexity Analysis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-datalog">Datalog-based points-to analysis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-fragment-retains-view">Fragment Retains View</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-impurity">Impurity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-inefficient-keyset-iterator">Inefficient keySet Iterator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-lineage">Lineage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-litho-required-props">Litho &quot;Required Props&quot;</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-liveness">Liveness</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-loop-hoisting">Loop Hoisting</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-parameter-not-null-checked">Parameter Not Null Checked</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-printf-args">`printf()` Argument Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-pulse">Pulse</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-purity">Purity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-quandary">Quandary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-racerd">RacerD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-resource-leak-lab">Resource Leak Lab Exercise</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-sil-validation">SIL validation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-siof">Static Initialization Order Fiasco</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-scope-leakage">Scope Leakage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-self-in-block">Self in Block</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-starvation">Starvation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/checker-topl">Topl</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/about-Infer">Foundations</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/absint-framework">Contribute</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/versions">Versions</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Analyses and Issue Types</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">List of all issue types</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.2.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>List of all issue types</h1></header><p>Here is an overview of the issue types currently reported by Infer.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="arbitrary_code_execution_under_lock">ARBITRARY_CODE_EXECUTION_UNDER_LOCK<a href="#arbitrary_code_execution_under_lock" class="hash-link" aria-label="Direct link to ARBITRARY_CODE_EXECUTION_UNDER_LOCK" title="Direct link to ARBITRARY_CODE_EXECUTION_UNDER_LOCK">â€‹</a></h2>
<p><em>Reported as &quot;Arbitrary Code Execution Under lock&quot; by <a href="/docs/checker-starvation">starvation</a>.</em></p>
<p>A call that may execute arbitrary code (such as registered, or chained, callbacks) is made while holding a lock.
This code may deadlock whenever the callbacks obtain locks themselves, so it is an unsafe pattern.</p>
<p>Example:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token class-name" style="color:rgb(255, 203, 107)">SettableFuture</span><span class="token plain"> future </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">callFutureSet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    future</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">set</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// synchronized means it&#x27;s taking a lock implicitly</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">synchronized</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">example_of_bad_pattern</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">callFutureSet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// &lt;- issue reported here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// If the call is made while holding multiple locks, the warning</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// will be issued only at the innermost lock acquisition. Here we</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// report in example_of_bad_pattern but we won&#x27;t report below.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">nested_bad_pattern_no_report</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Object</span><span class="token plain"> o</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">synchronized</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">o</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">example_of_bad_pattern</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// &lt;- no issue reported</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bad_arg">BAD_ARG<a href="#bad_arg" class="hash-link" aria-label="Direct link to BAD_ARG" title="Direct link to BAD_ARG">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Bad Arg&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>Bad arg in Erlang: Reports an error when the type of an argument is wrong or the argument is badly formed. Corresponds to the <code>badarg</code> error in the Erlang runtime.</p>
<p>For example, trying to concatenate the number <code>3</code> with  the list <code>[1,2]</code> gives <code>badarg</code> error because <code>3</code> is not a list.</p>
<div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">f() -&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    3 ++ [1,2]. // badarg error</span><br></span></code></pre></div></div>
<p>Note that although the first argument needs to be a list, the second argument may not be a list.
For instance, concatenating [1,2] with the number <code>3</code> raises no error in Erlang.</p>
<div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">g() -&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    [1,2] ++ 3. // no error. Result: [1,2|3]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bad_arg_latent">BAD_ARG_LATENT<a href="#bad_arg_latent" class="hash-link" aria-label="Direct link to BAD_ARG_LATENT" title="Direct link to BAD_ARG_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Bad Arg Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#bad_arg">BAD_ARG</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bad_generator">BAD_GENERATOR<a href="#bad_generator" class="hash-link" aria-label="Direct link to BAD_GENERATOR" title="Direct link to BAD_GENERATOR">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Bad Generator&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>Bad generator in Erlang: Reports an error when a wrong type is used in a generator. Corresponds to the <code>bad_generator</code> error in the Erlang runtime.</p>
<p>For example:</p>
<div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">list_instead_of_map() -&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    M = [],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    [{K, V} || K := V &lt;- M]</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bad_generator_latent">BAD_GENERATOR_LATENT<a href="#bad_generator_latent" class="hash-link" aria-label="Direct link to BAD_GENERATOR_LATENT" title="Direct link to BAD_GENERATOR_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Bad Generator Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#bad_generator">BAD_GENERATOR</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bad_key">BAD_KEY<a href="#bad_key" class="hash-link" aria-label="Direct link to BAD_KEY" title="Direct link to BAD_KEY">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Bad Key&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>Bad key in Erlang: Reports an error when trying to access or update a non-existing key in a map. Corresponds to the <code>{badkey,K}</code> error in the Erlang runtime.</p>
<p>For example, trying to update the key <code>2</code> in <code>M</code> gives <code>{badkey,2}</code> error because <code>2</code> is not present as a key in <code>M</code>.</p>
<div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">f() -&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    M = #{},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    M#{2 := 3}.</span><br></span></code></pre></div></div>
<p>Note that maps currently use a recency abstraction, meaning that only the most recent key/value is tracked.
Therefore, if a map is non-empty and we try to access a key other than the one we track, we just assume that it is there to avoid false positives.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bad_key_latent">BAD_KEY_LATENT<a href="#bad_key_latent" class="hash-link" aria-label="Direct link to BAD_KEY_LATENT" title="Direct link to BAD_KEY_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Bad Key Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#bad_key">BAD_KEY</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bad_map">BAD_MAP<a href="#bad_map" class="hash-link" aria-label="Direct link to BAD_MAP" title="Direct link to BAD_MAP">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Bad Map&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>Bad map in Erlang: Reports an error when trying to access or update a key for a term that is not a map. Corresponds to the <code>{badmap,...}</code> error in the Erlang runtime.</p>
<p>For example, trying to update <code>L</code> as if it was a map gives <code>{badmap,[1,2,3]}</code> error because <code>L</code> is actually a list (<code>[1,2,3]</code>).</p>
<div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">f() -&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    L = [1,2,3],</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    L#{1 =&gt; 2}.</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bad_map_latent">BAD_MAP_LATENT<a href="#bad_map_latent" class="hash-link" aria-label="Direct link to BAD_MAP_LATENT" title="Direct link to BAD_MAP_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Bad Map Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#bad_map">BAD_MAP</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bad_record">BAD_RECORD<a href="#bad_record" class="hash-link" aria-label="Direct link to BAD_RECORD" title="Direct link to BAD_RECORD">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Bad Record&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>Bad record in Erlang: Reports an error when trying to access or update a record with the wrong name. Corresponds to the <code>{badrecord,Name}</code> error in the Erlang runtime.</p>
<p>For example, accessing <code>R</code> as a <code>person</code> record gives <code>{badrecord,person}</code> error because <code>R</code> is <code>rabbit</code> (even though both share the <code>name</code> field).</p>
<div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">-record(person, {name, phone}).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-record(rabbit, {name, color}).</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">f() -&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    R = #rabbit{name = &quot;Bunny&quot;, color = &quot;Brown&quot;},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    R#person.name.</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bad_record_latent">BAD_RECORD_LATENT<a href="#bad_record_latent" class="hash-link" aria-label="Direct link to BAD_RECORD_LATENT" title="Direct link to BAD_RECORD_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Bad Record Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#bad_record">BAD_RECORD</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bad_return">BAD_RETURN<a href="#bad_return" class="hash-link" aria-label="Direct link to BAD_RETURN" title="Direct link to BAD_RETURN">â€‹</a></h2>
<p><em>Reported as &quot;Bad Return&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>Bad return in Erlang: The dynamic type of a returned value disagrees with the static type given in the spec.</p>
<p>For example, this function returns an integer, while the spec says it returns an atom.</p>
<div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">-spec f() -&gt; atom().</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">f() -&gt; 1.</span><br></span></code></pre></div></div>
<p>Note that this will <em>not</em> lead to a runtime error when running the Erlang program.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="bad_return_latent">BAD_RETURN_LATENT<a href="#bad_return_latent" class="hash-link" aria-label="Direct link to BAD_RETURN_LATENT" title="Direct link to BAD_RETURN_LATENT">â€‹</a></h2>
<p><em>Reported as &quot;Bad Return Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#bad_return">BAD_RETURN</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="biabduction_memory_leak">BIABDUCTION_MEMORY_LEAK<a href="#biabduction_memory_leak" class="hash-link" aria-label="Direct link to BIABDUCTION_MEMORY_LEAK" title="Direct link to BIABDUCTION_MEMORY_LEAK">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#resource-leak">Resource leak</a>. Reported as &quot;Memory Leak&quot; by <a href="/docs/checker-biabduction">biabduction</a>.</em></p>
<p>See <a href="#memory_leak_c">MEMORY_LEAK_C</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="biabduction_retain_cycle">BIABDUCTION_RETAIN_CYCLE<a href="#biabduction_retain_cycle" class="hash-link" aria-label="Direct link to BIABDUCTION_RETAIN_CYCLE" title="Direct link to BIABDUCTION_RETAIN_CYCLE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#resource-leak">Resource leak</a>. Reported as &quot;Retain Cycle&quot; by <a href="/docs/checker-biabduction">biabduction</a>.</em></p>
<p>See <a href="#retain_cycle">RETAIN_CYCLE</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="block_parameter_not_null_checked">BLOCK_PARAMETER_NOT_NULL_CHECKED<a href="#block_parameter_not_null_checked" class="hash-link" aria-label="Direct link to BLOCK_PARAMETER_NOT_NULL_CHECKED" title="Direct link to BLOCK_PARAMETER_NOT_NULL_CHECKED">â€‹</a></h2>
<p><em>Reported as &quot;Block Parameter Not Null Checked&quot; by <a href="/docs/checker-parameter-not-null-checked">parameter-not-null-checked</a>.</em></p>
<p>This error type is reported only in Objective-C/Objective-C++. It happens when a method has a block as a parameter,
and the block is executed in the method&#x27;s body without checking it for <code>nil</code> first. If a <code>nil</code> block is passed to
the method, then this will cause a crash. For example:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">uploadTaskWithRequest</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">NSURLRequest</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">urlRequest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                       fromFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">NSURL</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">fileURL</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                       delegate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">delegate</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  delegateQueue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">NSOperationQueue</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">delegateQueue</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     completion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">completion </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">completion</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p><strong>Action</strong>:
Possible solutions are adding a check for <code>nil</code>, or making sure that the method
is not ever called with <code>nil</code>. When an argument will never be <code>nil</code>, you can add
the annotation <code>nonnull</code> to the argument&#x27;s type, to tell Infer (and the type
system), that the argument won&#x27;t be <code>nil</code>. This will silence the warning.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buffer_overrun_l1">BUFFER_OVERRUN_L1<a href="#buffer_overrun_l1" class="hash-link" aria-label="Direct link to BUFFER_OVERRUN_L1" title="Direct link to BUFFER_OVERRUN_L1">â€‹</a></h2>
<p><em>Reported as &quot;Buffer Overrun L1&quot; by <a href="/docs/checker-bufferoverrun">bufferoverrun</a>.</em></p>
<p>This is reported when outside of buffer bound is accessed.  It can corrupt memory and may introduce
security issues in C/C++.</p>
<p>For example, <code>int a[3]; a[5] = 42;</code> generates a <code>BUFFER_OVERRUN_L1</code> on <code>a[5] = 42;</code>.</p>
<p>Buffer overrun reports fall into several &quot;buckets&quot; corresponding to the expected precision of the
report.  The higher the number, the more likely it is to be a false positive.</p>
<ul>
<li>
<p><code>L1</code>: The most faithful report, when it <em>must</em> be unsafe.  For example, array size: <code>[3,3]</code>,
offset: <code>[5,5]</code>.</p>
</li>
<li>
<p><code>L2</code>: Less faithful report than <code>L1</code>, when it <em>may</em> be unsafe.  For example, array size:<code>[3,3]</code>,
offset: <code>[0,5]</code>.  Note that the offset may be a safe value in the real execution, i.e. safe when
0, 1, or 2; unsafe when 3, 4, or 5.</p>
</li>
<li>
<p><code>L5</code>: The least faithful report, when there is an interval top.  For example, array size:
<code>[3,3]</code>, offset: <code>[-oo,+oo]</code>.</p>
</li>
<li>
<p><code>L4</code>: More faithful report than <code>L5</code>, when there is an infinity value.  For example, array size:
<code>[3,3]</code>, offset: <code>[0, +oo]</code>.</p>
</li>
<li>
<p><code>L3</code>: The reports that are not included in the above cases.</p>
</li>
<li>
<p><code>S2</code>: An array access is unsafe by symbolic values.  For example, array size: <code>[n,n]</code>, offset
<code>[n,+oo]</code>.</p>
</li>
<li>
<p><code>U5</code>: An array access is unsafe by unknown values, which are usually from unknown function
calls.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buffer_overrun_l2">BUFFER_OVERRUN_L2<a href="#buffer_overrun_l2" class="hash-link" aria-label="Direct link to BUFFER_OVERRUN_L2" title="Direct link to BUFFER_OVERRUN_L2">  â€‹</a></h2>
<p><em>Reported as &quot;Buffer Overrun L2&quot; by <a href="/docs/checker-bufferoverrun">bufferoverrun</a>.</em></p>
<p>See <a href="#buffer_overrun_l1">BUFFER_OVERRUN_L1</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buffer_overrun_l3">BUFFER_OVERRUN_L3<a href="#buffer_overrun_l3" class="hash-link" aria-label="Direct link to BUFFER_OVERRUN_L3" title="Direct link to BUFFER_OVERRUN_L3">â€‹</a></h2>
<p><em>Reported as &quot;Buffer Overrun L3&quot; by <a href="/docs/checker-bufferoverrun">bufferoverrun</a>.</em></p>
<p>See <a href="#buffer_overrun_l1">BUFFER_OVERRUN_L1</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buffer_overrun_l4">BUFFER_OVERRUN_L4<a href="#buffer_overrun_l4" class="hash-link" aria-label="Direct link to BUFFER_OVERRUN_L4" title="Direct link to BUFFER_OVERRUN_L4">â€‹</a></h2>
<p><em>Reported as &quot;Buffer Overrun L4&quot; by <a href="/docs/checker-bufferoverrun">bufferoverrun</a>.</em></p>
<p>See <a href="#buffer_overrun_l1">BUFFER_OVERRUN_L1</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buffer_overrun_l5">BUFFER_OVERRUN_L5<a href="#buffer_overrun_l5" class="hash-link" aria-label="Direct link to BUFFER_OVERRUN_L5" title="Direct link to BUFFER_OVERRUN_L5">â€‹</a></h2>
<p><em>Reported as &quot;Buffer Overrun L5&quot; by <a href="/docs/checker-bufferoverrun">bufferoverrun</a>.</em></p>
<p>See <a href="#buffer_overrun_l1">BUFFER_OVERRUN_L1</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buffer_overrun_s2">BUFFER_OVERRUN_S2<a href="#buffer_overrun_s2" class="hash-link" aria-label="Direct link to BUFFER_OVERRUN_S2" title="Direct link to BUFFER_OVERRUN_S2">â€‹</a></h2>
<p><em>Reported as &quot;Buffer Overrun S2&quot; by <a href="/docs/checker-bufferoverrun">bufferoverrun</a>.</em></p>
<p>See <a href="#buffer_overrun_l1">BUFFER_OVERRUN_L1</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="buffer_overrun_u5">BUFFER_OVERRUN_U5<a href="#buffer_overrun_u5" class="hash-link" aria-label="Direct link to BUFFER_OVERRUN_U5" title="Direct link to BUFFER_OVERRUN_U5">â€‹</a></h2>
<p><em>Reported as &quot;Buffer Overrun U5&quot; by <a href="/docs/checker-bufferoverrun">bufferoverrun</a>.</em></p>
<p>See <a href="#buffer_overrun_l1">BUFFER_OVERRUN_L1</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="captured_strong_self">CAPTURED_STRONG_SELF<a href="#captured_strong_self" class="hash-link" aria-label="Direct link to CAPTURED_STRONG_SELF" title="Direct link to CAPTURED_STRONG_SELF">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#resource-leak">Resource leak</a>. Reported as &quot;Captured strongSelf&quot; by <a href="/docs/checker-self-in-block">self-in-block</a>.</em></p>
<p>This check is about when a strong pointer to <code>self</code> is captured in a block.
This could lead to retain cycles or unexpected behavior since to avoid retain
cycles one usually uses a local strong pointer or a captured weak pointer instead.</p>
<p>This will happen in one of two cases generally:</p>
<ol>
<li>One uses <code>weakSelf</code> but forgot to declare it weak first.</li>
</ol>
<p>Example:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">__typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> weakSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token plain">my_block</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">BOOL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">BOOL isTapped</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    __strong </span><span class="token function" style="color:rgb(130, 170, 255)">__typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">weakSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> strongSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> weakSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> strongSelf</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<p><strong>Action:</strong> Replace the first line with <code>__weak __typeof(self) weakSelf = self;</code>.</p>
<ol start="2">
<li>
<p>One is using <code>strongSelf</code>, declared in a block, in another inner block.
The retain cycle is avoided in the outer block because <code>strongSelf</code> is a
local variable of the block. If <code>strongSelf</code> is used in the inner block,
then it&#x27;s not a local variable anymore, but a captured variable.</p>
<p>Example:</p>
</li>
</ol>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  __weak </span><span class="token function" style="color:rgb(130, 170, 255)">__typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> weakSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token plain">my_block</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    __strong </span><span class="token keyword" style="font-style:italic">typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> strongSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> weakSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">strongSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token plain">my_block</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> strongSelf</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<p>In this example, <code>strongSelf</code> is a captured variable of the inner block, and this could cause retain cycles.</p>
<p><strong>Action:</strong> Use a new pointer to self local to the inner block. In the example:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  __weak </span><span class="token function" style="color:rgb(130, 170, 255)">__typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> weakSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token plain">my_block</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    __strong </span><span class="token keyword" style="font-style:italic">typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> strongSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> weakSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">strongSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token plain">my_block</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         </span><span class="token function" style="color:rgb(130, 170, 255)">__typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> innerStrongSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> weakSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> innerStrongSelf</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<p>Or, to improve readability, move the inner block logic into a separate method.</p>
<p>Another solution could be to copy the instance variable that one needs to access inside the inner block to a local variable, and use the local variable instead:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  __weak </span><span class="token function" style="color:rgb(130, 170, 255)">__typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> weakSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token plain">my_block</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    __strong </span><span class="token keyword" style="font-style:italic">typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> strongSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> weakSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">strongSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> my_x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> strongSelf</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token plain">my_block</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> my_x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="checkers_allocates_memory">CHECKERS_ALLOCATES_MEMORY<a href="#checkers_allocates_memory" class="hash-link" aria-label="Direct link to CHECKERS_ALLOCATES_MEMORY" title="Direct link to CHECKERS_ALLOCATES_MEMORY">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Allocates Memory&quot; by <a href="/docs/checker-annotation-reachability">annotation-reachability</a>.</em></p>
<p>A method annotated with <code>@NoAllocation</code> transitively calls <code>new</code>.</p>
<p>Example:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">C</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">I</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@NoAllocation</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">directlyAllocatingMethod</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="checkers_annotation_reachability_error">CHECKERS_ANNOTATION_REACHABILITY_ERROR<a href="#checkers_annotation_reachability_error" class="hash-link" aria-label="Direct link to CHECKERS_ANNOTATION_REACHABILITY_ERROR" title="Direct link to CHECKERS_ANNOTATION_REACHABILITY_ERROR">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Annotation Reachability Error&quot; by <a href="/docs/checker-annotation-reachability">annotation-reachability</a>.</em></p>
<p>A method annotated with an annotation <code>@A</code> transitively calls a method annotated <code>@B</code> where the combination of annotations is forbidden (for example, <code>@UiThread</code> calling <code>@WorkerThread</code>).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="checkers_calls_expensive_method">CHECKERS_CALLS_EXPENSIVE_METHOD<a href="#checkers_calls_expensive_method" class="hash-link" aria-label="Direct link to CHECKERS_CALLS_EXPENSIVE_METHOD" title="Direct link to CHECKERS_CALLS_EXPENSIVE_METHOD">â€‹</a></h2>
<p><em>Reported as &quot;Expensive Method Called&quot; by <a href="/docs/checker-annotation-reachability">annotation-reachability</a>.</em></p>
<p>A method annotated with <code>@PerformanceCritical</code> transitively calls a method annotated <code>@Expensive</code>.</p>
<p>Example:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">C</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@PerformanceCritical</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">perfCritical</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">expensive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Expensive</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">expensive</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="checkers_expensive_overrides_unannotated">CHECKERS_EXPENSIVE_OVERRIDES_UNANNOTATED<a href="#checkers_expensive_overrides_unannotated" class="hash-link" aria-label="Direct link to CHECKERS_EXPENSIVE_OVERRIDES_UNANNOTATED" title="Direct link to CHECKERS_EXPENSIVE_OVERRIDES_UNANNOTATED">â€‹</a></h2>
<p><em>Reported as &quot;Expensive Overrides Unannotated&quot; by <a href="/docs/checker-annotation-reachability">annotation-reachability</a>.</em></p>
<p>A method annotated with <code>@Expensive</code> overrides an un-annotated method.</p>
<p>Example:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">I</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">A</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">I</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Expensive</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="checkers_fragment_retains_view">CHECKERS_FRAGMENT_RETAINS_VIEW<a href="#checkers_fragment_retains_view" class="hash-link" aria-label="Direct link to CHECKERS_FRAGMENT_RETAINS_VIEW" title="Direct link to CHECKERS_FRAGMENT_RETAINS_VIEW">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#resource-leak">Resource leak</a>. Reported as &quot;Fragment Retains View&quot; by <a href="/docs/checker-fragment-retains-view">fragment-retains-view</a>.</em></p>
<p>This error type is Android-specific. It fires when a <code>Fragment</code> type fails to
nullify one or more of its declared <code>View</code> fields in <code>onDestroyView</code>. In
performance-sensitive applications, a <code>Fragment</code> should initialize all <code>View</code>&#x27;s
in <code>onCreateView</code> and nullify them in <code>onDestroyView</code>. If a <code>Fragment</code> is placed
on the back stack and fails to nullify a <code>View</code> in <code>onDestroyView</code>, it will
retain a useless reference to that <code>View</code> that will not be cleaned up until the
<code>Fragment</code> is resumed or destroyed.</p>
<p>Action: Nullify the <code>View</code> in question in <code>onDestroyView</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="checkers_printf_args">CHECKERS_PRINTF_ARGS<a href="#checkers_printf_args" class="hash-link" aria-label="Direct link to CHECKERS_PRINTF_ARGS" title="Direct link to CHECKERS_PRINTF_ARGS">â€‹</a></h2>
<p><em>Reported as &quot;Printf Args&quot; by <a href="/docs/checker-printf-args">printf-args</a>.</em></p>
<p>This error is reported when the argument types to a <code>printf</code> method do not match the format string.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">stringInsteadOfInteger</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">PrintStream</span><span class="token plain"> out</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    out</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">printf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Hello %d&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;world&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>Action: fix the mismatch between format string and argument types.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="config_impact">CONFIG_IMPACT<a href="#config_impact" class="hash-link" aria-label="Direct link to CONFIG_IMPACT" title="Direct link to CONFIG_IMPACT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Config Impact&quot; by <a href="/docs/checker-config-impact-analysis">config-impact-analysis</a>.</em></p>
<p>Infer reports this issue when an <em>expensive</em> function is called without a <em>config check</em>.  The
<em>config</em> is usually a boolean value that enables experimental new features and it is defined per
application/codebase, e.g. gatekeepers.  To determine whether a function is expensive or not, the
checker relies on modeled functions that are assumed to be expensive, e.g. string operations,
regular expression match, or DB accesses.</p>
<p>Similar to <a href="/docs/checker-cost">Cost analysis</a>, this issue type is reported only in
differential mode, i.e. when there are original code and modified one and we can compare Infer&#x27;s
results on both of them.</p>
<p>For instance, if we have the following code</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// version1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">bar</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>which is then modified to next</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// version2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">config_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">bar</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token function" style="color:rgb(130, 170, 255)">goo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// added</span><br></span></code></pre></div></div>
<p>the analysis would warn the developer that &quot;<code>goo()</code> is a newly added function call and it might
cause an unexpected new behavior&quot;. However, if we were to add <code>goo()</code> right after <code>bar()</code>, then
Infer wouldn&#x27;t warn about it because it is already gated under the <code>config_check</code>.</p>
<p>The analysis is inter-procedural: it can reason about impacts by code changes not only inside a
single procedure, but also the impacts that are propagated by function calls. Thus, if we were to
modify <code>version1</code> to <code>version3</code> below by calling <code>goo()</code> in <code>foo()</code>,</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// version3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ....</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">goo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// added</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>then the analysis will report a <code>CONFIG_IMPACT</code> issue on the ungated call site of <code>foo()</code>.</p>
<p>Currently, the analysis supports both Objective-C and Java but not C++.</p>
<p>Action: Make sure the ungated code change is semantically correct and harmless in terms of execution
cost.  If you are not sure, gate it with a new or pre-existing config.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="config_impact_strict">CONFIG_IMPACT_STRICT<a href="#config_impact_strict" class="hash-link" aria-label="Direct link to CONFIG_IMPACT_STRICT" title="Direct link to CONFIG_IMPACT_STRICT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#ungated-code">Ungated code</a>. Reported as &quot;Config Impact Strict&quot; by <a href="/docs/checker-config-impact-analysis">config-impact-analysis</a>.</em></p>
<p>This is similar to <a href="#config_impact"><code>CONFIG_IMPACT</code> issue</a> but the analysis reports <strong>all</strong> ungated
codes irrespective of whether they are expensive or not.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="config_usage">CONFIG_USAGE<a href="#config_usage" class="hash-link" aria-label="Direct link to CONFIG_USAGE" title="Direct link to CONFIG_USAGE">â€‹</a></h2>
<p><em>Reported as &quot;Config Usage&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>Infer reports this issue when a <em>config</em> value is used as branch condition in a function.  The
<em>config</em> is usually a boolean value that enables experimental new features and it is defined per
application/codebase, e.g. gatekeepers.</p>
<p>For instance, if we have the following code</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">config_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;my_new_feature&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>then analysis would provide information that &quot;the function <code>foo</code> uses the config <code>my_new_feature</code> as
branch condition&quot;.</p>
<p>Note: This type of issue is only for providing semantic information, rather than warning or
reporting actual problem.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="constant_address_dereference">CONSTANT_ADDRESS_DEREFERENCE<a href="#constant_address_dereference" class="hash-link" aria-label="Direct link to CONSTANT_ADDRESS_DEREFERENCE" title="Direct link to CONSTANT_ADDRESS_DEREFERENCE">â€‹</a></h2>
<p><em>Reported as &quot;Constant Address Dereference&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>This is reported when an address at an absolute location, e.g. 1234,
is dereferenced. It is a more general version of the
<a href="#nullptr_dereference"><code>NULLPTR_DEREFERENCE</code></a> error type that is
reported when the address is a constant other than zero.</p>
<p>For example, <code>int *p = (int *) 123; *p = 42;</code> generates a <code>CONSTANT_ADDRESS_DEREFERENCE</code> on <code>*p = 42;</code>.</p>
<p>For more information see the <a href="#nullptr_dereference"><code>NULLPTR_DEREFERENCE</code></a> issue type.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="constant_address_dereference_latent">CONSTANT_ADDRESS_DEREFERENCE_LATENT<a href="#constant_address_dereference_latent" class="hash-link" aria-label="Direct link to CONSTANT_ADDRESS_DEREFERENCE_LATENT" title="Direct link to CONSTANT_ADDRESS_DEREFERENCE_LATENT">â€‹</a></h2>
<p><em>Reported as &quot;Constant Address Dereference Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#constant_address_dereference">CONSTANT_ADDRESS_DEREFERENCE</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="create_intent_from_uri">CREATE_INTENT_FROM_URI<a href="#create_intent_from_uri" class="hash-link" aria-label="Direct link to CREATE_INTENT_FROM_URI" title="Direct link to CREATE_INTENT_FROM_URI">â€‹</a></h2>
<p><em>Reported as &quot;Create Intent From Uri&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>Create an intent/start a component using a (possibly user-controlled) URI. may or may not be an issue depending on where the URI comes from.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cross_site_scripting">CROSS_SITE_SCRIPTING<a href="#cross_site_scripting" class="hash-link" aria-label="Direct link to CROSS_SITE_SCRIPTING" title="Direct link to CROSS_SITE_SCRIPTING">â€‹</a></h2>
<p><em>Reported as &quot;Cross Site Scripting&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>Untrusted data flows into HTML; XSS risk.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cxx_ref_captured_in_block">CXX_REF_CAPTURED_IN_BLOCK<a href="#cxx_ref_captured_in_block" class="hash-link" aria-label="Direct link to CXX_REF_CAPTURED_IN_BLOCK" title="Direct link to CXX_REF_CAPTURED_IN_BLOCK">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#memory-error">Memory error</a>. Reported as &quot;C++ Reference Captured in Block&quot; by <a href="/docs/checker-self-in-block">self-in-block</a>.</em></p>
<p>This check flags when a C++ reference is captured in an escaping block.
This means that the block will be leaving the current scope, i.e. it is
not annotated with <code>__attribute__((noescape))</code>.</p>
<p>Example:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">- (void)ref_captured_in_escaping_block_bad:(int&amp;)y {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  dispatch_async(dispatch_get_main_queue(), ^{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    int a = y;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ...;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>This could cause crashes because C++ references are not managed pointers
(like ARC pointers) and so the referent is likely to be gone if the block
dereferences it later.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dangling_pointer_dereference">DANGLING_POINTER_DEREFERENCE<a href="#dangling_pointer_dereference" class="hash-link" aria-label="Direct link to DANGLING_POINTER_DEREFERENCE" title="Direct link to DANGLING_POINTER_DEREFERENCE">â€‹</a></h2>
<p><em>Reported as &quot;Dangling Pointer Dereference&quot; by <a href="/docs/checker-biabduction">biabduction</a>.</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="datalog_fact">DATALOG_FACT<a href="#datalog_fact" class="hash-link" aria-label="Direct link to DATALOG_FACT" title="Direct link to DATALOG_FACT">â€‹</a></h2>
<p><em>Reported as &quot;Datalog Fact&quot; by <a href="/docs/checker-datalog">datalog</a>.</em></p>
<p>Datalog fact used as input for a datalog solver.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="data_flow_to_sink">DATA_FLOW_TO_SINK<a href="#data_flow_to_sink" class="hash-link" aria-label="Direct link to DATA_FLOW_TO_SINK" title="Direct link to DATA_FLOW_TO_SINK">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#sensitive-data-flow">Sensitive data flow</a>. Reported as &quot;Data Flow to Sink&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A flow of data was detected to a sink.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deadlock">DEADLOCK<a href="#deadlock" class="hash-link" aria-label="Direct link to DEADLOCK" title="Direct link to DEADLOCK">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#concurrency">Concurrency</a>. Reported as &quot;Deadlock&quot; by <a href="/docs/checker-starvation">starvation</a>.</em></p>
<p>This error is currently reported in Java. A deadlock occurs when two distinct
threads try to acquire two locks in reverse orders. The following code
illustrates a textbook example. Of course, in real deadlocks, the lock
acquisitions may be separated by deeply nested call chains.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">lockAThenB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">synchronized</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">lockA</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">synchronized</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">lockB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// do something with both resources</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">lockBThenA</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">synchronized</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">lockB</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">synchronized</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">lockA</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// do something with both resources</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>The standard solution to a deadlock is to fix an order of lock acquisition and
adhere to that order in all cases. Another solution may be to shrink the
critical sections (i.e., the code executing under lock) to the minimum required.</p>
<p>Old-style containers such as <code>Vector</code> are synchronized on the object monitor,
which means that deadlocks can occur even without explicit synchronisation on
both threads. For instance:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">lockAThenAddToVector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">synchronized</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">lockA</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      vector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">lockVectorThenA</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">synchronized</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">vector</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">synchronized</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">lockA</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// do something with both resources</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>Infer has support for detecting these deadlocks too.</p>
<p>To suppress reports of deadlocks in a method <code>m()</code> use the
<code>@SuppressLint(&quot;DEADLOCK&quot;)</code> annotation, as follows:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token import namespace" style="color:rgb(178, 204, 214)">android</span><span class="token import namespace punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import namespace" style="color:rgb(178, 204, 214)">annotation</span><span class="token import namespace punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import class-name" style="color:rgb(255, 203, 107)">SuppressLint</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@SuppressLint</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;DEADLOCK&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">m</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dead_store">DEAD_STORE<a href="#dead_store" class="hash-link" aria-label="Direct link to DEAD_STORE" title="Direct link to DEAD_STORE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#logic-error">Logic error</a>. Reported as &quot;Dead Store&quot; by <a href="/docs/checker-liveness">liveness</a>.</em></p>
<p>This error is reported in C++. It fires when the value assigned to a variables
is never used (e.g., <code>int i = 1; i = 2; return i;</code>).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="divide_by_zero">DIVIDE_BY_ZERO<a href="#divide_by_zero" class="hash-link" aria-label="Direct link to DIVIDE_BY_ZERO" title="Direct link to DIVIDE_BY_ZERO">â€‹</a></h2>
<p><em>Reported as &quot;Divide By Zero&quot; by <a href="/docs/checker-biabduction">biabduction</a>.</em></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="empty_vector_access">EMPTY_VECTOR_ACCESS<a href="#empty_vector_access" class="hash-link" aria-label="Direct link to EMPTY_VECTOR_ACCESS" title="Direct link to EMPTY_VECTOR_ACCESS">â€‹</a></h2>
<p><em>Reported as &quot;Empty Vector Access&quot; by <a href="/docs/checker-biabduction">biabduction</a>.</em></p>
<p>This error type is reported only in C++, in versions &gt;= C++11.</p>
<p>The code is trying to access an element of a vector that Infer believes to be
empty. Such an access will cause undefined behavior at runtime.</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;vector&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">vector</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> vec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> vec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Empty vector access reported here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="execution_time_complexity_increase">EXECUTION_TIME_COMPLEXITY_INCREASE<a href="#execution_time_complexity_increase" class="hash-link" aria-label="Direct link to EXECUTION_TIME_COMPLEXITY_INCREASE" title="Direct link to EXECUTION_TIME_COMPLEXITY_INCREASE">â€‹</a></h2>
<p><em>Reported as &quot;Execution Time Complexity Increase&quot; by <a href="/docs/checker-cost">cost</a>.</em></p>
<p>Infer reports this issue when the execution time complexity of a
program increases in degree: e.g. from constant to linear or from
logarithmic to quadratic. This issue type is only reported in
differential mode: i.e when we are comparing the cost analysis results of
two runs of infer on a file. Check out examples in <a href="/docs/checker-cost#examples-execution-cost">here</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="execution_time_complexity_increase_ui_thread">EXECUTION_TIME_COMPLEXITY_INCREASE_UI_THREAD<a href="#execution_time_complexity_increase_ui_thread" class="hash-link" aria-label="Direct link to EXECUTION_TIME_COMPLEXITY_INCREASE_UI_THREAD" title="Direct link to EXECUTION_TIME_COMPLEXITY_INCREASE_UI_THREAD">â€‹</a></h2>
<p><em>Reported as &quot;Execution Time Complexity Increase Ui Thread&quot; by <a href="/docs/checker-cost">cost</a>.</em></p>
<p>Infer reports this issue when the execution time complexity of the procedure increases in degree <strong>and</strong> the procedure runs on the UI (main) thread.</p>
<p>Infer considers a method as running on the UI thread whenever:</p>
<ul>
<li>The method, one of its overrides, its class, or an ancestral class, is
annotated with <code>@UiThread</code>.</li>
<li>The method, or one of its overrides is annotated with <code>@OnEvent</code>, <code>@OnClick</code>,
etc.</li>
<li>The method or its callees call a <code>Litho.ThreadUtils</code> method such as
<code>assertMainThread</code>.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="execution_time_unreachable_at_exit">EXECUTION_TIME_UNREACHABLE_AT_EXIT<a href="#execution_time_unreachable_at_exit" class="hash-link" aria-label="Direct link to EXECUTION_TIME_UNREACHABLE_AT_EXIT" title="Direct link to EXECUTION_TIME_UNREACHABLE_AT_EXIT">â€‹</a></h2>
<p><em>Reported as &quot;Execution Time Unreachable At Exit&quot; by <a href="/docs/checker-cost">cost</a>.</em></p>
<p>This issue type indicates that the program&#x27;s execution doesn&#x27;t reach
the exit node (where our analysis computes the final cost of the
procedure). Hence, we cannot compute a static bound for the procedure.</p>
<p>Examples:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">exit_unreachable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">exit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// modeled as unreachable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">infeasible_path_unreachable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">Preconditions</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">checkState</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// like assert false, state pruned to bottom</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="expensive_execution_time">EXPENSIVE_EXECUTION_TIME<a href="#expensive_execution_time" class="hash-link" aria-label="Direct link to EXPENSIVE_EXECUTION_TIME" title="Direct link to EXPENSIVE_EXECUTION_TIME">â€‹</a></h2>
<p><em>Reported as &quot;Expensive Execution Time&quot; by <a href="/docs/checker-cost">cost</a>.</em></p>
<p>[EXPERIMENTAL] This warning indicates that the procedure has non-constant and non-top execution cost. By default, this issue type is disabled. To enable it, set <code>enabled=true</code> in <a href="https://github.com/facebook/infer/blob/main/infer/src/base/costKind.ml#L55" target="_blank" rel="noopener noreferrer">costKind.ml</a>.</p>
<p>For instance, a simple example where we report this issue is a function with linear cost:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">sum_linear</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">ArrayList</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">Integer</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> list</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> sum </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Integer</span><span class="token plain"> el</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> list</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   sum </span><span class="token operator" style="color:rgb(137, 221, 255)">+=</span><span class="token plain"> el</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> sum</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="expensive_loop_invariant_call">EXPENSIVE_LOOP_INVARIANT_CALL<a href="#expensive_loop_invariant_call" class="hash-link" aria-label="Direct link to EXPENSIVE_LOOP_INVARIANT_CALL" title="Direct link to EXPENSIVE_LOOP_INVARIANT_CALL">â€‹</a></h2>
<p><em>Reported as &quot;Expensive Loop Invariant Call&quot; by <a href="/docs/checker-loop-hoisting">loop-hoisting</a>.</em></p>
<p>We report this issue type when a function is <a href="/docs/all-issue-types#invariant_call">loop-invariant</a> and also expensive (i.e. at least has linear complexity as determined by the <a href="/docs/checker-cost">cost</a> analysis).</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">incr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// incr will not be hoisted since it is cheap(constant time)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo_linear</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">incr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// constant call, don&#x27;t hoist</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// call to foo_linear will be hoisted since it is expensive(linear in size).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">symbolic_expensive_hoist</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">foo_linear</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// hoist</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="exposed_insecure_intent_handling">EXPOSED_INSECURE_INTENT_HANDLING<a href="#exposed_insecure_intent_handling" class="hash-link" aria-label="Direct link to EXPOSED_INSECURE_INTENT_HANDLING" title="Direct link to EXPOSED_INSECURE_INTENT_HANDLING">â€‹</a></h2>
<p><em>Reported as &quot;Exposed Insecure Intent Handling&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>Undocumented.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="guardedby_violation">GUARDEDBY_VIOLATION<a href="#guardedby_violation" class="hash-link" aria-label="Direct link to GUARDEDBY_VIOLATION" title="Direct link to GUARDEDBY_VIOLATION">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#concurrency">Concurrency</a>. Reported as &quot;GuardedBy Violation&quot; by <a href="/docs/checker-racerd">racerd</a>.</em></p>
<p>A field annotated with <code>@GuardedBy</code> is being accessed by a call-chain that starts at a non-private method without synchronization.</p>
<p>Example:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">C</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@GuardedBy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;this&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token class-name" style="color:rgb(255, 203, 107)">String</span><span class="token plain"> f</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">String</span><span class="token plain"> s</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    f </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> s</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// unprotected access here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>Action: Protect the offending access by acquiring the lock indicated by the <code>@GuardedBy(...)</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="impure_function">IMPURE_FUNCTION<a href="#impure_function" class="hash-link" aria-label="Direct link to IMPURE_FUNCTION" title="Direct link to IMPURE_FUNCTION">â€‹</a></h2>
<p><em>Reported as &quot;Impure Function&quot; by <a href="/docs/checker-impurity">impurity</a>.</em></p>
<p>This issue type indicates impure functions. For instance, below functions would be marked as impure:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">makeAllZero_impure</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">ArrayList</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">Foo</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> list</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token class-name" style="color:rgb(255, 203, 107)">Iterator</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">Foo</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> listIterator </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> list</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">iterator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">listIterator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">hasNext</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">Foo</span><span class="token plain"> foo </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> listIterator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">next</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="inefficient_keyset_iterator">INEFFICIENT_KEYSET_ITERATOR<a href="#inefficient_keyset_iterator" class="hash-link" aria-label="Direct link to INEFFICIENT_KEYSET_ITERATOR" title="Direct link to INEFFICIENT_KEYSET_ITERATOR">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Inefficient Keyset Iterator&quot; by <a href="/docs/checker-inefficient-keyset-iterator">inefficient-keyset-iterator</a>.</em></p>
<p>This issue is raised when</p>
<ul>
<li>iterating over a HashMap with <code>keySet()</code> iterator</li>
<li>looking up the key each time</li>
</ul>
<p>Example:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">inefficient_loop_bad</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">HashMap</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">String</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(255, 203, 107)">Integer</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> testMap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">String</span><span class="token plain"> key </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> testMap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">keySet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token class-name" style="color:rgb(255, 203, 107)">Integer</span><span class="token plain"> value </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> testMap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// extra look-up cost</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p><strong>Action</strong>:</p>
<p>Instead, it is more efficient to iterate over the loop with <code>entrySet</code> which returns key-vaue pairs and gets rid of the hashMap lookup.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">efficient_loop_ok</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">HashMap</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">String</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(255, 203, 107)">Integer</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> testMap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Map</span><span class="token class-name punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token class-name" style="color:rgb(255, 203, 107)">Entry</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">String</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:rgb(255, 203, 107)">Integer</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> entry </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> testMap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">entrySet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">String</span><span class="token plain"> key </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> entry</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">Integer</span><span class="token plain"> value </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> entry</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getValue</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="inferbo_alloc_is_big">INFERBO_ALLOC_IS_BIG<a href="#inferbo_alloc_is_big" class="hash-link" aria-label="Direct link to INFERBO_ALLOC_IS_BIG" title="Direct link to INFERBO_ALLOC_IS_BIG">â€‹</a></h2>
<p><em>Reported as &quot;Alloc Is Big&quot; by <a href="/docs/checker-bufferoverrun">bufferoverrun</a>.</em></p>
<p><code>malloc</code> is passed a large constant value (&gt;=10^6). For example, <code>int n = 1000000; malloc(n);</code> generates <code>INFERBO_ALLOC_IS_BIG</code> on <code>malloc(n)</code>.</p>
<p>Action: Fix the size argument or make sure it is really needed.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="inferbo_alloc_is_negative">INFERBO_ALLOC_IS_NEGATIVE<a href="#inferbo_alloc_is_negative" class="hash-link" aria-label="Direct link to INFERBO_ALLOC_IS_NEGATIVE" title="Direct link to INFERBO_ALLOC_IS_NEGATIVE">â€‹</a></h2>
<p><em>Reported as &quot;Alloc Is Negative&quot; by <a href="/docs/checker-bufferoverrun">bufferoverrun</a>.</em></p>
<p><code>malloc</code> is called with a negative size. For example, <code>int n = 3 - 5; malloc(n);</code> generates <code>INFERBO_ALLOC_IS_NEGATIVE</code> on <code>malloc(n)</code>.</p>
<p>Action: Fix the size argument.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="inferbo_alloc_is_zero">INFERBO_ALLOC_IS_ZERO<a href="#inferbo_alloc_is_zero" class="hash-link" aria-label="Direct link to INFERBO_ALLOC_IS_ZERO" title="Direct link to INFERBO_ALLOC_IS_ZERO">â€‹</a></h2>
<p><em>Reported as &quot;Alloc Is Zero&quot; by <a href="/docs/checker-bufferoverrun">bufferoverrun</a>.</em></p>
<p><code>malloc</code> is called with a zero size. For example, <code>int n = 3 - 3; malloc(n);</code> generates <code>INFERBO_ALLOC_IS_ZERO</code> on <code>malloc(n)</code>.</p>
<p>Action: Fix the size argument.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="inferbo_alloc_may_be_big">INFERBO_ALLOC_MAY_BE_BIG<a href="#inferbo_alloc_may_be_big" class="hash-link" aria-label="Direct link to INFERBO_ALLOC_MAY_BE_BIG" title="Direct link to INFERBO_ALLOC_MAY_BE_BIG">â€‹</a></h2>
<p><em>Reported as &quot;Alloc May Be Big&quot; by <a href="/docs/checker-bufferoverrun">bufferoverrun</a>.</em></p>
<p><code>malloc</code> <em>may</em> be called with a large value. For example, <code>int n = b ? 3 : 1000000; malloc(n);</code> generates <code>INFERBO_ALLOC_MAY_BE_BIG</code> on <code>malloc(n)</code>.</p>
<p>Action: Fix the size argument or add a bound checking, e.g. <code>if (n &lt; A_SMALL_NUMBER) { malloc(n); }</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="inferbo_alloc_may_be_negative">INFERBO_ALLOC_MAY_BE_NEGATIVE<a href="#inferbo_alloc_may_be_negative" class="hash-link" aria-label="Direct link to INFERBO_ALLOC_MAY_BE_NEGATIVE" title="Direct link to INFERBO_ALLOC_MAY_BE_NEGATIVE">â€‹</a></h2>
<p><em>Reported as &quot;Alloc May Be Negative&quot; by <a href="/docs/checker-bufferoverrun">bufferoverrun</a>.</em></p>
<p><code>malloc</code> <em>may</em> be called with a negative value. For example, <code>int n = b ? 3 : -5; malloc(n);</code> generates <code>INFERBO_ALLOC_MAY_BE_NEGATIVE</code> on <code>malloc(n)</code>.</p>
<p>Action: Fix the size argument or add a bound checking, e.g. <code>if (n &gt; 0) { malloc(n); }</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="infinite_execution_time">INFINITE_EXECUTION_TIME<a href="#infinite_execution_time" class="hash-link" aria-label="Direct link to INFINITE_EXECUTION_TIME" title="Direct link to INFINITE_EXECUTION_TIME">â€‹</a></h2>
<p><em>Reported as &quot;Infinite Execution Time&quot; by <a href="/docs/checker-cost">cost</a>.</em></p>
<p>This warning indicates that Infer was not able to determine a static
upper bound on the execution cost of the procedure. By default, this
issue type is disabled.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-1-t-due-to-expressivity">Example 1: T due to expressivity<a href="#example-1-t-due-to-expressivity" class="hash-link" aria-label="Direct link to Example 1: T due to expressivity" title="Direct link to Example 1: T due to expressivity">â€‹</a></h3>
<p>For instance, Inferbo&#x27;s interval analysis is limited to affine
expressions. Hence, we can&#x27;t statically estimate an upper bound on the
below example and obtain T(unknown) cost:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Expected: square root(x), got T</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">square_root_FP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token keyword" style="font-style:italic">while</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">i </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   i</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-2-t-due-to-unmodeled-calls">Example 2: T due to unmodeled calls<a href="#example-2-t-due-to-unmodeled-calls" class="hash-link" aria-label="Direct link to Example 2: T due to unmodeled calls" title="Direct link to Example 2: T due to unmodeled calls">â€‹</a></h3>
<p>Another common case where we get T cost is when Infer cannot statically determine the range of values for loop bounds. For instance,</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">loop_over_charArray_FP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">StringBuilder</span><span class="token plain"> builder</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">String</span><span class="token plain"> input</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Character</span><span class="token plain"> c </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> input</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">toCharArray</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>Here, Infer does not have any InferBo models for the range of values returned by <code>String.toCharArray</code>, hence it cannot determine that we will be iterating over a char array in the size of <code>input</code> string.</p>
<p>To teach InferBo about such library calls, they should be semantically modeled in <a href="https://github.com/facebook/infer/blob/main/infer/src/bufferoverrun/bufferOverrunModels.ml" target="_blank" rel="noopener noreferrer">InferBo</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-3-t-due-to-calling-another-t-costed-function">Example 3: T due to calling another T-costed function<a href="#example-3-t-due-to-calling-another-t-costed-function" class="hash-link" aria-label="Direct link to Example 3: T due to calling another T-costed function" title="Direct link to Example 3: T due to calling another T-costed function">â€‹</a></h3>
<p>Since the analysis is inter-procedural, another example we can have T cost is if at least one of the callees has T cost.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Expected: constant, got T</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">call_top_cost_FP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">square_root_FP</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// square_root_FP has Top cost</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="insecure_intent_handling">INSECURE_INTENT_HANDLING<a href="#insecure_intent_handling" class="hash-link" aria-label="Direct link to INSECURE_INTENT_HANDLING" title="Direct link to INSECURE_INTENT_HANDLING">â€‹</a></h2>
<p><em>Reported as &quot;Insecure Intent Handling&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>Undocumented.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="integer_overflow_l1">INTEGER_OVERFLOW_L1<a href="#integer_overflow_l1" class="hash-link" aria-label="Direct link to INTEGER_OVERFLOW_L1" title="Direct link to INTEGER_OVERFLOW_L1">â€‹</a></h2>
<p><em>Reported as &quot;Integer Overflow L1&quot; by <a href="/docs/checker-bufferoverrun">bufferoverrun</a>.</em></p>
<p>This is reported when integer overflow occurred by integer operations such as addition, subtraction,
and multiplication. For example, <code>int n = INT_MAX; int m = n + 3;</code> generates a INTEGER_OVERFLOW_L1
on <code>n + 3</code>.</p>
<p>Integer overflows reports fall into several &quot;buckets&quot; corresponding to the expected precision of the
report. The higher the number, the more likely it is to be a false positive.</p>
<ul>
<li>
<p><code>L1</code>: The most faithful report, when it <em>must</em> be unsafe.  For example,
<code>[2147483647,2147483647] + [1,1]</code> in 32-bit signed integer type.</p>
</li>
<li>
<p><code>L2</code>: Less faithful report than <code>L1</code>, when it <em>may</em> be unsafe.  For example,
<code>[2147483647,2147483647] + [0,1]</code> in 32-bit signed integer type.  Note that the integer of RHS
can be 0, which is safe.</p>
</li>
<li>
<p><code>L5</code>: The reports that are not included in the above cases.</p>
</li>
<li>
<p><code>U5</code>: A binary integer operation is unsafe by unknown values, which are usually from unknown
function calls.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="integer_overflow_l2">INTEGER_OVERFLOW_L2<a href="#integer_overflow_l2" class="hash-link" aria-label="Direct link to INTEGER_OVERFLOW_L2" title="Direct link to INTEGER_OVERFLOW_L2">â€‹</a></h2>
<p><em>Reported as &quot;Integer Overflow L2&quot; by <a href="/docs/checker-bufferoverrun">bufferoverrun</a>.</em></p>
<p>See <a href="#integer_overflow_l1">INTEGER_OVERFLOW_L1</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="integer_overflow_l5">INTEGER_OVERFLOW_L5<a href="#integer_overflow_l5" class="hash-link" aria-label="Direct link to INTEGER_OVERFLOW_L5" title="Direct link to INTEGER_OVERFLOW_L5">â€‹</a></h2>
<p><em>Reported as &quot;Integer Overflow L5&quot; by <a href="/docs/checker-bufferoverrun">bufferoverrun</a>.</em></p>
<p>See <a href="#integer_overflow_l1">INTEGER_OVERFLOW_L1</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="integer_overflow_u5">INTEGER_OVERFLOW_U5<a href="#integer_overflow_u5" class="hash-link" aria-label="Direct link to INTEGER_OVERFLOW_U5" title="Direct link to INTEGER_OVERFLOW_U5">â€‹</a></h2>
<p><em>Reported as &quot;Integer Overflow U5&quot; by <a href="/docs/checker-bufferoverrun">bufferoverrun</a>.</em></p>
<p>See <a href="#integer_overflow_l1">INTEGER_OVERFLOW_L1</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="interface_not_thread_safe">INTERFACE_NOT_THREAD_SAFE<a href="#interface_not_thread_safe" class="hash-link" aria-label="Direct link to INTERFACE_NOT_THREAD_SAFE" title="Direct link to INTERFACE_NOT_THREAD_SAFE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#concurrency">Concurrency</a>. Reported as &quot;Interface Not Thread Safe&quot; by <a href="/docs/checker-racerd">racerd</a>.</em></p>
<p>This error indicates that you have invoked an interface method not annotated
with <code>@ThreadSafe</code> from a thread-safe context (e.g., code that uses locks or is
marked <code>@ThreadSafe</code>). The fix is to add the <code>@ThreadSafe</code> annotation to the
interface or to the interface method. For background on why these annotations
are needed, see the detailed explanation
<a href="/docs/checker-racerd#interface-not-thread-safe">here</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="invalid_sil">INVALID_SIL<a href="#invalid_sil" class="hash-link" aria-label="Direct link to INVALID_SIL" title="Direct link to INVALID_SIL">â€‹</a></h2>
<p><em>Reported as &quot;Invalid Sil&quot; by <a href="/docs/checker-sil-validation">sil-validation</a>.</em></p>
<p>The SIL instruction does not conform to the expected subset of instructions
expected for the front-end of the language for the analyzed code.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="invariant_call">INVARIANT_CALL<a href="#invariant_call" class="hash-link" aria-label="Direct link to INVARIANT_CALL" title="Direct link to INVARIANT_CALL">â€‹</a></h2>
<p><em>Reported as &quot;Invariant Call&quot; by <a href="/docs/checker-loop-hoisting">loop-hoisting</a>.</em></p>
<p>We report this issue type when a function call is loop-invariant and hoistable, i.e.</p>
<ul>
<li>the function has no side side effects (pure)</li>
<li>has invariant arguments and result (i.e. have the same value in all loop iterations)</li>
<li>it is guaranteed to execute, i.e. it dominates all loop sources</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">invariant_hoist</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">10</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> y </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">5</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain"> size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> i</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// hoistable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ipc_on_ui_thread">IPC_ON_UI_THREAD<a href="#ipc_on_ui_thread" class="hash-link" aria-label="Direct link to IPC_ON_UI_THREAD" title="Direct link to IPC_ON_UI_THREAD">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Ipc On Ui Thread&quot; by <a href="/docs/checker-starvation">starvation</a>.</em></p>
<p>A blocking <code>Binder</code> IPC call occurs on the UI thread.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="javascript_injection">JAVASCRIPT_INJECTION<a href="#javascript_injection" class="hash-link" aria-label="Direct link to JAVASCRIPT_INJECTION" title="Direct link to JAVASCRIPT_INJECTION">â€‹</a></h2>
<p><em>Reported as &quot;Javascript Injection&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>Untrusted data flows into JavaScript.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lab_resource_leak">LAB_RESOURCE_LEAK<a href="#lab_resource_leak" class="hash-link" aria-label="Direct link to LAB_RESOURCE_LEAK" title="Direct link to LAB_RESOURCE_LEAK">â€‹</a></h2>
<p><em>Reported as &quot;Lab Resource Leak&quot; by <a href="/docs/checker-resource-leak-lab">resource-leak-lab</a>.</em></p>
<p>Toy issue.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lockless_violation">LOCKLESS_VIOLATION<a href="#lockless_violation" class="hash-link" aria-label="Direct link to LOCKLESS_VIOLATION" title="Direct link to LOCKLESS_VIOLATION">â€‹</a></h2>
<p><em>Reported as &quot;Lockless Violation&quot; by <a href="/docs/checker-starvation">starvation</a>.</em></p>
<p>A method implements an interface signature annotated with <code>@Lockless</code> but which transitively acquires a lock.</p>
<p>Example:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token class-name" style="color:rgb(255, 203, 107)">Interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">I</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Lockless</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">no_lock</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">C</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">I</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">private</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">synchronized</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">do_lock</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">no_lock</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// this method should not acquire any locks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">do_lock</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lock_consistency_violation">LOCK_CONSISTENCY_VIOLATION<a href="#lock_consistency_violation" class="hash-link" aria-label="Direct link to LOCK_CONSISTENCY_VIOLATION" title="Direct link to LOCK_CONSISTENCY_VIOLATION">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#concurrency">Concurrency</a>. Reported as &quot;Lock Consistency Violation&quot; by <a href="/docs/checker-racerd">racerd</a>.</em></p>
<p>This is an error reported on C++ and Objective C classes whenever:</p>
<ul>
<li>Some class method directly uses locking primitives (not transitively).</li>
<li>It has a public method which writes to some member <code>x</code> while holding a lock.</li>
<li>It has a public method which reads <code>x</code> without holding a lock.</li>
</ul>
<p>The above may happen through a chain of calls. Above, <code>x</code> may also be a
container (an array, a vector, etc).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fixing-lock-consistency-violation-reports">Fixing Lock Consistency Violation reports<a href="#fixing-lock-consistency-violation-reports" class="hash-link" aria-label="Direct link to Fixing Lock Consistency Violation reports" title="Direct link to Fixing Lock Consistency Violation reports">â€‹</a></h3>
<ul>
<li>Avoid the offending access (most often the read). Of course, this may not be
possible.</li>
<li>Use synchronization to protect the read, by using the same lock protecting the
corresponding write.</li>
<li>Make the method doing the read access private. This should silence the
warning, since Infer looks for a pair of non-private methods. Objective-C:
Infer considers a method as private if it&#x27;s not exported in the header-file
interface.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="logging_private_data">LOGGING_PRIVATE_DATA<a href="#logging_private_data" class="hash-link" aria-label="Direct link to LOGGING_PRIVATE_DATA" title="Direct link to LOGGING_PRIVATE_DATA">â€‹</a></h2>
<p><em>Reported as &quot;Logging Private Data&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>Undocumented.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="memory_leak_c">MEMORY_LEAK_C<a href="#memory_leak_c" class="hash-link" aria-label="Direct link to MEMORY_LEAK_C" title="Direct link to MEMORY_LEAK_C">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#resource-leak">Resource leak</a>. Reported as &quot;Memory Leak&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="memory-leak-in-c">Memory leak in C<a href="#memory-leak-in-c" class="hash-link" aria-label="Direct link to Memory leak in C" title="Direct link to Memory leak in C">â€‹</a></h3>
<p>This error type is only reported in C and Objective-C code. In Java we do not
report memory leaks because it is a garbage collected language.</p>
<p>In C, Infer reports memory leaks when objects are created with <code>malloc</code> and not
freed. For example:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> memory_leak_bug </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Person</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">p </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">malloc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">sizeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Person</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="memory-leak-in-objective-c">Memory leak in Objective-C<a href="#memory-leak-in-objective-c" class="hash-link" aria-label="Direct link to Memory leak in Objective-C" title="Direct link to Memory leak in Objective-C">â€‹</a></h3>
<p>Additionally, in Objective-C, Infer reports memory leaks that happen when
objects from Core Foundation or Core Graphics don&#x27;t get released.</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> memory_leak_bug_cf </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    CGPathRef shadowPath </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">CGPathCreateWithRect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">inputView</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">bounds</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token constant" style="color:rgb(130, 170, 255)">NULL</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//object created and not released.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="memory_leak_cpp">MEMORY_LEAK_CPP<a href="#memory_leak_cpp" class="hash-link" aria-label="Direct link to MEMORY_LEAK_CPP" title="Direct link to MEMORY_LEAK_CPP">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#resource-leak">Resource leak</a>. Reported as &quot;Memory Leak&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>See <a href="#memory_leak_c">MEMORY_LEAK_C</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="missing_required_prop">MISSING_REQUIRED_PROP<a href="#missing_required_prop" class="hash-link" aria-label="Direct link to MISSING_REQUIRED_PROP" title="Direct link to MISSING_REQUIRED_PROP">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Missing Required Prop&quot; by <a href="/docs/checker-litho-required-props">litho-required-props</a>.</em></p>
<p>This issues is reported when a required <code>@Prop</code> is missing.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a href="#examples" class="hash-link" aria-label="Direct link to Examples" title="Direct link to Examples">â€‹</a></h2>
<p>Assume that the following Litho Component specification is defined as follows where <code>prop1</code> is optional and <code>prop2</code> is required.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">MyComponentSpec</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">onCreate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token class-name" style="color:rgb(255, 203, 107)">ComponentContext</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Prop</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">optional </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">String</span><span class="token plain"> prop1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Prop</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> prop2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>When we build the corresponding component, we should have all the required props. If we are missing optional props (e..g <code>prop1</code> below), it is ok.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token class-name" style="color:rgb(255, 203, 107)">MyComponent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">prop2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<p>However, if we are missing a required prop, Infer gives an error below for the missing <code>prop2</code>.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token class-name" style="color:rgb(255, 203, 107)">MyComponent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">prop1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;My prop 1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<p>** Action **</p>
<p>There are two ways to fix this issue.</p>
<p>First, we could add the missing <code>prop2</code>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token class-name" style="color:rgb(255, 203, 107)">MyComponent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">prop1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;My prop 1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">prop2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// where x is some integer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">build</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<p>or alternatively, if the <code>prop2</code> is not really required, we could change the component spec to reflect that:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">MyComponentSpec</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">onCreate</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token class-name" style="color:rgb(255, 203, 107)">ComponentContext</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Prop</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">optional </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">String</span><span class="token plain"> prop1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Prop</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">optional </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> prop2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mixed_self_weakself">MIXED_SELF_WEAKSELF<a href="#mixed_self_weakself" class="hash-link" aria-label="Direct link to MIXED_SELF_WEAKSELF" title="Direct link to MIXED_SELF_WEAKSELF">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#resource-leak">Resource leak</a>. Reported as &quot;Mixed Self WeakSelf&quot; by <a href="/docs/checker-self-in-block">self-in-block</a>.</em></p>
<p>This check reports an issue when an Objective-C block captures both <code>self</code> and <code>weakSelf</code>, a weak pointer to <code>self</code>.
Possibly the developer meant to capture only <code>weakSelf</code> to avoid a retain cycle, but made a typo and used <code>self</code>
instead of <code>strongSelf</code>. In this case, this could cause a retain cycle.</p>
<p>Example:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  __weak </span><span class="token function" style="color:rgb(130, 170, 255)">__typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> weakSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token plain">my_block</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    __strong </span><span class="token function" style="color:rgb(130, 170, 255)">__typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">weakSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> strongSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> weakSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">strongSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">strongSelf foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">self</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// typo here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<p><strong>Action</strong>: Fixing the typo is generally the right course of action.</p>
<p><em>Limitations:</em> To keep this check simple and intra-procedural, we rely on names to find <code>weakSelf</code>:
we assume that any captured weak pointer whose name contains &quot;self&quot; is a weak reference to <code>self</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="modifies_immutable">MODIFIES_IMMUTABLE<a href="#modifies_immutable" class="hash-link" aria-label="Direct link to MODIFIES_IMMUTABLE" title="Direct link to MODIFIES_IMMUTABLE">â€‹</a></h2>
<p><em>Reported as &quot;Modifies Immutable&quot; by <a href="/docs/checker-impurity">impurity</a>.</em></p>
<p>This issue type indicates modifications to fields marked as @Immutable. For instance, below function <code>mutateArray</code> would be marked as modifying immutable field <code>testArray</code>:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Immutable</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> testArray </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getTestArray</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> testArray</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain">                </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mutateArray</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> array </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getTestArray</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="multiple_weakself">MULTIPLE_WEAKSELF<a href="#multiple_weakself" class="hash-link" aria-label="Direct link to MULTIPLE_WEAKSELF" title="Direct link to MULTIPLE_WEAKSELF">â€‹</a></h2>
<p><em>Reported as &quot;Multiple WeakSelf Use&quot; by <a href="/docs/checker-self-in-block">self-in-block</a>.</em></p>
<p>This check reports when an Objective-C block uses <code>weakSelf</code> (a weak pointer to <code>self</code>) more than once.
This could lead to unexpected behaviour. Even if <code>weakSelf</code> is not nil in the first use, it could be nil
in the following uses since the object that <code>weakSelf</code> points to could be freed anytime.</p>
<p>Example:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  __weak </span><span class="token function" style="color:rgb(130, 170, 255)">__typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> weakSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token plain">my_block</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">weakSelf foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> weakSelf</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<p><strong>Action:</strong>
One should assign <code>weakSelf</code> to a strong pointer first, and then
use it in the block.</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  __weak </span><span class="token function" style="color:rgb(130, 170, 255)">__typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> weakSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token plain">my_block</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    __strong </span><span class="token function" style="color:rgb(130, 170, 255)">__typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">weakSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> strongSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> weakSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">strongSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">strongSelf foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> strongSelf</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<p><em>Limitations:</em> To keep this check simple and intra-procedural, we rely on names to find <code>weakSelf</code>:
we assume that any captured weak pointer whose name contains &quot;self&quot; is a weak reference to <code>self</code>.
In contrast, <code>strongSelf</code> is a local variable to the block, so the check supports any name given to
a local strong pointer that has been assigned <code>weakSelf</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mutual_recursion_cycle">MUTUAL_RECURSION_CYCLE<a href="#mutual_recursion_cycle" class="hash-link" aria-label="Direct link to MUTUAL_RECURSION_CYCLE" title="Direct link to MUTUAL_RECURSION_CYCLE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Mutual Recursion Cycle&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A recursive call or mutually recursive call has been detected. This does <em>not</em> mean that the program won&#x27;t terminate, just that the code is recursive. You should double-check if the recursion is intended and if it can lead to non-termination or a stack overflow.</p>
<p>Example of recursive function:</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">factorial</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">factorial</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">else</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nil_block_call">NIL_BLOCK_CALL<a href="#nil_block_call" class="hash-link" aria-label="Direct link to NIL_BLOCK_CALL" title="Direct link to NIL_BLOCK_CALL">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#null-pointer-dereference">Null pointer dereference</a>. Reported as &quot;Nil Block Call&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>This check reports when one tries to call an Objective-C block that is <code>nil</code>.
This causes a crash.</p>
<p>Example:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">callback </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token function" style="color:rgb(130, 170, 255)">callback</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> bar </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token keyword" style="font-style:italic">self</span><span class="token plain"> foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">nil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//crash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p><strong>Action</strong>:</p>
<p>Adding a check for <code>nil</code> before calling the block, or making sure never to call the method <code>foo:</code> with <code>nil</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nil_block_call_latent">NIL_BLOCK_CALL_LATENT<a href="#nil_block_call_latent" class="hash-link" aria-label="Direct link to NIL_BLOCK_CALL_LATENT" title="Direct link to NIL_BLOCK_CALL_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#null-pointer-dereference">Null pointer dereference</a>. Reported as &quot;Nil Block Call Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#nil_block_call">NIL_BLOCK_CALL</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nil_insertion_into_collection">NIL_INSERTION_INTO_COLLECTION<a href="#nil_insertion_into_collection" class="hash-link" aria-label="Direct link to NIL_INSERTION_INTO_COLLECTION" title="Direct link to NIL_INSERTION_INTO_COLLECTION">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Nil Insertion Into Collection&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>This checks reports when <code>nil</code> is passed to collections in Objective-C such as arrays and dictionaries. This causes a crash.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="arrays">Arrays<a href="#arrays" class="hash-link" aria-label="Direct link to Arrays" title="Direct link to Arrays">â€‹</a></h3>
<p>Adding objects to an array, inserting objects at a given index, or replacing objects at a given index, can all
lead to a crash when the object is <code>nil</code>.</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">mArray addObject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">nil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//crash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">mArray insertObject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">nil atIndex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//crash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">mArray replaceObjectAtIndex</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token plain"> withObject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">nil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//crash</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="dictionaries">Dictionaries<a href="#dictionaries" class="hash-link" aria-label="Direct link to Dictionaries" title="Direct link to Dictionaries">â€‹</a></h3>
<p>Adding a <code>nil</code> value in a dictionary causes a crash. If the concept of <code>nil</code> is required, one can add
<code>[NSNull null]</code> instead.</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  id value </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> nil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">mDict setObject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">value forKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token string" style="color:rgb(195, 232, 141)">@&quot;somestring&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//crash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">mDict setObject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">NSNull null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> forKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token string" style="color:rgb(195, 232, 141)">@&quot;somestring&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//ok</span><br></span></code></pre></div></div>
<p>Retrieving or removing an object from a dictionary with a <code>nil</code> key also causes a crash:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    id key </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> nil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    mDict</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">key</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">@&quot;somestring&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//crash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">mDict removeObjectForKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">nil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//crash</span><br></span></code></pre></div></div>
<p><strong>Action</strong>:</p>
<p>In all the cases above, when passing <code>nil</code> causes a crash, the solutions are either making sure
that the object passed will never be <code>nil</code>, or adding a check for <code>nil</code> before calling those methods.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nil_insertion_into_collection_latent">NIL_INSERTION_INTO_COLLECTION_LATENT<a href="#nil_insertion_into_collection_latent" class="hash-link" aria-label="Direct link to NIL_INSERTION_INTO_COLLECTION_LATENT" title="Direct link to NIL_INSERTION_INTO_COLLECTION_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Nil Insertion Into Collection&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#nil_insertion_into_collection">NIL_INSERTION_INTO_COLLECTION</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nil_messaging_to_non_pod">NIL_MESSAGING_TO_NON_POD<a href="#nil_messaging_to_non_pod" class="hash-link" aria-label="Direct link to NIL_MESSAGING_TO_NON_POD" title="Direct link to NIL_MESSAGING_TO_NON_POD">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#memory-error">Memory error</a>. Reported as &quot;Nil Messaging To Non Pod&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>In Objective-C, calling a method on <code>nil</code> (or in Objective-C terms, sending a message to <code>nil</code>) does not crash,
it simply returns a falsy value (nil/0/false). However, sending a message that returns
a non-POD C++ type (POD being <a href="https://en.cppreference.com/w/cpp/named_req/PODType" target="_blank" rel="noopener noreferrer">&quot;Plain Old Data&quot;</a>, essentially
anything that cannot be compiled as a C-style struct) to <code>nil</code> causes undefined behaviour.</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">std</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">callMethodReturnsnonPOD</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SomeObject</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> obj </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getObjectOrNil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  std</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> d </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">obj returnsnonPOD</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// UB</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> d</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>To fix the above issue, we need to check if <code>obj</code> is
not <code>nil</code> before calling the <code>returnsnonPOD</code> method:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">std</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">callMethodReturnsnonPOD</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">bool b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SomeObject</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> obj </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getObjectOrNil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">b</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">obj </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> nil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> std</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">make_shared</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  std</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> d </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">obj returnsnonPOD</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> d</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nil_messaging_to_non_pod_latent">NIL_MESSAGING_TO_NON_POD_LATENT<a href="#nil_messaging_to_non_pod_latent" class="hash-link" aria-label="Direct link to NIL_MESSAGING_TO_NON_POD_LATENT" title="Direct link to NIL_MESSAGING_TO_NON_POD_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#memory-error">Memory error</a>. Reported as &quot;Nil Messaging To Non Pod Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#nil_messaging_to_non_pod">NIL_MESSAGING_TO_NON_POD</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="no_matching_branch_in_try">NO_MATCHING_BRANCH_IN_TRY<a href="#no_matching_branch_in_try" class="hash-link" aria-label="Direct link to NO_MATCHING_BRANCH_IN_TRY" title="Direct link to NO_MATCHING_BRANCH_IN_TRY">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;No Matching Branch In Try&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>No matching branch is found when evaluating the <code>of</code> section of a <code>try</code> expression. Corresponds to the <code>{try_clause,V}</code> error in the Erlang runtime.</p>
<p>For example, if we call <code>tail([])</code> and the full definition of <code>tail</code> is</p>
<div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">tail(X) -&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    try X of</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        [_|T] -&gt; {ok,T}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    catch</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        _ -&gt; error</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    end.</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="no_matching_branch_in_try_latent">NO_MATCHING_BRANCH_IN_TRY_LATENT<a href="#no_matching_branch_in_try_latent" class="hash-link" aria-label="Direct link to NO_MATCHING_BRANCH_IN_TRY_LATENT" title="Direct link to NO_MATCHING_BRANCH_IN_TRY_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;No Matching Branch In Try Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#no_matching_branch_in_try">NO_MATCHING_BRANCH_IN_TRY</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="no_matching_case_clause">NO_MATCHING_CASE_CLAUSE<a href="#no_matching_case_clause" class="hash-link" aria-label="Direct link to NO_MATCHING_CASE_CLAUSE" title="Direct link to NO_MATCHING_CASE_CLAUSE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;No Matching Case Clause&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>No matching case clause in Erlang: Reports an error when none of the clauses of a <code>case</code> match the expression. Corresponds to the <code>{case_clause,V}</code> error in the Erlang runtime.</p>
<p>For example, if we call <code>tail([])</code> and the full definition of <code>tail</code> is</p>
<div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">tail(X) -&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    case X of</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        [_|T] -&gt; T</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    end.</span><br></span></code></pre></div></div>
<p>This error is reported if either the pattern(s) or the guard(s) prevent matching any of the clauses.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="no_matching_case_clause_latent">NO_MATCHING_CASE_CLAUSE_LATENT<a href="#no_matching_case_clause_latent" class="hash-link" aria-label="Direct link to NO_MATCHING_CASE_CLAUSE_LATENT" title="Direct link to NO_MATCHING_CASE_CLAUSE_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;No Matching Case Clause Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#no_matching_case_clause">NO_MATCHING_CASE_CLAUSE</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="no_matching_else_clause">NO_MATCHING_ELSE_CLAUSE<a href="#no_matching_else_clause" class="hash-link" aria-label="Direct link to NO_MATCHING_ELSE_CLAUSE" title="Direct link to NO_MATCHING_ELSE_CLAUSE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;No Matching Else Clause&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>No matching else clause in Erlang: Reports an error when none of the clauses of an <code>else</code> match the short-circuit result from <code>maybe</code> body. Corresponds to the <code>{else_clause,V}</code> error in the Erlang runtime.</p>
<p>For example, here the <code>1 ?= 2</code> expression does not match and short-circuits to <code>2</code>, which does not match the single clause under <code>else</code>:</p>
<div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">else_clause_error() -&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    maybe</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        1 ?= 2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    else</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        1 -&gt; ok</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    end.</span><br></span></code></pre></div></div>
<p>This error is reported if either the pattern(s) or the guard(s) prevent matching any of the clauses.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="no_matching_else_clause_latent">NO_MATCHING_ELSE_CLAUSE_LATENT<a href="#no_matching_else_clause_latent" class="hash-link" aria-label="Direct link to NO_MATCHING_ELSE_CLAUSE_LATENT" title="Direct link to NO_MATCHING_ELSE_CLAUSE_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;No Matching Else Clause Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#no_matching_else_clause">NO_MATCHING_ELSE_CLAUSE</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="no_matching_function_clause">NO_MATCHING_FUNCTION_CLAUSE<a href="#no_matching_function_clause" class="hash-link" aria-label="Direct link to NO_MATCHING_FUNCTION_CLAUSE" title="Direct link to NO_MATCHING_FUNCTION_CLAUSE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;No Matching Function Clause&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>No matching function clause in Erlang: Reports an error when none of the clauses of a function match the arguments of a call. Corresponds to the <code>function_clause</code> error in the Erlang runtime.</p>
<p>For example, if we call <code>tail([])</code> and the full definition of <code>tail</code> is</p>
<div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">tail([_|Xs]) -&gt; Xs.</span><br></span></code></pre></div></div>
<p>This error is reported if either the pattern(s) or the guard(s) prevent matching any of the clauses.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="no_matching_function_clause_latent">NO_MATCHING_FUNCTION_CLAUSE_LATENT<a href="#no_matching_function_clause_latent" class="hash-link" aria-label="Direct link to NO_MATCHING_FUNCTION_CLAUSE_LATENT" title="Direct link to NO_MATCHING_FUNCTION_CLAUSE_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;No Matching Function Clause Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#no_matching_function_clause">NO_MATCHING_FUNCTION_CLAUSE</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="no_match_of_rhs">NO_MATCH_OF_RHS<a href="#no_match_of_rhs" class="hash-link" aria-label="Direct link to NO_MATCH_OF_RHS" title="Direct link to NO_MATCH_OF_RHS">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;No Match Of Rhs&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>No match of right hand side value in Erlang: Reports an error when the right hand side value of a <code>match</code> expression does not match the pattern on the left hand side. Corresponds to the <code>{badmatch,V}</code> error in the Erlang runtime.</p>
<p>For example, <code>[H|T] = []</code> gives the error because the left hand side pattern requires at least one element in the list on the right hand side.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="no_match_of_rhs_latent">NO_MATCH_OF_RHS_LATENT<a href="#no_match_of_rhs_latent" class="hash-link" aria-label="Direct link to NO_MATCH_OF_RHS_LATENT" title="Direct link to NO_MATCH_OF_RHS_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;No Match Of Rhs Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#no_match_of_rhs">NO_MATCH_OF_RHS</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="no_true_branch_in_if">NO_TRUE_BRANCH_IN_IF<a href="#no_true_branch_in_if" class="hash-link" aria-label="Direct link to NO_TRUE_BRANCH_IN_IF" title="Direct link to NO_TRUE_BRANCH_IN_IF">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;No True Branch In If&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>No true branch when evaluating an if expression in Erlang: Reports an error when none of the branches of an <code>if</code> expression evaluate to true. Corresponds to the <code>if_clause</code> error in the Erlang runtime.</p>
<p>For example, if we call <code>sign(0)</code> and the full definition of <code>sign</code> is</p>
<div class="language-erlang codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-erlang codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sign(X) -&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    if</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        X &gt; 0 -&gt; positive;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        X &lt; 0 -&gt; negative</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    end.</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="no_true_branch_in_if_latent">NO_TRUE_BRANCH_IN_IF_LATENT<a href="#no_true_branch_in_if_latent" class="hash-link" aria-label="Direct link to NO_TRUE_BRANCH_IN_IF_LATENT" title="Direct link to NO_TRUE_BRANCH_IN_IF_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;No True Branch In If Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#no_true_branch_in_if">NO_TRUE_BRANCH_IN_IF</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nullptr_dereference">NULLPTR_DEREFERENCE<a href="#nullptr_dereference" class="hash-link" aria-label="Direct link to NULLPTR_DEREFERENCE" title="Direct link to NULLPTR_DEREFERENCE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#null-pointer-dereference">Null pointer dereference</a>. Reported as &quot;Null Dereference&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>Infer reports null dereference bugs in Java, C, C++, and Objective-C
when it is possible that the null pointer is dereferenced, leading to
a crash.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="null-dereference-in-java">Null dereference in Java<a href="#null-dereference-in-java" class="hash-link" aria-label="Direct link to Null dereference in Java" title="Direct link to Null dereference in Java">â€‹</a></h3>
<p>Many of Infer&#x27;s reports of potential Null Pointer Exceptions (NPE) come from code of the form</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  p </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// foo() might return null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">stuff</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">goo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// dereferencing p, potential NPE</span><br></span></code></pre></div></div>
<p>If you see code of this form, then you have several options.</p>
<p><strong>If you are unsure whether or not <code>foo()</code> will return null</strong>, you should
ideally either</p>
<ol>
<li>
<p>Change the code to ensure that <code>foo()</code> can not return null, or</p>
</li>
<li>
<p>Add a check that <code>p</code> is not <code>null</code> before dereferencing <code>p</code>.</p>
</li>
</ol>
<p>Sometimes, in case (2) it is not obvious what you should do when <code>p</code>
is <code>null</code>. One possibility is to throw an exception, failing early but
explicitly. This can be done using <code>checkNotNull</code> as in the following
code:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// code idiom for failing early</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token import static namespace" style="color:rgb(178, 204, 214)">com</span><span class="token import static namespace punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import static namespace" style="color:rgb(178, 204, 214)">google</span><span class="token import static namespace punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import static namespace" style="color:rgb(178, 204, 214)">common</span><span class="token import static namespace punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import static namespace" style="color:rgb(178, 204, 214)">base</span><span class="token import static namespace punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import static class-name" style="color:rgb(255, 203, 107)">Preconditions</span><span class="token import static punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import static">checkNotNull</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//... intervening code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  p </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">checkNotNull</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// foo() might return null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">stuff</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">goo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// p cannot be null here</span><br></span></code></pre></div></div>
<p>The call <code>checkNotNull(foo())</code> will never return <code>null</code>: if <code>foo()</code>
returns <code>null</code> then it fails early by throwing a Null Pointer
Exception.</p>
<p>Facebook NOTE: <strong>If you are absolutely sure that foo() will not be
null</strong>, then if you land your diff this case will no longer be
reported after your diff makes it to trunk.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="null-dereference-in-c">Null dereference in C<a href="#null-dereference-in-c" class="hash-link" aria-label="Direct link to Null dereference in C" title="Direct link to Null dereference in C">â€‹</a></h3>
<p>Here is an example of an inter-procedural null dereference bug in C:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Person</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> height</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> weight</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">get_age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Person</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">who</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> who</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">null_pointer_interproc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Person</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">joe </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">get_age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">joe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="null-dereference-in-objective-c">Null dereference in Objective-C<a href="#null-dereference-in-objective-c" class="hash-link" aria-label="Direct link to Null dereference in Objective-C" title="Direct link to Null dereference in Objective-C">â€‹</a></h3>
<p>In Objective-C, null dereferences are less common than in Java, but they still
happen and their cause can be hidden. In general, passing a message to nil does
not cause a crash and returns <code>nil</code>, but dereferencing a pointer directly does
cause a crash.</p>
<p>Example:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">C</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> param </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// passing nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  D</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> d </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">param bar</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// nil message passing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> d</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">fld</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// crash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> callFoo </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  C</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> c </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token keyword" style="font-style:italic">self</span><span class="token plain"> bar</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// returns nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">              </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// crash reported here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p><strong>Action</strong>:
Adding a <code>nil</code> check either for <code>param</code> above or for <code>d</code>, or making sure that <code>foo:</code> will never
be called with <code>nil</code>.</p>
<p>Calling a <code>nil</code> block will also cause a crash.
We have a dedicated issue type for this case: <a href="/docs/all-issue-types#nil_block_call">Nil Block Call</a>.</p>
<p>Moreover, inserting <code>nil</code> into a collection will cause a crash as well. We
also have a dedicated issue type for this case:
<a href="/docs/all-issue-types#nil_insertion_into_collection">Nil Insertion Into Collection</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nullptr_dereference_in_nullsafe_class">NULLPTR_DEREFERENCE_IN_NULLSAFE_CLASS<a href="#nullptr_dereference_in_nullsafe_class" class="hash-link" aria-label="Direct link to NULLPTR_DEREFERENCE_IN_NULLSAFE_CLASS" title="Direct link to NULLPTR_DEREFERENCE_IN_NULLSAFE_CLASS">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#null-pointer-dereference">Null pointer dereference</a>. Reported as &quot;Null Dereference&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>Infer reports null dereference bugs in Java, C, C++, and Objective-C
when it is possible that the null pointer is dereferenced, leading to
a crash.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="null-dereference-in-java-1">Null dereference in Java<a href="#null-dereference-in-java-1" class="hash-link" aria-label="Direct link to Null dereference in Java" title="Direct link to Null dereference in Java">â€‹</a></h3>
<p>Many of Infer&#x27;s reports of potential Null Pointer Exceptions (NPE) come from code of the form</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  p </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// foo() might return null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">stuff</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">goo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// dereferencing p, potential NPE</span><br></span></code></pre></div></div>
<p>If you see code of this form, then you have several options.</p>
<p><strong>If you are unsure whether or not <code>foo()</code> will return null</strong>, you should
ideally either</p>
<ol>
<li>
<p>Change the code to ensure that <code>foo()</code> can not return null, or</p>
</li>
<li>
<p>Add a check that <code>p</code> is not <code>null</code> before dereferencing <code>p</code>.</p>
</li>
</ol>
<p>Sometimes, in case (2) it is not obvious what you should do when <code>p</code>
is <code>null</code>. One possibility is to throw an exception, failing early but
explicitly. This can be done using <code>checkNotNull</code> as in the following
code:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// code idiom for failing early</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token import static namespace" style="color:rgb(178, 204, 214)">com</span><span class="token import static namespace punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import static namespace" style="color:rgb(178, 204, 214)">google</span><span class="token import static namespace punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import static namespace" style="color:rgb(178, 204, 214)">common</span><span class="token import static namespace punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import static namespace" style="color:rgb(178, 204, 214)">base</span><span class="token import static namespace punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import static class-name" style="color:rgb(255, 203, 107)">Preconditions</span><span class="token import static punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import static">checkNotNull</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//... intervening code</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  p </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">checkNotNull</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// foo() might return null</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">stuff</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">goo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// p cannot be null here</span><br></span></code></pre></div></div>
<p>The call <code>checkNotNull(foo())</code> will never return <code>null</code>: if <code>foo()</code>
returns <code>null</code> then it fails early by throwing a Null Pointer
Exception.</p>
<p>Facebook NOTE: <strong>If you are absolutely sure that foo() will not be
null</strong>, then if you land your diff this case will no longer be
reported after your diff makes it to trunk.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="null-dereference-in-c-1">Null dereference in C<a href="#null-dereference-in-c-1" class="hash-link" aria-label="Direct link to Null dereference in C" title="Direct link to Null dereference in C">â€‹</a></h3>
<p>Here is an example of an inter-procedural null dereference bug in C:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Person</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> height</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> weight</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">get_age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Person</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">who</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> who</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">null_pointer_interproc</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Person</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">joe </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">get_age</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">joe</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="null-dereference-in-objective-c-1">Null dereference in Objective-C<a href="#null-dereference-in-objective-c-1" class="hash-link" aria-label="Direct link to Null dereference in Objective-C" title="Direct link to Null dereference in Objective-C">â€‹</a></h3>
<p>In Objective-C, null dereferences are less common than in Java, but they still
happen and their cause can be hidden. In general, passing a message to nil does
not cause a crash and returns <code>nil</code>, but dereferencing a pointer directly does
cause a crash.</p>
<p>Example:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">C</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> param </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// passing nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  D</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> d </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">param bar</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// nil message passing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> d</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">fld</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// crash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> callFoo </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  C</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> c </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token keyword" style="font-style:italic">self</span><span class="token plain"> bar</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// returns nil</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">              </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// crash reported here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p><strong>Action</strong>:
Adding a <code>nil</code> check either for <code>param</code> above or for <code>d</code>, or making sure that <code>foo:</code> will never
be called with <code>nil</code>.</p>
<p>Calling a <code>nil</code> block will also cause a crash.
We have a dedicated issue type for this case: <a href="/docs/all-issue-types#nil_block_call">Nil Block Call</a>.</p>
<p>Moreover, inserting <code>nil</code> into a collection will cause a crash as well. We
also have a dedicated issue type for this case:
<a href="/docs/all-issue-types#nil_insertion_into_collection">Nil Insertion Into Collection</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nullptr_dereference_in_nullsafe_class_latent">NULLPTR_DEREFERENCE_IN_NULLSAFE_CLASS_LATENT<a href="#nullptr_dereference_in_nullsafe_class_latent" class="hash-link" aria-label="Direct link to NULLPTR_DEREFERENCE_IN_NULLSAFE_CLASS_LATENT" title="Direct link to NULLPTR_DEREFERENCE_IN_NULLSAFE_CLASS_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#null-pointer-dereference">Null pointer dereference</a>. Reported as &quot;Null Dereference&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#nullptr_dereference_in_nullsafe_class">NULLPTR_DEREFERENCE_IN_NULLSAFE_CLASS</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nullptr_dereference_latent">NULLPTR_DEREFERENCE_LATENT<a href="#nullptr_dereference_latent" class="hash-link" aria-label="Direct link to NULLPTR_DEREFERENCE_LATENT" title="Direct link to NULLPTR_DEREFERENCE_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#null-pointer-dereference">Null pointer dereference</a>. Reported as &quot;Null Dereference&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#nullptr_dereference">NULLPTR_DEREFERENCE</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="null_argument">NULL_ARGUMENT<a href="#null_argument" class="hash-link" aria-label="Direct link to NULL_ARGUMENT" title="Direct link to NULL_ARGUMENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Null Argument&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<div class="language-objc codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objc codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">This issue type indicates `nil` being passed as argument where a non</span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token plain">nil value expected</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">import</span><span class="token macro property"> </span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token macro property expression">Foundation</span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">/</span><span class="token macro property expression">Foundation</span><span class="token macro property expression punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token macro property expression">h</span><span class="token macro property expression operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Test (non-nil) returned values of NSString methods against `nil`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">NSString</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">stringNotNil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">NSString</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">!</span><span class="token plain">str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ERROR: NSString:stringWithString: expects a non-nil value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">	</span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">NSString stringWithString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">nil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="null_argument_latent">NULL_ARGUMENT_LATENT<a href="#null_argument_latent" class="hash-link" aria-label="Direct link to NULL_ARGUMENT_LATENT" title="Direct link to NULL_ARGUMENT_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Null Argument Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#null_argument">NULL_ARGUMENT</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="null_dereference">NULL_DEREFERENCE<a href="#null_dereference" class="hash-link" aria-label="Direct link to NULL_DEREFERENCE" title="Direct link to NULL_DEREFERENCE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#null-pointer-dereference">Null pointer dereference</a>. Reported as &quot;Null Dereference&quot; by <a href="/docs/checker-biabduction">biabduction</a>.</em></p>
<p>See <a href="#nullptr_dereference">NULLPTR_DEREFERENCE</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optional_empty_access">OPTIONAL_EMPTY_ACCESS<a href="#optional_empty_access" class="hash-link" aria-label="Direct link to OPTIONAL_EMPTY_ACCESS" title="Direct link to OPTIONAL_EMPTY_ACCESS">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Optional Empty Access&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>Optional Empty Access warnings are reported when we try to retrieve the value of a <a href="https://github.com/facebook/folly/blob/master/folly/Optional.h" target="_blank" rel="noopener noreferrer"><code>folly::Optional</code></a> when it is empty (i.e. <code>folly::none</code>).</p>
<p>In the following example we get a warning as <code>int_opt</code> might be <code>folly::none</code> and its value is being accessed:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">bool</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">somef</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">folly</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">Optional</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mightReturnNone</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">somef</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> folly</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">Optional</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> folly</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">none</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">value_no_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  folly</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">Optional</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> int_opt </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mightReturnNone</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> int_opt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Optional Empty Access warning</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>We do not get the warning anymore if we add a check whether <code>int_opt</code> is not empty:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">value_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  folly</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">Optional</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> int_opt </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mightReturnNone</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">int_opt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">has_value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> int_opt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// OK</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>In some cases we know that we have a non-empty value and there is no need to have a check. Consider the following example where Infer does not warn:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">bool</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">somef</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> v </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">folly</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">Optional</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mightReturnNone</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token function" style="color:rgb(130, 170, 255)">somef</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> folly</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token function" style="color:rgb(130, 170, 255)">Optional</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> folly</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">none</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">value_no_check</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  folly</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">Optional</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> int_opt </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">mightReturnNone</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// cannot be folly::none</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> int_opt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// OK</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="optional_empty_access_latent">OPTIONAL_EMPTY_ACCESS_LATENT<a href="#optional_empty_access_latent" class="hash-link" aria-label="Direct link to OPTIONAL_EMPTY_ACCESS_LATENT" title="Direct link to OPTIONAL_EMPTY_ACCESS_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Optional Empty Access Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#optional_empty_access">OPTIONAL_EMPTY_ACCESS</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="premature_nil_termination_argument">PREMATURE_NIL_TERMINATION_ARGUMENT<a href="#premature_nil_termination_argument" class="hash-link" aria-label="Direct link to PREMATURE_NIL_TERMINATION_ARGUMENT" title="Direct link to PREMATURE_NIL_TERMINATION_ARGUMENT">â€‹</a></h2>
<p><em>Reported as &quot;Premature Nil Termination Argument&quot; by <a href="/docs/checker-biabduction">biabduction</a>.</em></p>
<p>This error type is reported in C and Objective-C. In many variadic methods,
<code>nil</code> is used to signify the end of the list of input objects. This is similar
to nil-termination of C strings. If one of the arguments that is not the last
argument to the method is <code>nil</code> as well, Infer reports an error because that may
lead to unexpected behavior.</p>
<p>An example of such variadic methods is
<a href="https://developer.apple.com/library/prerelease/ios/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/index.html#//apple_ref/occ/clm/NSArray/arrayWithObjects" target="_blank" rel="noopener noreferrer">arrayWithObjects</a></p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  NSArray </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">foo </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">NSArray arrayWithObjects</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">@&quot;aaa&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> str</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">@&quot;bbb&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> nil</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<p>In this example, if <code>str</code> is <code>nil</code> then an array <code>@[@&quot;aaa&quot;]</code> of size 1 will be
created, and not an array <code>@[@&quot;aaa&quot;, str, @&quot;bbb&quot;]</code> of size 3 as expected.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_cannot_instantiate_abstract_class">PULSE_CANNOT_INSTANTIATE_ABSTRACT_CLASS<a href="#pulse_cannot_instantiate_abstract_class" class="hash-link" aria-label="Direct link to PULSE_CANNOT_INSTANTIATE_ABSTRACT_CLASS" title="Direct link to PULSE_CANNOT_INSTANTIATE_ABSTRACT_CLASS">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Cannot Instantiate Abstract Class&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>Instantiating an abstract class will lead to <code>Cannot instantiate abstract class</code> error.</p>
<div class="language-hack codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hack codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">abstract class AbstractClass1 {}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">class ConcreteClass1 extends AbstractClass1 {}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public static function makeGeneric&lt;T&gt;(classname&lt;T&gt; $cls): void {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    new $cls();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">&lt;&lt;__ConsistentConstruct&gt;&gt;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">abstract class AbstractClass2 {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  public static function makeStatic(): void {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    new static();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">class ConcreteClass2 extends AbstractClass2 {}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public function badViaGeneric(): void {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Main::makeGeneric(AbstractClass1::class); // ERROR!</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public function goodViaGeneric(): void {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  Main::makeGeneric(ConcreteClass1::class);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public function badViaStatic(): void {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  AbstractClass2::makeStatic(); // ERROR!</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public function goodViaStatic(): void {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  ConcreteClass2::makeStatic();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_const_refable">PULSE_CONST_REFABLE<a href="#pulse_const_refable" class="hash-link" aria-label="Direct link to PULSE_CONST_REFABLE" title="Direct link to PULSE_CONST_REFABLE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Const Refable Parameter&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>This issue is reported when a function parameter is a) passed by value and b) is not modified inside the function. Instead, parameter can be passed by const reference, i.e. converted to a <code>const&amp;</code> so that no unnecessary copy is created at the callsite of the function.</p>
<p>For example,</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;vector&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">read_first</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> std</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">vector</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> vec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> vec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">const_refable</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">vector</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> vec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> first </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">read_first</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">vec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// vec is never modified, so the parameter should have type const&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_dict_missing_key">PULSE_DICT_MISSING_KEY<a href="#pulse_dict_missing_key" class="hash-link" aria-label="Direct link to PULSE_DICT_MISSING_KEY" title="Direct link to PULSE_DICT_MISSING_KEY">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Dict Missing Key&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>This issue is similar to <a href="#pulse_uninitialized_value"><code>PULSE_UNINITIALIZED_VALUE</code></a>, but it is to warn
reading a missing key of dictionary in Hack.</p>
<p>For example, in the following code, the dictionary <code>$d</code> has no entry for <code>bye</code>, so reading
<code>$d[&#x27;bye&#x27;]</code> will throw the <code>OutOfBoundsException</code> exception, which is usually unexpected from
developers.  We can use a safer function <code>idx</code> instead when keys of a dictionary is unclear.</p>
<div class="language-hack codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hack codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">function simple_bad() : int {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  $d = dict[&#x27;hi&#x27; =&gt; 42, &#x27;hello&#x27; =&gt; 52];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  return $d[&#x27;bye&#x27;];</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_dynamic_type_mismatch">PULSE_DYNAMIC_TYPE_MISMATCH<a href="#pulse_dynamic_type_mismatch" class="hash-link" aria-label="Direct link to PULSE_DYNAMIC_TYPE_MISMATCH" title="Direct link to PULSE_DYNAMIC_TYPE_MISMATCH">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Dynamic Type Mismatch&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>This error is reported in Hack. It fires when we detect an operation that is incompatible
with the dynamic type of its arguments.</p>
<p>For example, reading <code>$x[&#x27;key&#x27;]</code> when <code>$x</code> is a vector.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_readonly_shared_ptr_param">PULSE_READONLY_SHARED_PTR_PARAM<a href="#pulse_readonly_shared_ptr_param" class="hash-link" aria-label="Direct link to PULSE_READONLY_SHARED_PTR_PARAM" title="Direct link to PULSE_READONLY_SHARED_PTR_PARAM">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Read-only Shared Parameter&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>This issue is reported when a shared pointer parameter is a) passed by value and b) is used only for reading, rather than lifetime extension. At the callsite, this might cause a potentially expensive unnecessary copy of the shared pointer, especially when many number of threads are sharing it. To avoid this, consider 1) passing the raw pointer instead and 2) use <code>std::shared_ptr::get</code> at callsites.</p>
<p>For example,</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">callee</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">shared_ptr</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">T</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// read_T(*x);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">caller</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">callee</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">shared_ptr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>can be changed to</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">callee</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">T</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// read_T(*p);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">caller</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">callee</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">shared_ptr</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_reference_stability">PULSE_REFERENCE_STABILITY<a href="#pulse_reference_stability" class="hash-link" aria-label="Direct link to PULSE_REFERENCE_STABILITY" title="Direct link to PULSE_REFERENCE_STABILITY">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#memory-error">Memory error</a>. Reported as &quot;Reference Stability&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>The family of maps <code>folly::F14ValueMap</code>, <code>folly::F14VectorMap</code>, and by extension
<code>folly::F14FastMap</code> differs slightly from <code>std::unordered_map</code> as it does not
provide reference stability. When the map resizes such as when <code>reserve</code> is
called or new elements are added, all existing references become invalid and
should not be used.</p>
<p><code>operator[]</code> is an interesting case as it can easily introduce unsafe code when
used twice in the same expression. Depending on what keys are present and which
order the compiler sequences sub-expressions, an insert via <code>operator[]</code> can
invalidate a reference obtained in the same expression before it&#x27;s read from.
Typically, those cases can be improved by using other map functions such as
<code>at</code>, <code>find</code>, <code>emplace</code>, or <code>insert_or_assign</code> to increase code quality and
safety.</p>
<p>Examples:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword" style="font-style:italic">include</span><span class="token macro property"> </span><span class="token macro property string" style="color:rgb(195, 232, 141)">&lt;folly/container/F14Map.h&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">use_reference_after_growth_bad</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">folly</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">F14FastMap</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">auto</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> valueRef </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">at</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">emplace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">13</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">71</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> valueCopy </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> valueRef</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">unsafe_expressions_bad</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">folly</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">F14FastMap</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Unsafe expressions in situations where one or both keys are not present.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">13</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">71</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> p </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">13</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">71</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> q </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">f</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">13</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> map</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">71</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_resource_leak">PULSE_RESOURCE_LEAK<a href="#pulse_resource_leak" class="hash-link" aria-label="Direct link to PULSE_RESOURCE_LEAK" title="Direct link to PULSE_RESOURCE_LEAK">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#resource-leak">Resource leak</a>. Reported as &quot;Resource Leak&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>See <a href="#resource_leak">RESOURCE_LEAK</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_transitive_access">PULSE_TRANSITIVE_ACCESS<a href="#pulse_transitive_access" class="hash-link" aria-label="Direct link to PULSE_TRANSITIVE_ACCESS" title="Direct link to PULSE_TRANSITIVE_ACCESS">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#logic-error">Logic error</a>. Reported as &quot;Transitive Access&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>This issue tracks spurious accesses that are reachable from specific entry functions.</p>
<p>Spurious accesses are specified as specific load/calls.</p>
<p>Entry functions are specified through their enclosing class that must extend a specific
class and should not extend a list of specific classes.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_unawaited_awaitable">PULSE_UNAWAITED_AWAITABLE<a href="#pulse_unawaited_awaitable" class="hash-link" aria-label="Direct link to PULSE_UNAWAITED_AWAITABLE" title="Direct link to PULSE_UNAWAITED_AWAITABLE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#resource-leak">Resource leak</a>. Reported as &quot;Unawaited Awaitable&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p><code>Awaitable</code> values created by calls to asynchronous methods should eventually be <code>await</code>ed along all codepaths (even if their value is unused). Hence the following is <em>not</em> OK</p>
<div class="language-hack codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hack codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">class A {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  public static async genInt() : Awaitable&lt;int&gt;{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // typically do something involving IO</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  public static async genBad() : Awaitable&lt;void&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    $_unused = self::genInt(); // ERROR: should have done $_unused = await self::genInt();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Failure to <code>await</code> an <code>Awaitable</code> can lead to non-deterministic amount of the asynchronous call actually being executed, and can also indicate a logical confusion between <code>T</code> and <code>Awaitable&lt;T&gt;</code> that may not be caught by the type-checker.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_uninitialized_const">PULSE_UNINITIALIZED_CONST<a href="#pulse_uninitialized_const" class="hash-link" aria-label="Direct link to PULSE_UNINITIALIZED_CONST" title="Direct link to PULSE_UNINITIALIZED_CONST">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#runtime-exception">Runtime exception</a>. Reported as &quot;Uninitialized Const&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>This issue is similar to <a href="#pulse_uninitialized_value"><code>PULSE_UNINITIALIZED_VALUE</code></a>, but it is to detect the uninitialized abstract const value in Hack.</p>
<p>For example, in the following code, the <code>FIELD</code> can be read by the static method <code>get_field</code>.</p>
<ul>
<li>It is problematic invoking <code>static::FIELD</code>, since it may be resolved to a <code>A::FIELD</code> access, if called from <code>A::get_field()</code>. Because <code>FIELD</code> is abstract in <code>A</code>, it is never assigned a value and the vm will crash. Unfortunately, Hack&#x27;s type system cannot catch this.</li>
<li>In the <code>B</code> class, <code>FIELD</code> is initialized, thus invoking <code>B::get_field</code> is safe.</li>
</ul>
<div class="language-hack codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hack codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">abstract class A {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  abstract const string FIELD;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  public static function get_field(): string {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    return static::FIELD;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function call_get_field_bad(): string {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  return A::get_field();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">class B extends A {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  const string FIELD = &quot;defined&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">function call_get_field_ok(): string {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  return B::get_field();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_uninitialized_value">PULSE_UNINITIALIZED_VALUE<a href="#pulse_uninitialized_value" class="hash-link" aria-label="Direct link to PULSE_UNINITIALIZED_VALUE" title="Direct link to PULSE_UNINITIALIZED_VALUE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#memory-error">Memory error</a>. Reported as &quot;Uninitialized Value&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>The code uses a variable that has not been initialized, leading to unpredictable or unintended results.</p>
<p>Using uninitialized values can lead to undefined behaviors possibly resulting in crashes, security failures and invalid results.</p>
<p>This can easily be fixed by assigning all variables to an initial value when declaring them.</p>
<p>This, for example, in C:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">coordinates</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">coordinates</span><span class="token plain"> c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  c</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">y</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// uninitialized value c.y!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> z</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">z </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// uninitialized value z!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// something</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_unnecessary_copy">PULSE_UNNECESSARY_COPY<a href="#pulse_unnecessary_copy" class="hash-link" aria-label="Direct link to PULSE_UNNECESSARY_COPY" title="Direct link to PULSE_UNNECESSARY_COPY">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Unnecessary Copy&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>This is reported when Infer detects an unnecessary copy of an object via copy constructor where neither the source nor the copied variable are modified before the variable goes out of scope. Rather than the copy, a reference to the source object could be used to save memory.</p>
<p>For example,</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">A</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">unnecessary_copy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">A</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">auto</span><span class="token plain"> y </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// calls copy constructor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// y is not modified after copy, hence we could avoid the copy by adding &amp; after auto as below</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">use_reference_instead</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">A</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">auto</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> y </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// copy the ref only</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_unnecessary_copy_assignment">PULSE_UNNECESSARY_COPY_ASSIGNMENT<a href="#pulse_unnecessary_copy_assignment" class="hash-link" aria-label="Direct link to PULSE_UNNECESSARY_COPY_ASSIGNMENT" title="Direct link to PULSE_UNNECESSARY_COPY_ASSIGNMENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Unnecessary Copy Assignment&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>See <a href="#pulse_unnecessary_copy">PULSE_UNNECESSARY_COPY</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_unnecessary_copy_assignment_const">PULSE_UNNECESSARY_COPY_ASSIGNMENT_CONST<a href="#pulse_unnecessary_copy_assignment_const" class="hash-link" aria-label="Direct link to PULSE_UNNECESSARY_COPY_ASSIGNMENT_CONST" title="Direct link to PULSE_UNNECESSARY_COPY_ASSIGNMENT_CONST">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Unnecessary Copy Assignment from Const&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>See <a href="#pulse_unnecessary_copy">PULSE_UNNECESSARY_COPY</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_unnecessary_copy_assignment_movable">PULSE_UNNECESSARY_COPY_ASSIGNMENT_MOVABLE<a href="#pulse_unnecessary_copy_assignment_movable" class="hash-link" aria-label="Direct link to PULSE_UNNECESSARY_COPY_ASSIGNMENT_MOVABLE" title="Direct link to PULSE_UNNECESSARY_COPY_ASSIGNMENT_MOVABLE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Unnecessary Copy Assignment Movable&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>See <a href="#pulse_unnecessary_copy_movable">PULSE_UNNECESSARY_COPY_MOVABLE</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_unnecessary_copy_intermediate">PULSE_UNNECESSARY_COPY_INTERMEDIATE<a href="#pulse_unnecessary_copy_intermediate" class="hash-link" aria-label="Direct link to PULSE_UNNECESSARY_COPY_INTERMEDIATE" title="Direct link to PULSE_UNNECESSARY_COPY_INTERMEDIATE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Unnecessary Copy Intermediate&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>This is reported when Infer detects an unnecessary temporary copy of an intermediate object where copy is created to be passed down to a function unnecessarily. Instead, the intermediate object should either be moved into the callee or the type of the callee&#x27;s parameter should be made <code>const &amp;</code>.</p>
<p>A prime example of this occurs when we call a function with a call-by-value parameter as follows:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">callee</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">ExpensiveObject obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ....</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">caller</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">callee</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">myExpensiveObj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// a copy of myExpensiveObj is created</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// the copy is destroyed right after the call  </span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>In this case, when we call <code>callee</code>, under the hood, a copy of the argument <code>myExpensiveObj</code> is created to be passed to the function call. However, the copy might be unnecessary if</p>
<ul>
<li><code>callee</code> doesnâ€™t modify its parameter â†’ then we can change its type to <code>const ExpensiveObject&amp;</code>, getting rid of the copy at caller</li>
<li>even if <code>callee</code> might modify the object, if the argument <code>myExpensiveObj</code> is never used later on, we can get rid of the copy by moving it instead: <code>callee(std::move(myExpensiveObj))</code>.</li>
</ul>
<p>The analysis is careful about suggesting moves blindly though: if the argument <code>myExpensiveObj</code> is of type <code>const &amp; ExpensiveObject</code> then we also recommend that for move to work, const-reference needs to be removed.</p>
<p>PS: We check for other conditions on the argument here: e.g. it should be local to the procedure, as moving a non-local member might cause other memory correctness issues like use-after-move later on.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_unnecessary_copy_intermediate_const">PULSE_UNNECESSARY_COPY_INTERMEDIATE_CONST<a href="#pulse_unnecessary_copy_intermediate_const" class="hash-link" aria-label="Direct link to PULSE_UNNECESSARY_COPY_INTERMEDIATE_CONST" title="Direct link to PULSE_UNNECESSARY_COPY_INTERMEDIATE_CONST">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Unnecessary Copy Intermediate from Const&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>See <a href="#pulse_unnecessary_copy">PULSE_UNNECESSARY_COPY</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_unnecessary_copy_movable">PULSE_UNNECESSARY_COPY_MOVABLE<a href="#pulse_unnecessary_copy_movable" class="hash-link" aria-label="Direct link to PULSE_UNNECESSARY_COPY_MOVABLE" title="Direct link to PULSE_UNNECESSARY_COPY_MOVABLE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Unnecessary Copy Movable&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>This is reported when Infer detects an unnecessary copy into a field where</p>
<ul>
<li>the source is an rvalue-reference</li>
<li>the source is not modified before it goes out of scope or is destroyed.</li>
</ul>
<p>Note that the copy can be modified since it has the ownership of the object.</p>
<p>Fix: Rather than the copying into the field, the source should be moved into it.</p>
<p>For example,</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">struct</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">A</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">vector</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> vec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Test</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  A mem_a</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">unnecessary_copy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">A</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   mem_a </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> src</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// fix is to move as follows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// mem_a = std::move(src);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_unnecessary_copy_optional">PULSE_UNNECESSARY_COPY_OPTIONAL<a href="#pulse_unnecessary_copy_optional" class="hash-link" aria-label="Direct link to PULSE_UNNECESSARY_COPY_OPTIONAL" title="Direct link to PULSE_UNNECESSARY_COPY_OPTIONAL">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Unnecessary Copy to Optional&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>This is reported when Infer detects an unnecessary copy of an object via <code>optional</code> value
construction where the source is not modified before it goes out of scope.  To avoid the copy, we
can move the source object or change the callee&#x27;s type.</p>
<p>For example,</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">get_optional_value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">optional</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">A</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">pass_non_optional_value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">A x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token function" style="color:rgb(130, 170, 255)">get_optional_value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// fix is to move as follows</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// get_optional_value(std::move(x));</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_unnecessary_copy_optional_const">PULSE_UNNECESSARY_COPY_OPTIONAL_CONST<a href="#pulse_unnecessary_copy_optional_const" class="hash-link" aria-label="Direct link to PULSE_UNNECESSARY_COPY_OPTIONAL_CONST" title="Direct link to PULSE_UNNECESSARY_COPY_OPTIONAL_CONST"> â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Unnecessary Copy to Optional from Const&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>See <a href="#pulse_unnecessary_copy_optional">PULSE_UNNECESSARY_COPY_OPTIONAL</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pulse_unnecessary_copy_return">PULSE_UNNECESSARY_COPY_RETURN<a href="#pulse_unnecessary_copy_return" class="hash-link" aria-label="Direct link to PULSE_UNNECESSARY_COPY_RETURN" title="Direct link to PULSE_UNNECESSARY_COPY_RETURN">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Unnecessary Copy Return&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>This is similar to <a href="#pulse_unnecessary_copy">PULSE_UNNECESSARY_COPY</a>, but reported when a callee returns a copied value and it is not modified in its caller.  We may be able to return const-ref typed value or try <code>std::move</code> to avoid the copy.</p>
<p>For example,</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">MyClass</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  T v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"> </span><span class="token keyword" style="font-style:italic">public</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  T </span><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> v</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// v is copied here, which is avoidable.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">caller</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">MyClass obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  T x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">cout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// x is not modified.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="pure_function">PURE_FUNCTION<a href="#pure_function" class="hash-link" aria-label="Direct link to PURE_FUNCTION" title="Direct link to PURE_FUNCTION">â€‹</a></h2>
<p><em>Reported as &quot;Pure Function&quot; by <a href="/docs/checker-purity">purity</a>.</em></p>
<p>This issue type indicates pure functions. For instance, below functions would be marked as pure:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">local_write_pure</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> k </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  k</span><span class="token operator" style="color:rgb(137, 221, 255)">++</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> k</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// no change to outside state, the local allocation is ok.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">local_alloc_pure</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">ArrayList</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">Integer</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> list</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token class-name" style="color:rgb(255, 203, 107)">ArrayList</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">Integer</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> list_new </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ArrayList</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">Integer</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Integer</span><span class="token plain"> el </span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> list</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    list_new</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">add</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">el</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> list_new</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">size</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>However, the following ones would not be pure:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">swap_impure</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> j</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> tmp </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">i</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">j</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// modifying the input array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  array</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">j</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> tmp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> a </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">set_impure</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  a </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">+</span><span class="token plain"> y</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//modifying a global variable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quandary_taint_error">QUANDARY_TAINT_ERROR<a href="#quandary_taint_error" class="hash-link" aria-label="Direct link to QUANDARY_TAINT_ERROR" title="Direct link to QUANDARY_TAINT_ERROR">â€‹</a></h2>
<p><em>Reported as &quot;Taint Error&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>Generic taint error when nothing else fits.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="regex_op_on_ui_thread">REGEX_OP_ON_UI_THREAD<a href="#regex_op_on_ui_thread" class="hash-link" aria-label="Direct link to REGEX_OP_ON_UI_THREAD" title="Direct link to REGEX_OP_ON_UI_THREAD">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Regex Op On Ui Thread&quot; by <a href="/docs/checker-starvation">starvation</a>.</em></p>
<p>A potentially costly operation on a regular expression occurs on the UI thread.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="resource_leak">RESOURCE_LEAK<a href="#resource_leak" class="hash-link" aria-label="Direct link to RESOURCE_LEAK" title="Direct link to RESOURCE_LEAK">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#resource-leak">Resource leak</a>. Reported as &quot;Resource Leak&quot; by <a href="/docs/checker-biabduction">biabduction</a>.</em></p>
<p>Infer reports resource leaks in C, Objective-C and Java. In general, resources
are entities such as files, sockets, connections, etc, that need to be closed
after being used.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="resource-leak-in-c">Resource leak in C<a href="#resource-leak-in-c" class="hash-link" aria-label="Direct link to Resource leak in C" title="Direct link to Resource leak in C">â€‹</a></h3>
<p>This is an example of a resource leak in C code:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">void</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> resource_leak_bug </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    FILE </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">fp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    fp</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token function" style="color:rgb(130, 170, 255)">fopen</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;c:\\test.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;r&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// file opened and not closed.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="resource-leak-in-java">Resource leak in Java<a href="#resource-leak-in-java" class="hash-link" aria-label="Direct link to Resource leak in Java" title="Direct link to Resource leak in Java">â€‹</a></h3>
<p>For the remaining of this section, we will consider examples of resource leaks
in Java code.</p>
<p>TIP: A common source of bugs is <b>exceptions skipping past close()
statements</b>. That is the first thing to look for if INFER reports a potential
resource leak.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="basics-and-standard-idiom">Basics and Standard Idiom<a href="#basics-and-standard-idiom" class="hash-link" aria-label="Direct link to Basics and Standard Idiom" title="Direct link to Basics and Standard Idiom">â€‹</a></h3>
<p>Some objects in Java, the <i>resources</i>, are supposed to be closed when you
stop using them, and failure to close is a <i>resource leak</i>. Resources
include input streams, output streams, readers, writers, sockets, http
connections, cursors, and json parsers.</p>
<p>The standard idiom is</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Standard idiom</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token class-name" style="color:rgb(255, 203, 107)">Allocate</span><span class="token plain"> resource</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">do</span><span class="token plain"> some stuff</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    close resource</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>or more for example,</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//  Standard Idiom</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> foo </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">IOException</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileOutputStream</span><span class="token plain"> fos </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileOutputStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">File</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;whatever.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      fos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">write</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      fos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">close</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>and you should use the standard idiom for the most part, when you don&#x27;t want to
return the resource to the surrounding context.</p>
<p>Sometimes people just leave out close(), and that is a bug, but more typically
exceptional paths are the root of the problem, as in</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// leak because of exception</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> foo </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileOutputStream</span><span class="token plain"> fos </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileOutputStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">File</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;whatever.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    fos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">write</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">   </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//DOH! What if exception?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    fos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">close</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>where an exception in fos.write will cause execution to skip past the close()
statement.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="multiple-resources-bugs">Multiple Resources Bugs<a href="#multiple-resources-bugs" class="hash-link" aria-label="Direct link to Multiple Resources Bugs" title="Direct link to Multiple Resources Bugs">â€‹</a></h4>
<p>We can deal with multiple resources correctly and simply just by nesting the
standard idiom.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Two Resources nested</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileInputStream</span><span class="token plain"> fis </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileInputStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">File</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;whatever.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileOutputStream</span><span class="token plain"> fos </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileOutputStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">File</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;everwhat.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        fos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">write</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fis</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">read</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        fos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">close</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      fis</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">close</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>Bugs often occur when using multiple resources in other ways because of
exceptions in close() methods. For example,</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Classic Two Resources Bug</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileInputStream</span><span class="token plain"> fis </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileOutputStream</span><span class="token plain"> fos </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      fis </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileInputStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">File</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;whatever.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      fos </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileOutputStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">File</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;everwhat.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      fos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">write</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fis</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">read</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fis</span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">  fis</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">close</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fos</span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> fos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">close</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>Here, if there is an exception in the call to fis.close() execution will skip
past fos.close(); a leak.</p>
<p>Another way, besides the standard idiom, to deal with this problem is to swallow
exceptions.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Two Resources Fix 1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileInputStream</span><span class="token plain"> fis </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileOutputStream</span><span class="token plain"> fos </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      fis </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileInputStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">File</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;whatever.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      fos </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileOutputStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">File</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;everwhat.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      fos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">write</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fis</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">read</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">finally</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fis</span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> fis</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">close</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Exception</span><span class="token plain"> e</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Exception swallowing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fos</span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> fos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">close</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>You can also swallow the exception on the output stream. Some people prefer not
to swallow output stream exceptions, and also flush before closing.
<a href="http://code.google.com/p/guava-libraries/issues/detail?id=1118" target="_blank" rel="noopener noreferrer">http://code.google.com/p/guava-libraries/issues/detail?id=1118</a></p>
<p>Notice that the nested standard idiom does not need the checks for null, which
are in there in this case to protect against the case when one of the
allocations throws an exception, in which case one would get a
NullPointerException.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="nested_allocations">Nested_Allocations<a href="#nested_allocations" class="hash-link" aria-label="Direct link to Nested_Allocations" title="Direct link to Nested_Allocations">â€‹</a></h3>
<p>When a resource allocation is included as an argument to a constructor, if the
constructor fails it can leave an unreachable resource that no one can close.</p>
<p>For example gzipOutputStream = new GZIPOutputStream(new FileOutputStream(out));
is bad in case the outer constructor, GZIPOutputStream, throws an exception. In
that case, no one will have a hold of the FileOutputStream and so no one will be
able to close it.</p>
<p>In such a case you need to move the allocation the FileOutputStream out of the
nested position and name it, so you are able to close if anything goes wrong
during execution of the GZIPOutputStream constructor.</p>
<p>Here are resources that can throw exceptions i their constructor(s).</p>
<ul>
<li>ObjectInputStream , ObjectOutputStream, PipedInputStream, PipedOutputStream,
PipedReader, PipedWriter, JarInputStream, JarOutputStream, GZIPInputStream,
GZIPOutputStream , ZipFile all throw IOException</li>
<li>PrintStream throws UnsupportedEncodingException</li>
</ul>
<p>The constructors for FileInputStream, FileOutputStream and RandomAccessFile
throw FileNotFoundException, but these cases are not problematic in the sense
that their arguments are not resources and so they do not cause the nested
resource leak.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="allocation-of-jsonparser-and-cursor-resources">Allocation of JSonParser and Cursor resources<a href="#allocation-of-jsonparser-and-cursor-resources" class="hash-link" aria-label="Direct link to Allocation of JSonParser and Cursor resources" title="Direct link to Allocation of JSonParser and Cursor resources">â€‹</a></h3>
<p>Some resources are created inside libraries instead of by &quot;new&quot;.</p>
<p>Cursor is an interface, the actual resources are something like SQLiteCursor.
So, every time you call a function that returns a Cursor object, there is an
allocation.</p>
<p>For instance, in the functions from SQLiteDatabase query(â€¦) and rawQuery(â€¦)
allocate a cursor resource. For SQLiteQueryBuilder, ContentProviderClient,
ContentResolver. MediaStore and DownloadManager it is only query(â€¦) Cursor
objects cursor created by these functions need to be closed (i.e.,
cursor.close()).</p>
<p>Similarly, JsonParser is an abstract class, and create a resource in functions
from the class JsonFactory createParser(byte[] data) createParser(byte[] data,
int offset, int len) createParser(String content) createParser(URL url)
createParser(File f) JsonParser objects js created by these functions need to be
closed (jp.close()). On the other hand . JasonParsers gotten from
createParser(InputStream in) and createParser(Reader r) give you JsonParsers
that donâ€™t need to be closed. This is because they receive the resource from
somewhere that will maintain the responsibility to close it.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="escaping-resources-and-exceptions">Escaping resources and exceptions<a href="#escaping-resources-and-exceptions" class="hash-link" aria-label="Direct link to Escaping resources and exceptions" title="Direct link to Escaping resources and exceptions">â€‹</a></h3>
<p>Sometimes you want to return a resource to the outside, in which case you should
not close it, but you still need to be careful of exceptions in case control
skips past the return leaving no one to close. Here is a simple example of a
positive use of escaping resources.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// An escaping resource, shouldn&#x27;t close</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">BugReportAttachment</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">createAttachment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">File</span><span class="token plain"> reportDirectory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">String</span><span class="token plain"> fileName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileNotFoundException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">File</span><span class="token plain"> file </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">File</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reportDirectory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fileName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">OutputStream</span><span class="token plain"> stream </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileOutputStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">BugReportAttachment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Uri</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">fromFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>In this case it is intended that an object that wraps <code>stream</code> is passed to the
caller of <code>createAttachment</code>. You should certainly not close stream here,
because it is being passed to the outside.</p>
<p>But for escaping resources like this you still need to be careful of exceptions.
For example, in</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// An escaping resource, and a leak</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">BugReportAttachment</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">createAttachment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">File</span><span class="token plain"> reportDirectory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">String</span><span class="token plain"> fileName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileNotFoundException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">File</span><span class="token plain"> file </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">File</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">reportDirectory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fileName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">OutputStream</span><span class="token plain"> stream </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileOutputStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">write</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">7</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">BugReportAttachment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Uri</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">fromFile</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">file</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> stream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>if stream.write(7) throws an exception, then no one will have a hold of stream,
and no one will be able to close it; a leak.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="java-7s-try-with-resources">Java 7&#x27;s try-with-resources<a href="#java-7s-try-with-resources" class="hash-link" aria-label="Direct link to Java 7&#x27;s try-with-resources" title="Direct link to Java 7&#x27;s try-with-resources">â€‹</a></h3>
<p><strong>(For use with Java 7 only)</strong></p>
<p>Clearly, accounting for the ramifications of all the exceptional cases is
complicated, and there is a better way in Java 7.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Two Resources Fix 2; via try-with-resources</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">throws</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">IOException</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileInputStream</span><span class="token plain"> fis </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileInputStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">File</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;whatever.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileOutputStream</span><span class="token plain"> fos </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FileOutputStream</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">File</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;everwhat.txt&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      fos</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">write</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fis</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">read</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>All the complicated exceptional cases above are (apparently) covered by this
construct, and the result is much simpler.</p>
<p>So, if you are trying to fix a potential leak in code with multiples resources
you can go ahead and try to understand whether the potential leak is real. Or,
if the code is complex and it is hard to figure out, it would be perfectly
legitimate to simply convert the code over to try-with-resources if you have
access to Java 7, so as to save yourself some brain-cycles. You will also end up
with cleaner code.</p>
<p>If try-with-resources is so great you should <i>always</i> use it. But you
shouldn&#x27;tâ€¦ Try-with-resources gives resources static scoping, and works via a
stack discipline. Sometimes, you want a resource to persist beyond scope, as in
the escaping example above. In an escaping example maybe you could refactor lots
of code so that try-with-resources applies, and maybe you cannot in a sensible
way. This just illustrates that, though you might hear people say that
try-with-resources &quot;solves&quot; the resource problem, it does not. It is very
useful, but you cannot use it blindly when you see a resource-allocation site.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="retain_cycle">RETAIN_CYCLE<a href="#retain_cycle" class="hash-link" aria-label="Direct link to RETAIN_CYCLE" title="Direct link to RETAIN_CYCLE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#resource-leak">Resource leak</a>. Reported as &quot;Retain Cycle&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A retain cycle is a situation when object A retains object B, and object B
retains object A at the same time. Here is an example:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">@class</span><span class="token plain"> Child</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">@interface</span><span class="token plain"> Parent </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> NSObject </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Child </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">child</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Instance variables are implicitly __strong</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">@end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">@interface</span><span class="token plain"> Child </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> NSObject </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Parent </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">parent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">@end</span><br></span></code></pre></div></div>
<p>You can fix a retain cycle in ARC by using __weak variables or weak properties
for your &quot;back links&quot;, i.e. links to direct or indirect parents in an object
hierarchy:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">@class</span><span class="token plain"> Child</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">@interface</span><span class="token plain"> Parent </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> NSObject </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Child </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">child</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">@end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">@interface</span><span class="token plain"> Child </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> NSObject </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    __weak Parent </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">parent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">@end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="retain_cycle_no_weak_info">RETAIN_CYCLE_NO_WEAK_INFO<a href="#retain_cycle_no_weak_info" class="hash-link" aria-label="Direct link to RETAIN_CYCLE_NO_WEAK_INFO" title="Direct link to RETAIN_CYCLE_NO_WEAK_INFO">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#resource-leak">Resource leak</a>. Reported as &quot;Retain Cycle No Weak Info&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A retain cycle is a situation when object A retains object B, and object B
retains object A at the same time. Here is an example:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">@class</span><span class="token plain"> Child</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">@interface</span><span class="token plain"> Parent </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> NSObject </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Child </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">child</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Instance variables are implicitly __strong</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">@end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">@interface</span><span class="token plain"> Child </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> NSObject </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Parent </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">parent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">@end</span><br></span></code></pre></div></div>
<p>You can fix a retain cycle in ARC by using __weak variables or weak properties
for your &quot;back links&quot;, i.e. links to direct or indirect parents in an object
hierarchy:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">@class</span><span class="token plain"> Child</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">@interface</span><span class="token plain"> Parent </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> NSObject </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Child </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">child</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">@end</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">@interface</span><span class="token plain"> Child </span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> NSObject </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    __weak Parent </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">parent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">@end</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="scope_leakage">SCOPE_LEAKAGE<a href="#scope_leakage" class="hash-link" aria-label="Direct link to SCOPE_LEAKAGE" title="Direct link to SCOPE_LEAKAGE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#sensitive-data-flow">Sensitive data flow</a>. Reported as &quot;Scope Leakage&quot; by <a href="/docs/checker-scope-leakage">scope-leakage</a>.</em></p>
<p>This issue type indicates that a class with scope annotation A stores a field
with whose (dynamic) type (or one of its super types) is annotated with scope
B such that a scope nesting restriction is violated. By &quot;stores&quot;, we mean
either directly or transitively.</p>
<p>A configuration is used to list the set of scopes and the must-not-hold relation.</p>
<p>In the following Java example, the set of scopes is Outer and Inner, and the must-not-hold
relation is simply {(Outer, Inner)}:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@ScopeType</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Outer</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword" style="font-style:italic">class</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ClassOfOuterScope</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ClassOfInner</span><span class="token plain"> c </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ClassOfInner</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// &lt;-- warn here that ClassOfInner would leak.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@ScopeType</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Inner</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword" style="font-style:italic">class</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ClassOfInner</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>Here is a more detailed description of the analysis.</p>
<p>This analysis operates over Java bytecode. It assumes that types (classes, interfaces, enums,
etc.) may be annotated with so-called scope annotations. The analysis is parameterized by a set
of scopes and a &quot;must-not-hold&quot; relation over pairs of scopes, which it reads from a
configuration file.</p>
<p>The analysis aims to detect violations of the following property: if there exist a path of
fields from object OA to object OB and the type of OA (or one of its super-types) is annotated
with scope SA and the type of OB (or one of its super-types) is annotated with scope SB then
must-not-hold(SA, SB) must be false. Intuitively, the given objects have different scopes that
should not be nested, for example, different intended lifetimes, and a forbidden path from OA to
OB results in OB &quot;leaking&quot; out of the scope SA.</p>
<p>The implementation reads a configuration to determine a list of (scope) &quot;generators&quot; for each
type of scope and a scope class for each type of scope. A generator for a scope type SA is given
by the name of a class and a list of methods where it is understood that any of the methods
listed for the given class returns an object that is known to have scope SA. (This can be seen
as a form of lightweight modeling.) A scope class is the name of the class that represents a
given scope.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sensitive_data_flow">SENSITIVE_DATA_FLOW<a href="#sensitive_data_flow" class="hash-link" aria-label="Direct link to SENSITIVE_DATA_FLOW" title="Direct link to SENSITIVE_DATA_FLOW">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#sensitive-data-flow">Sensitive data flow</a>. Reported as &quot;Sensitive Data Flow&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A flow of sensitive data was detected from a source.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="shell_injection">SHELL_INJECTION<a href="#shell_injection" class="hash-link" aria-label="Direct link to SHELL_INJECTION" title="Direct link to SHELL_INJECTION">â€‹</a></h2>
<p><em>Reported as &quot;Shell Injection&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>Environment variable or file data flowing to shell.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="shell_injection_risk">SHELL_INJECTION_RISK<a href="#shell_injection_risk" class="hash-link" aria-label="Direct link to SHELL_INJECTION_RISK" title="Direct link to SHELL_INJECTION_RISK">â€‹</a></h2>
<p><em>Reported as &quot;Shell Injection Risk&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>Code injection if the caller of the endpoint doesn&#x27;t sanitize on its end.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sql_injection">SQL_INJECTION<a href="#sql_injection" class="hash-link" aria-label="Direct link to SQL_INJECTION" title="Direct link to SQL_INJECTION">â€‹</a></h2>
<p><em>Reported as &quot;Sql Injection&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>Untrusted and unescaped data flows to SQL.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sql_injection_risk">SQL_INJECTION_RISK<a href="#sql_injection_risk" class="hash-link" aria-label="Direct link to SQL_INJECTION_RISK" title="Direct link to SQL_INJECTION_RISK">â€‹</a></h2>
<p><em>Reported as &quot;Sql Injection Risk&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>Untrusted and unescaped data flows to SQL.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="stack_variable_address_escape">STACK_VARIABLE_ADDRESS_ESCAPE<a href="#stack_variable_address_escape" class="hash-link" aria-label="Direct link to STACK_VARIABLE_ADDRESS_ESCAPE" title="Direct link to STACK_VARIABLE_ADDRESS_ESCAPE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#memory-error">Memory error</a>. Reported as &quot;Stack Variable Address Escape&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>Reported when an address pointing into the stack of the current
function will escape to its calling context. Such addresses will
become invalid by the time the function actually returns so are
potentially dangerous.</p>
<p>For example, directly returning a pointer to a local variable:</p>
<div class="language-C language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// &lt;-- warn here that &quot;&amp;x&quot; will escape</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="starvation">STARVATION<a href="#starvation" class="hash-link" aria-label="Direct link to STARVATION" title="Direct link to STARVATION">â€‹</a></h2>
<p><em>Reported as &quot;UI Thread Starvation&quot; by <a href="/docs/checker-starvation">starvation</a>.</em></p>
<p>This error is reported in Java, and specifically on Android. These reports are
triggered when a method that runs on the UI thread may block, thus potentially
leading to an Application Not Responding error.</p>
<p>Infer considers a method as running on the UI thread whenever:</p>
<ul>
<li>The method, one of its overrides, its class, or an ancestral class, is
annotated with <code>@UiThread</code>.</li>
<li>The method, or one of its overrides is annotated with <code>@OnEvent</code>, <code>@OnClick</code>,
etc.</li>
<li>The method or its callees call a <code>Litho.ThreadUtils</code> method such as
<code>assertMainThread</code>.</li>
</ul>
<p>The issue is reported when a method deemed to run on the UI thread</p>
<ul>
<li>Makes a method call which may block.</li>
<li>Takes a lock, and another thread takes the same lock, and before releasing it,
makes a call that may block.</li>
</ul>
<p>Calls that may block are considered:</p>
<ul>
<li>Certain I/O calls.</li>
<li>Two way <code>Binder.transact</code> calls.</li>
<li>Certain OS calls.</li>
<li><code>Future</code> or <code>AsyncTask</code> calls to <code>get</code> without timeouts, or with too large
timeouts.</li>
</ul>
<p>To suppress starvation reports in a method <code>m()</code> use the
<code>@SuppressLint(&quot;STARVATION&quot;)</code> annotation, as follows:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token import namespace" style="color:rgb(178, 204, 214)">android</span><span class="token import namespace punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import namespace" style="color:rgb(178, 204, 214)">annotation</span><span class="token import namespace punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import class-name" style="color:rgb(255, 203, 107)">SuppressLint</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@SuppressLint</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;STARVATION&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">m</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>To signal to Infer that a method does not perform any blocking calls, despite
appearences, you can use the <code>@NonBlocking</code> annotation:</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token import namespace" style="color:rgb(178, 204, 214)">com</span><span class="token import namespace punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import namespace" style="color:rgb(178, 204, 214)">facebook</span><span class="token import namespace punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import namespace" style="color:rgb(178, 204, 214)">infer</span><span class="token import namespace punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import namespace" style="color:rgb(178, 204, 214)">annotation</span><span class="token import namespace punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token import class-name" style="color:rgb(255, 203, 107)">NonBlocking</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@NonBlocking</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">m</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p>This instructs Infer to filter out any potentially blocking calls in <code>m()</code>
(also, transitively), and thus any other method can expect no starvation reports
due to a call to <code>m()</code>. You will need to set up your class path appropriately to
include the JAR files in <code>infer/annotations</code> for this annotation to work.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="static_initialization_order_fiasco">STATIC_INITIALIZATION_ORDER_FIASCO<a href="#static_initialization_order_fiasco" class="hash-link" aria-label="Direct link to STATIC_INITIALIZATION_ORDER_FIASCO" title="Direct link to STATIC_INITIALIZATION_ORDER_FIASCO">â€‹</a></h2>
<p><em>Reported as &quot;Static Initialization Order Fiasco&quot; by <a href="/docs/checker-siof">siof</a>.</em></p>
<p>This error is reported in C++. It fires when the initialization of a static
variable <code>A</code>, accesses a static variable <code>B</code> from another translation unit
(usually another <code>.cpp</code> file). There are no guarantees whether <code>B</code> has been
already initialized or not at that point.</p>
<p>For more technical definition and techniques to avoid/remediate, see the
<a href="https://isocpp.org/wiki/faq/ctors#static-init-order" target="_blank" rel="noopener noreferrer">FAQ</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="strict_mode_violation">STRICT_MODE_VIOLATION<a href="#strict_mode_violation" class="hash-link" aria-label="Direct link to STRICT_MODE_VIOLATION" title="Direct link to STRICT_MODE_VIOLATION">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#perf-regression">Perf regression</a>. Reported as &quot;Strict Mode Violation&quot; by <a href="/docs/checker-starvation">starvation</a>.</em></p>
<p>Android has a feature called
<a href="https://developer.android.com/reference/android/os/StrictMode" target="_blank" rel="noopener noreferrer">strict mode</a>,
which if enabled, will flag the occasions where the main thread makes a call
that results in disk I/O, waiting on a network socket, etc. The analysis
catching starvation errors and deadlocks (the <code>--starvation</code> analysis) has the
ability to statically detect such violations.</p>
<p>To suppress this warning, it&#x27;s enough to annotate the offending method with
<code>@SuppressLint(&quot;STRICT_MODE_VIOLATION&quot;)</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="strong_self_not_checked">STRONG_SELF_NOT_CHECKED<a href="#strong_self_not_checked" class="hash-link" aria-label="Direct link to STRONG_SELF_NOT_CHECKED" title="Direct link to STRONG_SELF_NOT_CHECKED">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#memory-error">Memory error</a>. Reported as &quot;StrongSelf Not Checked&quot; by <a href="/docs/checker-self-in-block">self-in-block</a>.</em></p>
<p>This checks reports a potential issue when a block captures <code>weakSelf</code> (a weak pointer to <code>self</code>),
then one assigns this pointer to a local variable <code>strongSelf</code> inside the block and uses this variable
without checking first whether it is <code>nil</code>. The problem here is that the weak pointer could be <code>nil</code> at
the time when the block is executed. So, the correct usage is to first check whether <code>strongSelf</code> is a valid
pointer, and then use it.</p>
<p>Example:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">__weak </span><span class="token function" style="color:rgb(130, 170, 255)">__typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> weakSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token plain">my_block</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    __strong </span><span class="token function" style="color:rgb(130, 170, 255)">__typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">weakSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> strongSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> weakSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> y </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> strongSelf</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><br></span></code></pre></div></div>
<p><strong>Action:</strong>
Add a check for <code>nil</code>:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">__weak </span><span class="token function" style="color:rgb(130, 170, 255)">__typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> weakSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token plain">my_block</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    __strong </span><span class="token function" style="color:rgb(130, 170, 255)">__typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">weakSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> strongSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> weakSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">strongSelf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token keyword" style="font-style:italic">int</span><span class="token plain"> y </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> strongSelf</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<p><em>Limitations:</em> To keep this check simple and intra-procedural, we rely on names to find <code>weakSelf</code>:
we assume that any captured weak pointer whose name contains &quot;self&quot; is a weak reference to <code>self</code>.
In contrast, <code>strongSelf</code> is a local variable to the block, so the check supports any name given to
a local strong pointer that has been assigned <code>weakSelf</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="taint_error">TAINT_ERROR<a href="#taint_error" class="hash-link" aria-label="Direct link to TAINT_ERROR" title="Direct link to TAINT_ERROR">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#sensitive-data-flow">Sensitive data flow</a>. Reported as &quot;Taint Error&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A taint flow was detected from a source to a sink</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="thread_safety_violation">THREAD_SAFETY_VIOLATION<a href="#thread_safety_violation" class="hash-link" aria-label="Direct link to THREAD_SAFETY_VIOLATION" title="Direct link to THREAD_SAFETY_VIOLATION">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#concurrency">Concurrency</a>. Reported as &quot;Thread Safety Violation&quot; by <a href="/docs/checker-racerd">racerd</a>.</em></p>
<p>This warning indicates a potential data race in Java. The analyser is called
RacerD and this section gives brief but a mostly complete description of its
features. See the <a href="/docs/checker-racerd">RacerD page</a> for more in-depth information and
examples.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="thread-safety-what-is-a-data-race">Thread-safety: What is a data race<a href="#thread-safety-what-is-a-data-race" class="hash-link" aria-label="Direct link to Thread-safety: What is a data race" title="Direct link to Thread-safety: What is a data race">â€‹</a></h3>
<p>Here a data race is a pair of accesses to the same member field such that:</p>
<ul>
<li>at least one is a write, and,</li>
<li>at least one occurs without any lock synchronization, and,</li>
<li>the two accesses occur on threads (if known) which can run in parallel.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="thread-safety-potential-fixes">Thread-safety: Potential fixes<a href="#thread-safety-potential-fixes" class="hash-link" aria-label="Direct link to Thread-safety: Potential fixes" title="Direct link to Thread-safety: Potential fixes">â€‹</a></h3>
<ul>
<li>Synchronizing the accesses (using the <code>synchronized</code> keyword, thread-exclusion
such as atomic objects, <code>volatile</code> etc).</li>
<li>Making an offending method private -- this will exclude it from being checked
at the top level, though it will be checked if called by a public method which
may itself, e.g., hold a lock when calling it.</li>
<li>Putting the two accesses on the same thread, e.g., by using <code>@MainThread</code> or
<code>@ThreadConfined</code>.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="thread-safety-conditions-checked-before-reporting">Thread-safety: Conditions checked before reporting<a href="#thread-safety-conditions-checked-before-reporting" class="hash-link" aria-label="Direct link to Thread-safety: Conditions checked before reporting" title="Direct link to Thread-safety: Conditions checked before reporting">â€‹</a></h3>
<p>The class and method are not marked <code>@ThreadSafe(enableChecks = false)</code>, and,</p>
<ul>
<li>The method is declared <code>synchronized</code>, or employs (non-transitively) locking,
or,</li>
<li>The class is not marked <code>@NotThreadSafe</code>, and,<!-- -->
<ul>
<li>The class/method is marked <code>@ThreadSafe,</code> or one of the configured synonyms
in <code>.inferconfig</code>, or,</li>
<li>A parent class, or an override method are marked with the above annotations.</li>
</ul>
</li>
</ul>
<p>NB currently RacerD <strong>does not take into account <code>@GuardedBy</code></strong>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="thread-safety-thread-annotations-recognized-by-racerd">Thread-safety: Thread annotations recognized by RacerD<a href="#thread-safety-thread-annotations-recognized-by-racerd" class="hash-link" aria-label="Direct link to Thread-safety: Thread annotations recognized by RacerD" title="Direct link to Thread-safety: Thread annotations recognized by RacerD">â€‹</a></h3>
<p>These class and method annotations imply the method is on the main thread:
<code>@MainThread</code>, <code>@UiThread</code></p>
<p>These method annotations imply the method is on the main thread: <code>@OnBind</code>,
<code>@OnEvent</code>, <code>@OnMount</code>, <code>@OnUnbind</code>, <code>@OnUnmount</code></p>
<p>Both classes of annotations work through the inheritance tree (i.e. if a parent
class or method is marked with one of these annotations, so is the child class /
method override).</p>
<p>In addition to these, RacerD recognizes many lifecycle methods as necessarily
running on the main thread, eg <code>Fragment.onCreate</code> etc.</p>
<p>Finally, the thread status of being on the main thread propagates backwards
through the call graph (ie if <code>foo</code> calls <code>bar</code> and <code>bar</code> is marked <code>@UiThtread</code>
then <code>foo</code> is automatically considered on the main thread too). Calling
<code>assertMainThread</code>, <code>assertOnUiThread</code>, <code>checkOnMainThread</code> has the same effect.</p>
<p>NB RacerD currently <strong>does not recognize <code>@WorkerThread</code>, <code>@BinderThread</code> or
<code>@AnyThread</code></strong>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="thread-safety-other-annotations-and-what-they-do">Thread-safety: Other annotations and what they do<a href="#thread-safety-other-annotations-and-what-they-do" class="hash-link" aria-label="Direct link to Thread-safety: Other annotations and what they do" title="Direct link to Thread-safety: Other annotations and what they do">â€‹</a></h3>
<p>These annotations can be found at <code>com.facebook.infer.annotation.*</code>.</p>
<ul>
<li>
<p><code>@Functional</code> This is a method annotation indicating the method always returns
the same value. When a method <code>foo</code> is annotated <code>@Functional</code>, RacerD will
ignore any writes of the return value of <code>foo</code>. For example, in
<code>this.x = foo()</code>, the write to <code>this.x</code> is ignored. The reasoning is that if
the method returns the same value whenever it&#x27;s called, any data race on
<code>this.x</code> is benign, if that is the only write.</p>
</li>
<li>
<p><code>@ThreadConfined</code> This is a class/method/field annotation which takes a single
parameter which can be <code>UI</code>, <code>ANY</code> or a user chosen string. It indicates to
RacerD a thread identifier for the class/method/field. Thus,
<code>@ThreadConfined(UI)</code> is equivalent to <code>@UiThread</code>, and <code>@ThreadConfined(ANY)</code>
is equivalent to not having the annotation at all, for classes and methods.
When this annotation is applied to a field it instructs Infer to assume
(without checking) that all accesses to that field are made on the same thread
(and can, therefore, not race by definition). The intention is that RacerD
uses that to detect exclusion between accesses occurring on the same thread.
However, only the UI thread is supported at this time, and any user provided
value is considered equal to <code>UI</code>.</p>
</li>
<li>
<p><code>@VisibleForTesting</code> A method annotation making Infer consider the method as
effectively <code>private</code>. This means it will not be checked for races against
other non-private methods of the class, but only if called by one.</p>
</li>
<li>
<p><code>@ReturnsOwnership</code> A method annotation indicating that the method returns a
freshly owned object. Accesses to the returned value will not be considered
for data races, as the object is in-effect unique and not accessible yet from
other threads. The main utility of this annotation is in interfaces, where
Infer cannot look up the implementation and decide for itself.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="topl_error">TOPL_ERROR<a href="#topl_error" class="hash-link" aria-label="Direct link to TOPL_ERROR" title="Direct link to TOPL_ERROR">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#sensitive-data-flow">Sensitive data flow</a>. Reported as &quot;Topl Error&quot; by <a href="/docs/checker-topl">topl</a>.</em></p>
<p>A violation of a Topl property (user-specified).
There is an execution path in the code that drives a Topl property from a start state to an error state.</p>
<p>This indicates that the code has a user-defined undesired behavior.</p>
<p>See <a href="/docs/checker-topl#what-is-it">Topl</a> for an example</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="topl_error_latent">TOPL_ERROR_LATENT<a href="#topl_error_latent" class="hash-link" aria-label="Direct link to TOPL_ERROR_LATENT" title="Direct link to TOPL_ERROR_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#sensitive-data-flow">Sensitive data flow</a>. Reported as &quot;Topl Error Latent&quot; by <a href="/docs/checker-topl">topl</a>.</em></p>
<p>A latent <a href="#topl_error">TOPL_ERROR</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="untrusted_buffer_access">UNTRUSTED_BUFFER_ACCESS<a href="#untrusted_buffer_access" class="hash-link" aria-label="Direct link to UNTRUSTED_BUFFER_ACCESS" title="Direct link to UNTRUSTED_BUFFER_ACCESS">â€‹</a></h2>
<p><em>Reported as &quot;Untrusted Buffer Access&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>Untrusted data of any kind flowing to buffer.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="untrusted_deserialization">UNTRUSTED_DESERIALIZATION<a href="#untrusted_deserialization" class="hash-link" aria-label="Direct link to UNTRUSTED_DESERIALIZATION" title="Direct link to UNTRUSTED_DESERIALIZATION">â€‹</a></h2>
<p><em>Reported as &quot;Untrusted Deserialization&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>User-controlled deserialization.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="untrusted_deserialization_risk">UNTRUSTED_DESERIALIZATION_RISK<a href="#untrusted_deserialization_risk" class="hash-link" aria-label="Direct link to UNTRUSTED_DESERIALIZATION_RISK" title="Direct link to UNTRUSTED_DESERIALIZATION_RISK">â€‹</a></h2>
<p><em>Reported as &quot;Untrusted Deserialization Risk&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>User-controlled deserialization</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="untrusted_environment_change_risk">UNTRUSTED_ENVIRONMENT_CHANGE_RISK<a href="#untrusted_environment_change_risk" class="hash-link" aria-label="Direct link to UNTRUSTED_ENVIRONMENT_CHANGE_RISK" title="Direct link to UNTRUSTED_ENVIRONMENT_CHANGE_RISK">â€‹</a></h2>
<p><em>Reported as &quot;Untrusted Environment Change Risk&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>User-controlled environment mutation.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="untrusted_file">UNTRUSTED_FILE<a href="#untrusted_file" class="hash-link" aria-label="Direct link to UNTRUSTED_FILE" title="Direct link to UNTRUSTED_FILE">â€‹</a></h2>
<p><em>Reported as &quot;Untrusted File&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>User-controlled file creation; may be vulnerable to path traversal and more.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="untrusted_file_risk">UNTRUSTED_FILE_RISK<a href="#untrusted_file_risk" class="hash-link" aria-label="Direct link to UNTRUSTED_FILE_RISK" title="Direct link to UNTRUSTED_FILE_RISK">â€‹</a></h2>
<p><em>Reported as &quot;Untrusted File Risk&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>User-controlled file creation; may be vulnerable to path traversal and more.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="untrusted_heap_allocation">UNTRUSTED_HEAP_ALLOCATION<a href="#untrusted_heap_allocation" class="hash-link" aria-label="Direct link to UNTRUSTED_HEAP_ALLOCATION" title="Direct link to UNTRUSTED_HEAP_ALLOCATION">â€‹</a></h2>
<p><em>Reported as &quot;Untrusted Heap Allocation&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>Untrusted data of any kind flowing to heap allocation. this can cause crashes or DOS.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="untrusted_intent_creation">UNTRUSTED_INTENT_CREATION<a href="#untrusted_intent_creation" class="hash-link" aria-label="Direct link to UNTRUSTED_INTENT_CREATION" title="Direct link to UNTRUSTED_INTENT_CREATION">â€‹</a></h2>
<p><em>Reported as &quot;Untrusted Intent Creation&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>Creating an Intent from user-controlled data.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="untrusted_url_risk">UNTRUSTED_URL_RISK<a href="#untrusted_url_risk" class="hash-link" aria-label="Direct link to UNTRUSTED_URL_RISK" title="Direct link to UNTRUSTED_URL_RISK">â€‹</a></h2>
<p><em>Reported as &quot;Untrusted Url Risk&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>Untrusted flag, environment variable, or file data flowing to URL.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="untrusted_variable_length_array">UNTRUSTED_VARIABLE_LENGTH_ARRAY<a href="#untrusted_variable_length_array" class="hash-link" aria-label="Direct link to UNTRUSTED_VARIABLE_LENGTH_ARRAY" title="Direct link to UNTRUSTED_VARIABLE_LENGTH_ARRAY">â€‹</a></h2>
<p><em>Reported as &quot;Untrusted Variable Length Array&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>Untrusted data of any kind flowing to stack buffer allocation. Trying to allocate a stack buffer that&#x27;s too large will cause a stack overflow.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="user_controlled_sql_risk">USER_CONTROLLED_SQL_RISK<a href="#user_controlled_sql_risk" class="hash-link" aria-label="Direct link to USER_CONTROLLED_SQL_RISK" title="Direct link to USER_CONTROLLED_SQL_RISK">â€‹</a></h2>
<p><em>Reported as &quot;User Controlled Sql Risk&quot; by <a href="/docs/checker-quandary">quandary</a>.</em></p>
<p>Untrusted data flows to SQL (no injection risk).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use_after_delete">USE_AFTER_DELETE<a href="#use_after_delete" class="hash-link" aria-label="Direct link to USE_AFTER_DELETE" title="Direct link to USE_AFTER_DELETE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#memory-error">Memory error</a>. Reported as &quot;Use After Delete&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>An address that was invalidated by a call to <code>delete</code> in C++ is dereferenced.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use_after_delete_latent">USE_AFTER_DELETE_LATENT<a href="#use_after_delete_latent" class="hash-link" aria-label="Direct link to USE_AFTER_DELETE_LATENT" title="Direct link to USE_AFTER_DELETE_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#memory-error">Memory error</a>. Reported as &quot;Use After Delete Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#use_after_delete">USE_AFTER_DELETE</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use_after_free">USE_AFTER_FREE<a href="#use_after_free" class="hash-link" aria-label="Direct link to USE_AFTER_FREE" title="Direct link to USE_AFTER_FREE">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#memory-error">Memory error</a>. Reported as &quot;Use After Free&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>An address that was invalidated by a call to <code>free</code> in C is dereferenced.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use_after_free_latent">USE_AFTER_FREE_LATENT<a href="#use_after_free_latent" class="hash-link" aria-label="Direct link to USE_AFTER_FREE_LATENT" title="Direct link to USE_AFTER_FREE_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#memory-error">Memory error</a>. Reported as &quot;Use After Free Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#use_after_free">USE_AFTER_FREE</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use_after_lifetime">USE_AFTER_LIFETIME<a href="#use_after_lifetime" class="hash-link" aria-label="Direct link to USE_AFTER_LIFETIME" title="Direct link to USE_AFTER_LIFETIME">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#memory-error">Memory error</a>. Reported as &quot;Use After Lifetime&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>The lifetime of an object has ended but that object is being
accessed. For example, the address of a variable holding a C++ object
is accessed after the variable has gone out of scope:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     X</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// new scope</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       X x </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">X</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       p </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">x</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// x has gone out of scope</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">     p</span><span class="token operator" style="color:rgb(137, 221, 255)">-&gt;</span><span class="token function" style="color:rgb(130, 170, 255)">method</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// ERROR: you should not access *p after x has gone out of scope</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="use_after_lifetime_latent">USE_AFTER_LIFETIME_LATENT<a href="#use_after_lifetime_latent" class="hash-link" aria-label="Direct link to USE_AFTER_LIFETIME_LATENT" title="Direct link to USE_AFTER_LIFETIME_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#memory-error">Memory error</a>. Reported as &quot;Use After Lifetime Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#use_after_lifetime">USE_AFTER_LIFETIME</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vector_invalidation">VECTOR_INVALIDATION<a href="#vector_invalidation" class="hash-link" aria-label="Direct link to VECTOR_INVALIDATION" title="Direct link to VECTOR_INVALIDATION">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#memory-error">Memory error</a>. Reported as &quot;Vector Invalidation&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>An address pointing into a C++ <code>std::vector</code> might have become
invalid. This can happen when an address is taken into a vector, then
the vector is mutated in a way that might invalidate the address, for
example by adding elements to the vector, which might trigger a
re-allocation of the entire vector contents (thereby invalidating the
pointers into the previous location of the contents).</p>
<p>For example:</p>
<div class="language-cpp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-cpp codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">void</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">deref_vector_element_after_push_back_bad</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">std</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">vector</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain"> vec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> elt </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;</span><span class="token plain">vec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token keyword" style="font-style:italic">int</span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain"> y </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> elt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  vec</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">push_back</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token number" style="color:rgb(247, 140, 108)">42</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// if the array backing the vector was full already, this</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// will re-allocate it and copy the previous contents</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// into the new array, then delete the previous array</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  std</span><span class="token double-colon punctuation" style="color:rgb(199, 146, 234)">::</span><span class="token plain">cout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">*</span><span class="token plain">y </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;&lt;</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;\n&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// bad: y might be invalid</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="vector_invalidation_latent">VECTOR_INVALIDATION_LATENT<a href="#vector_invalidation_latent" class="hash-link" aria-label="Direct link to VECTOR_INVALIDATION_LATENT" title="Direct link to VECTOR_INVALIDATION_LATENT">â€‹</a></h2>
<p><em>Category: <a href="/docs/all-categories#memory-error">Memory error</a>. Reported as &quot;Vector Invalidation Latent&quot; by <a href="/docs/checker-pulse">pulse</a>.</em></p>
<p>A latent <a href="#vector_invalidation">VECTOR_INVALIDATION</a>. See the <a href="/docs/checker-pulse#latent-issues">documentation on Pulse latent issues</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="weak_self_in_no_escape_block">WEAK_SELF_IN_NO_ESCAPE_BLOCK<a href="#weak_self_in_no_escape_block" class="hash-link" aria-label="Direct link to WEAK_SELF_IN_NO_ESCAPE_BLOCK" title="Direct link to WEAK_SELF_IN_NO_ESCAPE_BLOCK">â€‹</a></h2>
<p><em>Reported as &quot;Weak Self In No Escape Block&quot; by <a href="/docs/checker-self-in-block">self-in-block</a>.</em></p>
<p>This check reports when <code>weakSelf</code> (a weak pointer to <code>self</code>) is used in
a block, and this block is passed to a &quot;no escaping&quot; method. This means that
the block passed to that method won&#x27;t be leaving the current scope, this is
marked with the annotation <code>NS_NOESCAPE</code>.</p>
<p>The issue here is that, because the block is &quot;no escaping&quot;, there is no need to use
<code>weakSelf</code> and <code>strongSelf</code> but we can just use <code>self</code>. This has the advantage of
not needing to deal with the added complexity of weak pointers, and it simplifies the
code.</p>
<p>Example:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  __weak </span><span class="token function" style="color:rgb(130, 170, 255)">__typeof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> weakSelf </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">self</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token keyword" style="font-style:italic">self</span><span class="token plain"> foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">//foo&#x27;s first parameter is annotates with `NS_NOESCAPE`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain">weakSelf bar</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<p><strong>Action</strong>:</p>
<p>Replace <code>weakSelf</code> with <code>self</code>:</p>
<div class="language-objectivec codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-objectivec codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token keyword" style="font-style:italic">self</span><span class="token plain"> foo</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token operator" style="color:rgb(137, 221, 255)">^</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token keyword" style="font-style:italic">self</span><span class="token plain"> bar</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre></div></div>
<p><em>Limitations:</em> To keep this check simple and intra-procedural, we rely on names to find <code>weakSelf</code>:
we assume that any captured weak pointer whose name contains &quot;self&quot; is a weak reference to <code>self</code>.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/all-categories"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">List of all categories of issue types</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/checker-annotation-reachability"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Annotation Reachability</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#arbitrary_code_execution_under_lock" class="table-of-contents__link toc-highlight">ARBITRARY_CODE_EXECUTION_UNDER_LOCK</a></li><li><a href="#bad_arg" class="table-of-contents__link toc-highlight">BAD_ARG</a></li><li><a href="#bad_arg_latent" class="table-of-contents__link toc-highlight">BAD_ARG_LATENT</a></li><li><a href="#bad_generator" class="table-of-contents__link toc-highlight">BAD_GENERATOR</a></li><li><a href="#bad_generator_latent" class="table-of-contents__link toc-highlight">BAD_GENERATOR_LATENT</a></li><li><a href="#bad_key" class="table-of-contents__link toc-highlight">BAD_KEY</a></li><li><a href="#bad_key_latent" class="table-of-contents__link toc-highlight">BAD_KEY_LATENT</a></li><li><a href="#bad_map" class="table-of-contents__link toc-highlight">BAD_MAP</a></li><li><a href="#bad_map_latent" class="table-of-contents__link toc-highlight">BAD_MAP_LATENT</a></li><li><a href="#bad_record" class="table-of-contents__link toc-highlight">BAD_RECORD</a></li><li><a href="#bad_record_latent" class="table-of-contents__link toc-highlight">BAD_RECORD_LATENT</a></li><li><a href="#bad_return" class="table-of-contents__link toc-highlight">BAD_RETURN</a></li><li><a href="#bad_return_latent" class="table-of-contents__link toc-highlight">BAD_RETURN_LATENT</a></li><li><a href="#biabduction_memory_leak" class="table-of-contents__link toc-highlight">BIABDUCTION_MEMORY_LEAK</a></li><li><a href="#biabduction_retain_cycle" class="table-of-contents__link toc-highlight">BIABDUCTION_RETAIN_CYCLE</a></li><li><a href="#block_parameter_not_null_checked" class="table-of-contents__link toc-highlight">BLOCK_PARAMETER_NOT_NULL_CHECKED</a></li><li><a href="#buffer_overrun_l1" class="table-of-contents__link toc-highlight">BUFFER_OVERRUN_L1</a></li><li><a href="#buffer_overrun_l2" class="table-of-contents__link toc-highlight">BUFFER_OVERRUN_L2</a></li><li><a href="#buffer_overrun_l3" class="table-of-contents__link toc-highlight">BUFFER_OVERRUN_L3</a></li><li><a href="#buffer_overrun_l4" class="table-of-contents__link toc-highlight">BUFFER_OVERRUN_L4</a></li><li><a href="#buffer_overrun_l5" class="table-of-contents__link toc-highlight">BUFFER_OVERRUN_L5</a></li><li><a href="#buffer_overrun_s2" class="table-of-contents__link toc-highlight">BUFFER_OVERRUN_S2</a></li><li><a href="#buffer_overrun_u5" class="table-of-contents__link toc-highlight">BUFFER_OVERRUN_U5</a></li><li><a href="#captured_strong_self" class="table-of-contents__link toc-highlight">CAPTURED_STRONG_SELF</a></li><li><a href="#checkers_allocates_memory" class="table-of-contents__link toc-highlight">CHECKERS_ALLOCATES_MEMORY</a></li><li><a href="#checkers_annotation_reachability_error" class="table-of-contents__link toc-highlight">CHECKERS_ANNOTATION_REACHABILITY_ERROR</a></li><li><a href="#checkers_calls_expensive_method" class="table-of-contents__link toc-highlight">CHECKERS_CALLS_EXPENSIVE_METHOD</a></li><li><a href="#checkers_expensive_overrides_unannotated" class="table-of-contents__link toc-highlight">CHECKERS_EXPENSIVE_OVERRIDES_UNANNOTATED</a></li><li><a href="#checkers_fragment_retains_view" class="table-of-contents__link toc-highlight">CHECKERS_FRAGMENT_RETAINS_VIEW</a></li><li><a href="#checkers_printf_args" class="table-of-contents__link toc-highlight">CHECKERS_PRINTF_ARGS</a></li><li><a href="#config_impact" class="table-of-contents__link toc-highlight">CONFIG_IMPACT</a></li><li><a href="#config_impact_strict" class="table-of-contents__link toc-highlight">CONFIG_IMPACT_STRICT</a></li><li><a href="#config_usage" class="table-of-contents__link toc-highlight">CONFIG_USAGE</a></li><li><a href="#constant_address_dereference" class="table-of-contents__link toc-highlight">CONSTANT_ADDRESS_DEREFERENCE</a></li><li><a href="#constant_address_dereference_latent" class="table-of-contents__link toc-highlight">CONSTANT_ADDRESS_DEREFERENCE_LATENT</a></li><li><a href="#create_intent_from_uri" class="table-of-contents__link toc-highlight">CREATE_INTENT_FROM_URI</a></li><li><a href="#cross_site_scripting" class="table-of-contents__link toc-highlight">CROSS_SITE_SCRIPTING</a></li><li><a href="#cxx_ref_captured_in_block" class="table-of-contents__link toc-highlight">CXX_REF_CAPTURED_IN_BLOCK</a></li><li><a href="#dangling_pointer_dereference" class="table-of-contents__link toc-highlight">DANGLING_POINTER_DEREFERENCE</a></li><li><a href="#datalog_fact" class="table-of-contents__link toc-highlight">DATALOG_FACT</a></li><li><a href="#data_flow_to_sink" class="table-of-contents__link toc-highlight">DATA_FLOW_TO_SINK</a></li><li><a href="#deadlock" class="table-of-contents__link toc-highlight">DEADLOCK</a></li><li><a href="#dead_store" class="table-of-contents__link toc-highlight">DEAD_STORE</a></li><li><a href="#divide_by_zero" class="table-of-contents__link toc-highlight">DIVIDE_BY_ZERO</a></li><li><a href="#empty_vector_access" class="table-of-contents__link toc-highlight">EMPTY_VECTOR_ACCESS</a></li><li><a href="#execution_time_complexity_increase" class="table-of-contents__link toc-highlight">EXECUTION_TIME_COMPLEXITY_INCREASE</a></li><li><a href="#execution_time_complexity_increase_ui_thread" class="table-of-contents__link toc-highlight">EXECUTION_TIME_COMPLEXITY_INCREASE_UI_THREAD</a></li><li><a href="#execution_time_unreachable_at_exit" class="table-of-contents__link toc-highlight">EXECUTION_TIME_UNREACHABLE_AT_EXIT</a></li><li><a href="#expensive_execution_time" class="table-of-contents__link toc-highlight">EXPENSIVE_EXECUTION_TIME</a></li><li><a href="#expensive_loop_invariant_call" class="table-of-contents__link toc-highlight">EXPENSIVE_LOOP_INVARIANT_CALL</a></li><li><a href="#exposed_insecure_intent_handling" class="table-of-contents__link toc-highlight">EXPOSED_INSECURE_INTENT_HANDLING</a></li><li><a href="#guardedby_violation" class="table-of-contents__link toc-highlight">GUARDEDBY_VIOLATION</a></li><li><a href="#impure_function" class="table-of-contents__link toc-highlight">IMPURE_FUNCTION</a></li><li><a href="#inefficient_keyset_iterator" class="table-of-contents__link toc-highlight">INEFFICIENT_KEYSET_ITERATOR</a></li><li><a href="#inferbo_alloc_is_big" class="table-of-contents__link toc-highlight">INFERBO_ALLOC_IS_BIG</a></li><li><a href="#inferbo_alloc_is_negative" class="table-of-contents__link toc-highlight">INFERBO_ALLOC_IS_NEGATIVE</a></li><li><a href="#inferbo_alloc_is_zero" class="table-of-contents__link toc-highlight">INFERBO_ALLOC_IS_ZERO</a></li><li><a href="#inferbo_alloc_may_be_big" class="table-of-contents__link toc-highlight">INFERBO_ALLOC_MAY_BE_BIG</a></li><li><a href="#inferbo_alloc_may_be_negative" class="table-of-contents__link toc-highlight">INFERBO_ALLOC_MAY_BE_NEGATIVE</a></li><li><a href="#infinite_execution_time" class="table-of-contents__link toc-highlight">INFINITE_EXECUTION_TIME</a><ul><li><a href="#example-1-t-due-to-expressivity" class="table-of-contents__link toc-highlight">Example 1: T due to expressivity</a></li><li><a href="#example-2-t-due-to-unmodeled-calls" class="table-of-contents__link toc-highlight">Example 2: T due to unmodeled calls</a></li><li><a href="#example-3-t-due-to-calling-another-t-costed-function" class="table-of-contents__link toc-highlight">Example 3: T due to calling another T-costed function</a></li></ul></li><li><a href="#insecure_intent_handling" class="table-of-contents__link toc-highlight">INSECURE_INTENT_HANDLING</a></li><li><a href="#integer_overflow_l1" class="table-of-contents__link toc-highlight">INTEGER_OVERFLOW_L1</a></li><li><a href="#integer_overflow_l2" class="table-of-contents__link toc-highlight">INTEGER_OVERFLOW_L2</a></li><li><a href="#integer_overflow_l5" class="table-of-contents__link toc-highlight">INTEGER_OVERFLOW_L5</a></li><li><a href="#integer_overflow_u5" class="table-of-contents__link toc-highlight">INTEGER_OVERFLOW_U5</a></li><li><a href="#interface_not_thread_safe" class="table-of-contents__link toc-highlight">INTERFACE_NOT_THREAD_SAFE</a></li><li><a href="#invalid_sil" class="table-of-contents__link toc-highlight">INVALID_SIL</a></li><li><a href="#invariant_call" class="table-of-contents__link toc-highlight">INVARIANT_CALL</a></li><li><a href="#ipc_on_ui_thread" class="table-of-contents__link toc-highlight">IPC_ON_UI_THREAD</a></li><li><a href="#javascript_injection" class="table-of-contents__link toc-highlight">JAVASCRIPT_INJECTION</a></li><li><a href="#lab_resource_leak" class="table-of-contents__link toc-highlight">LAB_RESOURCE_LEAK</a></li><li><a href="#lockless_violation" class="table-of-contents__link toc-highlight">LOCKLESS_VIOLATION</a></li><li><a href="#lock_consistency_violation" class="table-of-contents__link toc-highlight">LOCK_CONSISTENCY_VIOLATION</a><ul><li><a href="#fixing-lock-consistency-violation-reports" class="table-of-contents__link toc-highlight">Fixing Lock Consistency Violation reports</a></li></ul></li><li><a href="#logging_private_data" class="table-of-contents__link toc-highlight">LOGGING_PRIVATE_DATA</a></li><li><a href="#memory_leak_c" class="table-of-contents__link toc-highlight">MEMORY_LEAK_C</a><ul><li><a href="#memory-leak-in-c" class="table-of-contents__link toc-highlight">Memory leak in C</a></li><li><a href="#memory-leak-in-objective-c" class="table-of-contents__link toc-highlight">Memory leak in Objective-C</a></li></ul></li><li><a href="#memory_leak_cpp" class="table-of-contents__link toc-highlight">MEMORY_LEAK_CPP</a></li><li><a href="#missing_required_prop" class="table-of-contents__link toc-highlight">MISSING_REQUIRED_PROP</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a></li><li><a href="#mixed_self_weakself" class="table-of-contents__link toc-highlight">MIXED_SELF_WEAKSELF</a></li><li><a href="#modifies_immutable" class="table-of-contents__link toc-highlight">MODIFIES_IMMUTABLE</a></li><li><a href="#multiple_weakself" class="table-of-contents__link toc-highlight">MULTIPLE_WEAKSELF</a></li><li><a href="#mutual_recursion_cycle" class="table-of-contents__link toc-highlight">MUTUAL_RECURSION_CYCLE</a></li><li><a href="#nil_block_call" class="table-of-contents__link toc-highlight">NIL_BLOCK_CALL</a></li><li><a href="#nil_block_call_latent" class="table-of-contents__link toc-highlight">NIL_BLOCK_CALL_LATENT</a></li><li><a href="#nil_insertion_into_collection" class="table-of-contents__link toc-highlight">NIL_INSERTION_INTO_COLLECTION</a><ul><li><a href="#arrays" class="table-of-contents__link toc-highlight">Arrays</a></li><li><a href="#dictionaries" class="table-of-contents__link toc-highlight">Dictionaries</a></li></ul></li><li><a href="#nil_insertion_into_collection_latent" class="table-of-contents__link toc-highlight">NIL_INSERTION_INTO_COLLECTION_LATENT</a></li><li><a href="#nil_messaging_to_non_pod" class="table-of-contents__link toc-highlight">NIL_MESSAGING_TO_NON_POD</a></li><li><a href="#nil_messaging_to_non_pod_latent" class="table-of-contents__link toc-highlight">NIL_MESSAGING_TO_NON_POD_LATENT</a></li><li><a href="#no_matching_branch_in_try" class="table-of-contents__link toc-highlight">NO_MATCHING_BRANCH_IN_TRY</a></li><li><a href="#no_matching_branch_in_try_latent" class="table-of-contents__link toc-highlight">NO_MATCHING_BRANCH_IN_TRY_LATENT</a></li><li><a href="#no_matching_case_clause" class="table-of-contents__link toc-highlight">NO_MATCHING_CASE_CLAUSE</a></li><li><a href="#no_matching_case_clause_latent" class="table-of-contents__link toc-highlight">NO_MATCHING_CASE_CLAUSE_LATENT</a></li><li><a href="#no_matching_else_clause" class="table-of-contents__link toc-highlight">NO_MATCHING_ELSE_CLAUSE</a></li><li><a href="#no_matching_else_clause_latent" class="table-of-contents__link toc-highlight">NO_MATCHING_ELSE_CLAUSE_LATENT</a></li><li><a href="#no_matching_function_clause" class="table-of-contents__link toc-highlight">NO_MATCHING_FUNCTION_CLAUSE</a></li><li><a href="#no_matching_function_clause_latent" class="table-of-contents__link toc-highlight">NO_MATCHING_FUNCTION_CLAUSE_LATENT</a></li><li><a href="#no_match_of_rhs" class="table-of-contents__link toc-highlight">NO_MATCH_OF_RHS</a></li><li><a href="#no_match_of_rhs_latent" class="table-of-contents__link toc-highlight">NO_MATCH_OF_RHS_LATENT</a></li><li><a href="#no_true_branch_in_if" class="table-of-contents__link toc-highlight">NO_TRUE_BRANCH_IN_IF</a></li><li><a href="#no_true_branch_in_if_latent" class="table-of-contents__link toc-highlight">NO_TRUE_BRANCH_IN_IF_LATENT</a></li><li><a href="#nullptr_dereference" class="table-of-contents__link toc-highlight">NULLPTR_DEREFERENCE</a><ul><li><a href="#null-dereference-in-java" class="table-of-contents__link toc-highlight">Null dereference in Java</a></li><li><a href="#null-dereference-in-c" class="table-of-contents__link toc-highlight">Null dereference in C</a></li><li><a href="#null-dereference-in-objective-c" class="table-of-contents__link toc-highlight">Null dereference in Objective-C</a></li></ul></li><li><a href="#nullptr_dereference_in_nullsafe_class" class="table-of-contents__link toc-highlight">NULLPTR_DEREFERENCE_IN_NULLSAFE_CLASS</a><ul><li><a href="#null-dereference-in-java-1" class="table-of-contents__link toc-highlight">Null dereference in Java</a></li><li><a href="#null-dereference-in-c-1" class="table-of-contents__link toc-highlight">Null dereference in C</a></li><li><a href="#null-dereference-in-objective-c-1" class="table-of-contents__link toc-highlight">Null dereference in Objective-C</a></li></ul></li><li><a href="#nullptr_dereference_in_nullsafe_class_latent" class="table-of-contents__link toc-highlight">NULLPTR_DEREFERENCE_IN_NULLSAFE_CLASS_LATENT</a></li><li><a href="#nullptr_dereference_latent" class="table-of-contents__link toc-highlight">NULLPTR_DEREFERENCE_LATENT</a></li><li><a href="#null_argument" class="table-of-contents__link toc-highlight">NULL_ARGUMENT</a></li><li><a href="#null_argument_latent" class="table-of-contents__link toc-highlight">NULL_ARGUMENT_LATENT</a></li><li><a href="#null_dereference" class="table-of-contents__link toc-highlight">NULL_DEREFERENCE</a></li><li><a href="#optional_empty_access" class="table-of-contents__link toc-highlight">OPTIONAL_EMPTY_ACCESS</a></li><li><a href="#optional_empty_access_latent" class="table-of-contents__link toc-highlight">OPTIONAL_EMPTY_ACCESS_LATENT</a></li><li><a href="#premature_nil_termination_argument" class="table-of-contents__link toc-highlight">PREMATURE_NIL_TERMINATION_ARGUMENT</a></li><li><a href="#pulse_cannot_instantiate_abstract_class" class="table-of-contents__link toc-highlight">PULSE_CANNOT_INSTANTIATE_ABSTRACT_CLASS</a></li><li><a href="#pulse_const_refable" class="table-of-contents__link toc-highlight">PULSE_CONST_REFABLE</a></li><li><a href="#pulse_dict_missing_key" class="table-of-contents__link toc-highlight">PULSE_DICT_MISSING_KEY</a></li><li><a href="#pulse_dynamic_type_mismatch" class="table-of-contents__link toc-highlight">PULSE_DYNAMIC_TYPE_MISMATCH</a></li><li><a href="#pulse_readonly_shared_ptr_param" class="table-of-contents__link toc-highlight">PULSE_READONLY_SHARED_PTR_PARAM</a></li><li><a href="#pulse_reference_stability" class="table-of-contents__link toc-highlight">PULSE_REFERENCE_STABILITY</a></li><li><a href="#pulse_resource_leak" class="table-of-contents__link toc-highlight">PULSE_RESOURCE_LEAK</a></li><li><a href="#pulse_transitive_access" class="table-of-contents__link toc-highlight">PULSE_TRANSITIVE_ACCESS</a></li><li><a href="#pulse_unawaited_awaitable" class="table-of-contents__link toc-highlight">PULSE_UNAWAITED_AWAITABLE</a></li><li><a href="#pulse_uninitialized_const" class="table-of-contents__link toc-highlight">PULSE_UNINITIALIZED_CONST</a></li><li><a href="#pulse_uninitialized_value" class="table-of-contents__link toc-highlight">PULSE_UNINITIALIZED_VALUE</a></li><li><a href="#pulse_unnecessary_copy" class="table-of-contents__link toc-highlight">PULSE_UNNECESSARY_COPY</a></li><li><a href="#pulse_unnecessary_copy_assignment" class="table-of-contents__link toc-highlight">PULSE_UNNECESSARY_COPY_ASSIGNMENT</a></li><li><a href="#pulse_unnecessary_copy_assignment_const" class="table-of-contents__link toc-highlight">PULSE_UNNECESSARY_COPY_ASSIGNMENT_CONST</a></li><li><a href="#pulse_unnecessary_copy_assignment_movable" class="table-of-contents__link toc-highlight">PULSE_UNNECESSARY_COPY_ASSIGNMENT_MOVABLE</a></li><li><a href="#pulse_unnecessary_copy_intermediate" class="table-of-contents__link toc-highlight">PULSE_UNNECESSARY_COPY_INTERMEDIATE</a></li><li><a href="#pulse_unnecessary_copy_intermediate_const" class="table-of-contents__link toc-highlight">PULSE_UNNECESSARY_COPY_INTERMEDIATE_CONST</a></li><li><a href="#pulse_unnecessary_copy_movable" class="table-of-contents__link toc-highlight">PULSE_UNNECESSARY_COPY_MOVABLE</a></li><li><a href="#pulse_unnecessary_copy_optional" class="table-of-contents__link toc-highlight">PULSE_UNNECESSARY_COPY_OPTIONAL</a></li><li><a href="#pulse_unnecessary_copy_optional_const" class="table-of-contents__link toc-highlight">PULSE_UNNECESSARY_COPY_OPTIONAL_CONST</a></li><li><a href="#pulse_unnecessary_copy_return" class="table-of-contents__link toc-highlight">PULSE_UNNECESSARY_COPY_RETURN</a></li><li><a href="#pure_function" class="table-of-contents__link toc-highlight">PURE_FUNCTION</a></li><li><a href="#quandary_taint_error" class="table-of-contents__link toc-highlight">QUANDARY_TAINT_ERROR</a></li><li><a href="#regex_op_on_ui_thread" class="table-of-contents__link toc-highlight">REGEX_OP_ON_UI_THREAD</a></li><li><a href="#resource_leak" class="table-of-contents__link toc-highlight">RESOURCE_LEAK</a><ul><li><a href="#resource-leak-in-c" class="table-of-contents__link toc-highlight">Resource leak in C</a></li><li><a href="#resource-leak-in-java" class="table-of-contents__link toc-highlight">Resource leak in Java</a></li><li><a href="#basics-and-standard-idiom" class="table-of-contents__link toc-highlight">Basics and Standard Idiom</a></li><li><a href="#nested_allocations" class="table-of-contents__link toc-highlight">Nested_Allocations</a></li><li><a href="#allocation-of-jsonparser-and-cursor-resources" class="table-of-contents__link toc-highlight">Allocation of JSonParser and Cursor resources</a></li><li><a href="#escaping-resources-and-exceptions" class="table-of-contents__link toc-highlight">Escaping resources and exceptions</a></li><li><a href="#java-7s-try-with-resources" class="table-of-contents__link toc-highlight">Java 7&#39;s try-with-resources</a></li></ul></li><li><a href="#retain_cycle" class="table-of-contents__link toc-highlight">RETAIN_CYCLE</a></li><li><a href="#retain_cycle_no_weak_info" class="table-of-contents__link toc-highlight">RETAIN_CYCLE_NO_WEAK_INFO</a></li><li><a href="#scope_leakage" class="table-of-contents__link toc-highlight">SCOPE_LEAKAGE</a></li><li><a href="#sensitive_data_flow" class="table-of-contents__link toc-highlight">SENSITIVE_DATA_FLOW</a></li><li><a href="#shell_injection" class="table-of-contents__link toc-highlight">SHELL_INJECTION</a></li><li><a href="#shell_injection_risk" class="table-of-contents__link toc-highlight">SHELL_INJECTION_RISK</a></li><li><a href="#sql_injection" class="table-of-contents__link toc-highlight">SQL_INJECTION</a></li><li><a href="#sql_injection_risk" class="table-of-contents__link toc-highlight">SQL_INJECTION_RISK</a></li><li><a href="#stack_variable_address_escape" class="table-of-contents__link toc-highlight">STACK_VARIABLE_ADDRESS_ESCAPE</a></li><li><a href="#starvation" class="table-of-contents__link toc-highlight">STARVATION</a></li><li><a href="#static_initialization_order_fiasco" class="table-of-contents__link toc-highlight">STATIC_INITIALIZATION_ORDER_FIASCO</a></li><li><a href="#strict_mode_violation" class="table-of-contents__link toc-highlight">STRICT_MODE_VIOLATION</a></li><li><a href="#strong_self_not_checked" class="table-of-contents__link toc-highlight">STRONG_SELF_NOT_CHECKED</a></li><li><a href="#taint_error" class="table-of-contents__link toc-highlight">TAINT_ERROR</a></li><li><a href="#thread_safety_violation" class="table-of-contents__link toc-highlight">THREAD_SAFETY_VIOLATION</a><ul><li><a href="#thread-safety-what-is-a-data-race" class="table-of-contents__link toc-highlight">Thread-safety: What is a data race</a></li><li><a href="#thread-safety-potential-fixes" class="table-of-contents__link toc-highlight">Thread-safety: Potential fixes</a></li><li><a href="#thread-safety-conditions-checked-before-reporting" class="table-of-contents__link toc-highlight">Thread-safety: Conditions checked before reporting</a></li><li><a href="#thread-safety-thread-annotations-recognized-by-racerd" class="table-of-contents__link toc-highlight">Thread-safety: Thread annotations recognized by RacerD</a></li><li><a href="#thread-safety-other-annotations-and-what-they-do" class="table-of-contents__link toc-highlight">Thread-safety: Other annotations and what they do</a></li></ul></li><li><a href="#topl_error" class="table-of-contents__link toc-highlight">TOPL_ERROR</a></li><li><a href="#topl_error_latent" class="table-of-contents__link toc-highlight">TOPL_ERROR_LATENT</a></li><li><a href="#untrusted_buffer_access" class="table-of-contents__link toc-highlight">UNTRUSTED_BUFFER_ACCESS</a></li><li><a href="#untrusted_deserialization" class="table-of-contents__link toc-highlight">UNTRUSTED_DESERIALIZATION</a></li><li><a href="#untrusted_deserialization_risk" class="table-of-contents__link toc-highlight">UNTRUSTED_DESERIALIZATION_RISK</a></li><li><a href="#untrusted_environment_change_risk" class="table-of-contents__link toc-highlight">UNTRUSTED_ENVIRONMENT_CHANGE_RISK</a></li><li><a href="#untrusted_file" class="table-of-contents__link toc-highlight">UNTRUSTED_FILE</a></li><li><a href="#untrusted_file_risk" class="table-of-contents__link toc-highlight">UNTRUSTED_FILE_RISK</a></li><li><a href="#untrusted_heap_allocation" class="table-of-contents__link toc-highlight">UNTRUSTED_HEAP_ALLOCATION</a></li><li><a href="#untrusted_intent_creation" class="table-of-contents__link toc-highlight">UNTRUSTED_INTENT_CREATION</a></li><li><a href="#untrusted_url_risk" class="table-of-contents__link toc-highlight">UNTRUSTED_URL_RISK</a></li><li><a href="#untrusted_variable_length_array" class="table-of-contents__link toc-highlight">UNTRUSTED_VARIABLE_LENGTH_ARRAY</a></li><li><a href="#user_controlled_sql_risk" class="table-of-contents__link toc-highlight">USER_CONTROLLED_SQL_RISK</a></li><li><a href="#use_after_delete" class="table-of-contents__link toc-highlight">USE_AFTER_DELETE</a></li><li><a href="#use_after_delete_latent" class="table-of-contents__link toc-highlight">USE_AFTER_DELETE_LATENT</a></li><li><a href="#use_after_free" class="table-of-contents__link toc-highlight">USE_AFTER_FREE</a></li><li><a href="#use_after_free_latent" class="table-of-contents__link toc-highlight">USE_AFTER_FREE_LATENT</a></li><li><a href="#use_after_lifetime" class="table-of-contents__link toc-highlight">USE_AFTER_LIFETIME</a></li><li><a href="#use_after_lifetime_latent" class="table-of-contents__link toc-highlight">USE_AFTER_LIFETIME_LATENT</a></li><li><a href="#vector_invalidation" class="table-of-contents__link toc-highlight">VECTOR_INVALIDATION</a></li><li><a href="#vector_invalidation_latent" class="table-of-contents__link toc-highlight">VECTOR_INVALIDATION_LATENT</a></li><li><a href="#weak_self_in_no_escape_block" class="table-of-contents__link toc-highlight">WEAK_SELF_IN_NO_ESCAPE_BLOCK</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/infer-workflow">User Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/about-Infer">Foundations</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/all-issue-types">Bug Types Reference</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/absint-framework">Contribute</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/support">Support</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/infer" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/fbinfer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/inferstaticanalyzer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 Facebook, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>