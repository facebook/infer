<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-separation-logic-and-bi-abduction">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Separation logic and bi-abduction | Infer</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://fbinfer.com/docs/next/separation-logic-and-bi-abduction"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Separation logic and bi-abduction | Infer"><meta data-rh="true" name="description" content="- Separation logic"><meta data-rh="true" property="og:description" content="- Separation logic"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://fbinfer.com/docs/next/separation-logic-and-bi-abduction"><link data-rh="true" rel="alternate" href="https://fbinfer.com/docs/next/separation-logic-and-bi-abduction" hreflang="en"><link data-rh="true" rel="alternate" href="https://fbinfer.com/docs/next/separation-logic-and-bi-abduction" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://WXX0LT0N1W-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Infer RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Infer Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Infer" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.eb29ee50.css">
<link rel="preload" href="/assets/js/runtime~main.5d8d8b69.js" as="script">
<link rel="preload" href="/assets/js/main.36c7571a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#20232a;color:#fff" role="banner"><div class="content_knG7 announcementBarContent_xLdY">Support Ukraine ðŸ‡ºðŸ‡¦ <a target="_blank" rel="noopener noreferrer" href="https://opensource.facebook.com/support-ukraine"> Help Provide Humanitarian Aid to Ukraine</a>.</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.png" alt="Infer Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.png" alt="Infer Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Infer</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/getting-started">Docs</a><a class="navbar__item navbar__link" href="/docs/support">Support</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://twitter.com/fbinfer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://www.facebook.com/inferstaticanalyzer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/facebook/infer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/getting-started">Quick Start</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/infer-workflow">User Guide</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/all-checkers">Analyses and Issue Types</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/next/about-Infer">Foundations</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/next/about-Infer">About Infer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/next/separation-logic-and-bi-abduction">Separation logic and bi-abduction</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/absint-framework">Contribute</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/next/versions">Versions</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is unreleased documentation for <!-- -->Infer<!-- --> <b>Next</b> version.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/separation-logic-and-bi-abduction">latest version</a></b> (<!-- -->1.1.0<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Foundations</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Separation logic and bi-abduction</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: Next</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Separation logic and bi-abduction</h1></header><ul><li><a href="/docs/next/separation-logic-and-bi-abduction#separation-logic">Separation logic</a></li><li><a href="/docs/next/separation-logic-and-bi-abduction#bi-abduction">Bi-abduction</a></li><li><a href="/docs/next/separation-logic-and-bi-abduction#technical-papers">Technical papers</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="separation-logic">Separation logic<a href="#separation-logic" class="hash-link" aria-label="Direct link to Separation logic" title="Direct link to Separation logic">â€‹</a></h2><p>Separation logic is a novel kind of mathematical logic which facilitates
reasoning about mutations to computer memory. It enables scalability by breaking
reasoning into chunks corresponding to local operations on memory, and then
composing the reasoning chunks together.</p><p>Separation logic is based on a logical connective <img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20*%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q">
called the <em>separating conjunction</em> and pronounced &quot;and separately&quot;. Separation
logic formulae are interpreted over program allocated heaps. The logical formula</p><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20A*B%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> holds of a piece of program heap (a heaplet) when it can be divided into two sub-heaplets described by <img loading="lazy" src="https://math.now.sh?from=%5C%5C(A%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> and<img loading="lazy" src="https://math.now.sh?from=%5C%5C(B%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q">. For example, the formula<hr><img loading="lazy" src="https://math.now.sh?from=%5C%5C(x%20%5Cmapsto%20y%20*%20y%20%5Cmapsto%20x%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><hr><p>can be read &quot;<img loading="lazy" src="https://math.now.sh?from=%5C%5C(x%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> points to <img loading="lazy" src="https://math.now.sh?from=%5C%5C(y%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> and
separately <img loading="lazy" src="https://math.now.sh?from=%5C%5C(y%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> points to <img loading="lazy" src="https://math.now.sh?from=%5C%5C(x%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q">&quot;. This
formula describes precisely two allocated memory cells. The first cell is
allocated at the address denoted by the pointer <img loading="lazy" src="https://math.now.sh?from=%5C%5C(x%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> and the
content of this cell is the value of <img loading="lazy" src="https://math.now.sh?from=%5C%5C(y%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q">. The second cell is
allocated at the address denoted by the pointer <img loading="lazy" src="https://math.now.sh?from=%5C%5C(y%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> and the
content of this second cell is the value of <img loading="lazy" src="https://math.now.sh?from=%5C%5C(x%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q">. Crucially,
we know that there are precisely two cells because <img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20*%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q">
stipulates that they are separated and therefore the cells are allocated in two
different parts of memory. In other words, <img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20*%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> says that</p><img loading="lazy" src="https://math.now.sh?from=%5C%5C(x%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> and <img loading="lazy" src="https://math.now.sh?from=%5C%5C(y%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> do not hold the same value (i.e., these pointers are not aliased). The heaplet partitioning defined by the formula above can be visualized like so:<p><img loading="lazy" src="/assets/images/SepSplit-dca4e1fe63cb590718402c7c0c9ab7f8.jpg" width="473" height="129" class="img_ev3q"></p><p>The important thing about separating conjunction is the way that it fits
together with mutation to computer memory; reasoning about program commands
tends to work by updating <img loading="lazy" src="https://math.now.sh?from=%5C%5C(*%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q">-conjuncts in-place, mimicking
the operational in-place update of RAM.</p><p>Separation logic uses Hoare triples of the form</p><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20%5Clbrace%20pre%20%5Crbrace%20prog%20%5Clbrace%20post%20%5Crbrace%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> where<img loading="lazy" src="https://math.now.sh?from=%5C%5C(pre%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> is the precondition, <img loading="lazy" src="https://math.now.sh?from=%5C%5C(prog%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> a program part, and <img loading="lazy" src="https://math.now.sh?from=%5C%5C(post%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> the postcondition. Triples are abstract specifications of the behavior of the program. For example, we could take<hr><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20%5Clbrace%20r%20%5Cmapsto%20open%5Crbrace%20%5C%2C%20closeResource(r)%5C%2C%20%5Clbrace%20r%20%5Cmapsto%20closed%5Crbrace%20%20%5C%3B%5C%3B%5C%3B%20(spec)%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><hr><p>as a specification for a method which closes a resource given to it as a
parameter.</p><p>Now, suppose we have two resources <img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20r%5C_1%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> and</p><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20r%5C_2%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q">, described by<img loading="lazy" src="https://math.now.sh?from=%5C%5C(r%5C_1%20%5Cmapsto%20open%20*%20r%5C_2%20%5Cmapsto%20open%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> and we close the first of them. We think operationally in terms of updating the memory in place, leaving <img loading="lazy" src="https://math.now.sh?from=%5C%5C(r%5C_2%20%5Cmapsto%20open%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> alone, as described by this triple:<hr><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20%5Clbrace%20r%5C_1%20%5Cmapsto%20open%20*%20r%5C_2%20%5Cmapsto%20open%5Crbrace%20%20closeResource(r%5C_1)%20%5Clbrace%20r%5C_1%20%5Cmapsto%20closed%20*%20r%5C_2%20%5Cmapsto%20open%20%5Crbrace%20%5C%3B%5C%3B%5C%3B%20(use)%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><hr><p>What we have here is the that specification (spec) described how</p><img loading="lazy" src="https://math.now.sh?from=%5C%5C(closeResource()%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> works by mentioning only one piece of state, what is sometimes called a small specification, and in (use) we use that specification to update a larger precondition in place.<p>This is an instance of a general pattern. There is a rule that lets you go from
smaller to bigger specifications</p><hr><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20%5Cfrac%7B%5Clbrace%20pre%20%5Crbrace%20prog%20%5Clbrace%20post%20%5Crbrace%7D%7B%5Clbrace%20pre%20*%20frame%20%5Crbrace%20prog%20%5Clbrace%20post%20*%20frame%20%5Crbrace%7D%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><hr><p>Our passage from (spec) to (use) is obtained by taking</p><ul><li><img loading="lazy" src="https://math.now.sh?from=%5C%5C(pre%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> to be <img loading="lazy" src="https://math.now.sh?from=%5C%5C(r%5C_1%20%5Cmapsto%20open%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"></li><li><img loading="lazy" src="https://math.now.sh?from=%5C%5C(post%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> to be <img loading="lazy" src="https://math.now.sh?from=%5C%5C(r%5C_1%20%5Cmapsto%20closed%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q">, and</li><li><img loading="lazy" src="https://math.now.sh?from=%5C%5C(frame%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> to be <img loading="lazy" src="https://math.now.sh?from=%5C%5C(r%5C_2%20%5Cmapsto%20open%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"></li></ul><p>This rule is called the <em>frame rule</em> of separation logic. It is named after the
frame problem, a classic problem in artificial intelligence. Generally, the</p><img loading="lazy" src="https://math.now.sh?from=%5C%5C(frame%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> describes state that remains unchanged; the terminology comes from the analogy of a background scene in an animation as unchanging while the objects and characters within the scene change.<p>The frame rule is the key to the principle of local reasoning in separation
logic: reasoning and specifications should concentrate on the resources that a
program accesses (the footprint), without mentioning what doesn&#x27;t change.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="bi-abduction">Bi-abduction<a href="#bi-abduction" class="hash-link" aria-label="Direct link to Bi-abduction" title="Direct link to Bi-abduction">â€‹</a></h2><p>Bi-abduction is a form of logical inference for separation logic which automates
the key ideas about local reasoning.</p><p>Usually, logic works with validity or entailment statements like</p><hr><img loading="lazy" src="https://math.now.sh?from=%5C%5C(A%20%5Cvdash%20B%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><hr><p>which says that <img loading="lazy" src="https://math.now.sh?from=%5C%5C(A%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> implies <img loading="lazy" src="https://math.now.sh?from=%5C%5C(B%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q">. Infer
uses an extension of this inference question in an internal theorem prover while
it runs over program statements. Infer&#x27;s question</p><hr><img loading="lazy" src="https://math.now.sh?from=%5C%5C(A%20*%20%3Fantiframe%20%5Cvdash%20B%20*%20%3Fframe%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><hr><p>is called <em>bi-abduction</em>. The problem here is for the theorem prover to <i>
discover </i> a pair of frame and antiframe formulae that make the entailment
statement valid.</p><p>Global analyses of large programs are normally computational untractable.
However, bi-abduction allows to break the large analysis of a large program in
small independent analyses of its procedures. This gives Infer the ability to
scale independently of the size of the analyzed code. Moreover, by breaking the
analysis in small independent parts, when the full program is analyzed again
because of a code change the analysis results of the unchanged part of the code
can be reused and only the code change needs to be re-analyzed. This process is
called incremental analysis and it is very powerful when integrating a static
analysis tool like infer in a development environment.</p><p>In order to be able to decompose a global analysis in small independent
analyses, let&#x27;s first consider how a function call is analyzed in separation
logic. Assume we have the following spec for a function</p><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20f()%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q">:<hr><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20%5Clbrace%20pre%5C_f%20%5Crbrace%20%5C%3B%5C%3B%20f()%20%5C%3B%5C%3B%20%5Clbrace%20post%5C_f%20%5Crbrace%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><hr><p>and by analyzing the caller function, we compute that before the call of</p><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20f%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q">, the formula <img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20CallingState%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q">hold. Then to utilize the specification of <img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20f%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> the following implication must holds:<hr><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20CallingState%20%5Cvdash%20pre%5C_f%20%20%5C%3B%5C%3B%5C%3B%5C%3B%5C%3B%5C%3B%5C%3B%5C%3B%5C%3B%5C%3B%5C%3B%5C%3B%20(Function%20Call)%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><hr><p>Given that, bi-abduction is used at procedure call sites for two reasons: to
discover missing state that is needed for the above implication to hold and
allow the analysis to proceed (the antiframe) as well as state that the
procedure leaves unchanged (the frame).</p><p>To see how this works suppose we have some bare code</p><hr><img loading="lazy" src="https://math.now.sh?from=%5C%5C(closeResource(r1)%3B%20%5C%2C%20closeResource(r2)%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><hr><p>but no overall specification; we are going to describe how to discover a
pre/post spec for it. Considering the first statement and the (spec) above, the
human might say: if only we had <img loading="lazy" src="https://math.now.sh?from=%5C%5C(r1%20%5Cmapsto%20open%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> in the
precondition then we could proceed. Technically, we ask a bi-abduction question</p><hr><img loading="lazy" src="https://math.now.sh?from=%5C%5C(emp%20*%20%3Fantiframe%20%5Cvdash%20r1%20%5Cmapsto%20open%20*%20%3Fframe%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><hr><p>and we can fill this in easily by picking</p><img loading="lazy" src="https://math.now.sh?from=%5C%5C(antiframe%20%3D%20r1%20%5Cmapsto%20open%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> and<img loading="lazy" src="https://math.now.sh?from=%5C%5C(frame%20%3D%20emp%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q">, where emp means the empty state. The emp is recording that at the start we presume nothing. So we obtain the trivially true implication:<hr><img loading="lazy" src="https://math.now.sh?from=%5C%5C(emp%20*%20r1%20%5Cmapsto%20open%20%5Cvdash%20r1%20%5Cmapsto%20open%20*%20emp%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><hr><p>which, by applying logical rules, can be re-written equivalently to:</p><hr><img loading="lazy" src="https://math.now.sh?from=%5C%5C(r1%20%5Cmapsto%20open%20%5Cvdash%20r1%20%5Cmapsto%20open%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><hr><p>Notice that this satisfy the (Function Call) requirement to correctly make the
call. So let&#x27;s add that information in the pre, and while we are at it record
the information in the post of the first statement that comes from (spec).</p><hr><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20%5Clbrace%20r1%20%5Cmapsto%20open%20%20%5Crbrace%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20closeResource(r1)%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20%5Clbrace%20r1%20%5Cmapsto%20closed%20%5Crbrace%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20closeResource(r2)%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><hr><p>Now, let&#x27;s move to the second statement. Its precondition</p><img loading="lazy" src="https://math.now.sh?from=%5C%5C(r1%20%5Cmapsto%20closed%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> in the partial symbolic execution trace just given does not have the information needed by<img loading="lazy" src="https://math.now.sh?from=%5C%5C(closeResource(r2)%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q">, so we can fill that in and continue by putting <img loading="lazy" src="https://math.now.sh?from=%5C%5C(r2%20%5Cmapsto%20open%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> in the pre. While we are at it we can thread this assertion back to the beginning.<hr><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20%5Clbrace%20r1%20%5Cmapsto%20open%20*%20r2%20%5Cmapsto%20open%20%20%5Crbrace%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20closeResource(r1)%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20%5Clbrace%20r1%20%5Cmapsto%20closed%20*%20r2%20%5Cmapsto%20open%5Crbrace%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20closeResource(r2)%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><hr><p>This information on what to thread backwards can be obtained as the antiframe
part of the bi-abduction question</p><hr><img loading="lazy" src="https://math.now.sh?from=%5C%5C(r1%20%5Cmapsto%20closed%20*%20%3Fantiframe%20%5Cvdash%20r2%20%5Cmapsto%20open%20*%20%3Fframe%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><hr><p>where the solution picks</p><img loading="lazy" src="https://math.now.sh?from=%5C%5C(antiframe%20%3D%20r2%20%5Cmapsto%20open%5C%5C)%20and%20%5C%5C(frame%20%3D%20r1%20%5Cmapsto%20closed%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q">. Note that the antiframe is precisely the information missing from the precondition in order for <img loading="lazy" src="https://math.now.sh?from=%5C%5C(closeResource(r2)%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> to proceed. On the other hand, the frame <img loading="lazy" src="https://math.now.sh?from=%5C%5C(r1%20%5Cmapsto%20closed%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"> is the portion of state not changed by <img loading="lazy" src="https://math.now.sh?from=%5C%5C(closeResource(r2)%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q">; we can thread that through to the overall postconditon (as justified by the frame rule), giving us<hr><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20%5Clbrace%20r1%20%5Cmapsto%20open%20*%20r2%20%5Cmapsto%20open%20%20%5Crbrace%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20closeResource(r1)%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20%5Clbrace%20r1%20%5Cmapsto%20closed%20*%20r2%20%5Cmapsto%20open%5Crbrace%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20closeResource(r2)%20%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><img loading="lazy" src="https://math.now.sh?from=%5C%5C(%20%5Clbrace%20r1%20%5Cmapsto%20closed%20*%20r2%20%5Cmapsto%20closed%20%5Crbrace%5C%5C)&amp;color=mediumslateblue" style="height:100%;vertical-align:middle" class="img_ev3q"><hr><p>Thus, we have obtained a pre and post for this code by symbolically executing
it, using bi-abduction to discover preconditions (abduction of antiframes) as
well as untouched portions of memory (frames) as we go along.</p><p>In general, bi-abduction provides a way to infer a pre/post specs from bare
code, as long as we know specs for the primitives at the base level of the code.
The human does not need to write preconditions and postconditions for all the
procedures, which is the key to having a high level of automation. This is the
basis for how Infer works, why it can scale, and how it can analyze code changes
incrementally.</p><p>Context: The logical terminology we have been using here comes from AI and
philosophy of science. Abductive inference was introduced by the philosopher
Charles Peirce, and described as the mechanism underpinning hypothesis formation
(or, guessing what might be true about the world), the most creative part of the
scientific process. Abduction and the frame problem have both attracted
significant attention in AI. Infer uses an automated form of abduction to
generate preconditions describing the memory that a program touches (the
antiframe part above), and frame inference to discover what isn&#x27;t touched. Infer
then uses deductive reasoning to calculate a formula describing the effect of a
program, starting from the preconditions. In a sense, Infer approaches automated
reasoning about programs by mimicking what a human might do when trying to
understand a program: it abduces what the program needs, and deduces conclusions
of that. It is when the reasoning goes wrong that Infer reports a potential bug.</p><p>This description is by necessity simplified compared to what Infer actually
does. More technical information can be found in the following papers. The
descriptions in the papers are precise, but still simplified; there are many
engineering decisions not recorded there. Finally, beyond the papers, you can
read the source code if you wish!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="technical-papers">Technical papers<a href="#technical-papers" class="hash-link" aria-label="Direct link to Technical papers" title="Direct link to Technical papers">â€‹</a></h2><p>The following papers contain some of the technical background on Infer and
information on how it is used inside Facebook.</p><ul><li><a href="http://link.springer.com/chapter/10.1007%2F3-540-44802-0_1" target="_blank" rel="noopener noreferrer">Local Reasoning about Programs that Alter Data Structures.</a> An early separation logic paper which advanced ideas about local reasoning and the frame rule.</li><li><a href="http://link.springer.com/chapter/10.1007/11804192_6" target="_blank" rel="noopener noreferrer">Smallfoot: Modular Automatic Assertion Checking with Separation Logic.</a> First separation logic verification tool, introduced frame inference</li><li><a href="http://link.springer.com/chapter/10.1007%2F11691372_19" target="_blank" rel="noopener noreferrer">A Local Shape Analysis Based on Separation Logic.</a> Separation logic meets abstract interpretation; calculating loop invariants via a fixed-point computation.</li><li><a href="http://dl.acm.org/citation.cfm?id=2049700" target="_blank" rel="noopener noreferrer">Compositional Shape Analysis by Means of Bi-Abduction.</a> The bi-abduction paper.</li><li><a href="https://research.facebook.com/publications/moving-fast-with-software-verification/" target="_blank" rel="noopener noreferrer">Moving Fast with Software Verification.</a> A paper about the way we use Infer at Facebook.</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/next/about-Infer"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">About Infer</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/next/absint-framework"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Building checkers with the Infer.AI framework</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#separation-logic" class="table-of-contents__link toc-highlight">Separation logic</a></li><li><a href="#bi-abduction" class="table-of-contents__link toc-highlight">Bi-abduction</a></li><li><a href="#technical-papers" class="table-of-contents__link toc-highlight">Technical papers</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/infer-workflow">User Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/about-Infer">Foundations</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/all-issue-types">Bug Types Reference</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/absint-framework">Contribute</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/support">Support</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/infer" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/fbinfer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/inferstaticanalyzer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Privacy<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms/" target="_blank" rel="noreferrer noopener" class="footer__link-item">Terms<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 Facebook, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.5d8d8b69.js"></script>
<script src="/assets/js/main.36c7571a.js"></script>
</body>
</html>