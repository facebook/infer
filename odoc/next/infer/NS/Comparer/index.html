<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Comparer (infer.NS.Comparer)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">infer</a> &#x00BB; <a href="../index.html">NS</a> &#x00BB; Comparer</nav><header class="odoc-preamble"><h1>Module <code><span>NS.Comparer</span></code></h1><p>Singleton types for compare functions</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>('a, 'compare_a) t</span></span><span> = <span class="keyword">private</span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>A comparer <code>('a, 'compare_a) t</code> for type <code>'a</code> is a &quot;compare&quot; function of type <code>'a -&gt; 'a -&gt; int</code> tagged with a phantom type <code>'compare_a</code> acting as a singleton type denoting an individual compare function.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-S"><a href="#module-type-S" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S/index.html">S</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Make"><a href="#module-Make" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Make/index.html">Make</a></span><span> (<a href="Make/argument-1-Ord/index.html">Ord</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span>) : <a href="module-type-S/index.html">S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="module-type-S/index.html#type-t">t</a> = <a href="Make/argument-1-Ord/index.html#type-t">Ord.t</a></span></span></code></div><div class="spec-doc"><p><code>Make</code> takes a <code>compare</code> function, mints a fresh <code>compare</code> type to act as a singleton type denoting that one compare function, and returns the <code>compare</code> function at a type stamped with its singleton type. In this way, <code>Make</code> applied to two different compare functions for the same type of values yields comparers with incompatible types.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Counterfeit"><a href="#module-Counterfeit" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Counterfeit/index.html">Counterfeit</a></span><span>
  (<a href="Counterfeit/argument-1-Ord/index.html">Ord</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span>) : 
  <a href="module-type-S/index.html">S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="module-type-S/index.html#type-t">t</a> = <a href="Counterfeit/argument-1-Ord/index.html#type-t">Ord.t</a></span> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="module-type-S/index.html#type-compare">compare</a> = <a href="Counterfeit/argument-1-Ord/index.html#type-compare">Ord.compare</a></span></span></code></div><div class="spec-doc"><p><code>Counterfeit</code> takes a compare function and type and yields a comparer that asserts that the given <code>compare</code> type is a singleton for the given <code>compare</code> function. This is not checked by the type system. It is the client's responsibility to ensure that distinct types are provided for distinct compare functions. If the same type is used for multiple functions, then <code>Counterfeit</code> will produce type-compatible comparers even though the wrapped compare functions differ.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Apply"><a href="#module-Apply" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Apply/index.html">Apply</a></span><span> (<a href="Apply/argument-1-F/index.html">F</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span>) (<a href="Apply/argument-2-A/index.html">A</a> : <a href="module-type-S/index.html">S</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>Apply (F) (A)</code> takes a type <code>('a, 'compare_a) F.t</code> with a type parameter <code>'a</code> and a compare type <code>'compare_a</code> for <code>'a</code>, and a comparer <code>A</code>, and creates a comparer for <code>F.t</code> with <code>'a</code> instantiated to <code>A.t</code>.</p></div></div><div class="odoc-spec"><div class="spec module-type anchored" id="module-type-S1"><a href="#module-type-S1" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> <a href="module-type-S1/index.html">S1</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Apply1"><a href="#module-Apply1" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Apply1/index.html">Apply1</a></span><span> (<a href="Apply1/argument-1-F/index.html">F</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span>) (<a href="Apply1/argument-2-A/index.html">A</a> : <a href="module-type-S/index.html">S</a>) : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p><code>Apply1 (F) (A)</code> takes a type <code>('a, 'b, 'compare_a) F.t</code> with two type parameters <code>'a</code>, <code>'b</code> and a compare type <code>'compare_a</code> for <code>'a</code>, and a comparer <code>A</code>, and creates a comparer for <code>F.t</code> with <code>'a</code> instantiated to <code>A.t</code>.</p></div></div></div></body></html>
