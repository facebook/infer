<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Llair (infer.Llair)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> – <a href="../index.html">infer</a> &#x00BB; Llair</nav><header class="odoc-preamble"><h1>Module <code><span>Llair</span></code></h1><p>LLAIR (Low-Level Analysis Internal Representation) is an IR tailored for static analysis using a low-level model of memory.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-Loc"><a href="#module-Loc" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Loc/index.html">Loc</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Source code debug locations</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Typ"><a href="#module-Typ" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Typ/index.html">Typ</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Types</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Reg"><a href="#module-Reg" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Reg/index.html">Reg</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Variables</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Exp"><a href="#module-Exp" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Exp/index.html">Exp</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Expressions</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-FuncName"><a href="#module-FuncName" class="anchor"></a><code><span><span class="keyword">module</span> <a href="FuncName/index.html">FuncName</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Function names</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Global"><a href="#module-Global" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Global/index.html">Global</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Globals</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-GlobalDefn"><a href="#module-GlobalDefn" class="anchor"></a><code><span><span class="keyword">module</span> <a href="GlobalDefn/index.html">GlobalDefn</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Global variables</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-cct_schedule_points"><a href="#val-cct_schedule_points" class="anchor"></a><code><span><span class="keyword">val</span> cct_schedule_points : <span>bool <span class="xref-unresolved">Stdlib</span>.ref</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Builtin"><a href="#module-Builtin" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Builtin/index.html">Builtin</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Intrinsic"><a href="#module-Intrinsic" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Intrinsic/index.html">Intrinsic</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-inst"><a href="#type-inst" class="anchor"></a><code><span><span class="keyword">type</span> inst</span><span> = <span class="keyword">private</span> </span></code><ol><li id="type-inst.Move" class="def variant constructor anchored"><a href="#type-inst.Move" class="anchor"></a><code><span>| </span><span><span class="constructor">Move</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-inst.reg_exps" class="def record field anchored"><a href="#type-inst.reg_exps" class="anchor"></a><code><span>reg_exps : <span><span>(<a href="Reg/index.html#type-t">Reg.t</a> * <a href="Exp/index.html#type-t">Exp.t</a>)</span> <a href="../NS/index.html#type-iarray">NS.iarray</a></span>;</span></code></li><li id="type-inst.loc" class="def record field anchored"><a href="#type-inst.loc" class="anchor"></a><code><span>loc : <a href="Loc/index.html#type-t">Loc.t</a>;</span></code></li></ol><code><span>}</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Move each value <code>exp</code> into corresponding register <code>reg</code>. All of the moves take effect simultaneously.</p><span class="comment-delim">*)</span></div></li><li id="type-inst.Load" class="def variant constructor anchored"><a href="#type-inst.Load" class="anchor"></a><code><span>| </span><span><span class="constructor">Load</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-inst.reg" class="def record field anchored"><a href="#type-inst.reg" class="anchor"></a><code><span>reg : <a href="Reg/index.html#type-t">Reg.t</a>;</span></code></li><li id="type-inst.ptr" class="def record field anchored"><a href="#type-inst.ptr" class="anchor"></a><code><span>ptr : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-inst.len" class="def record field anchored"><a href="#type-inst.len" class="anchor"></a><code><span>len : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-inst.loc" class="def record field anchored"><a href="#type-inst.loc" class="anchor"></a><code><span>loc : <a href="Loc/index.html#type-t">Loc.t</a>;</span></code></li></ol><code><span>}</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Read a <code>len</code>-byte value from the contents of memory at address <code>ptr</code> into <code>reg</code>.</p><span class="comment-delim">*)</span></div></li><li id="type-inst.Store" class="def variant constructor anchored"><a href="#type-inst.Store" class="anchor"></a><code><span>| </span><span><span class="constructor">Store</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-inst.ptr" class="def record field anchored"><a href="#type-inst.ptr" class="anchor"></a><code><span>ptr : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-inst.exp" class="def record field anchored"><a href="#type-inst.exp" class="anchor"></a><code><span>exp : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-inst.len" class="def record field anchored"><a href="#type-inst.len" class="anchor"></a><code><span>len : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-inst.loc" class="def record field anchored"><a href="#type-inst.loc" class="anchor"></a><code><span>loc : <a href="Loc/index.html#type-t">Loc.t</a>;</span></code></li></ol><code><span>}</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Write <code>len</code>-byte value <code>exp</code> into memory at address <code>ptr</code>.</p><span class="comment-delim">*)</span></div></li><li id="type-inst.AtomicRMW" class="def variant constructor anchored"><a href="#type-inst.AtomicRMW" class="anchor"></a><code><span>| </span><span><span class="constructor">AtomicRMW</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-inst.reg" class="def record field anchored"><a href="#type-inst.reg" class="anchor"></a><code><span>reg : <a href="Reg/index.html#type-t">Reg.t</a>;</span></code></li><li id="type-inst.ptr" class="def record field anchored"><a href="#type-inst.ptr" class="anchor"></a><code><span>ptr : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-inst.exp" class="def record field anchored"><a href="#type-inst.exp" class="anchor"></a><code><span>exp : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-inst.len" class="def record field anchored"><a href="#type-inst.len" class="anchor"></a><code><span>len : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-inst.loc" class="def record field anchored"><a href="#type-inst.loc" class="anchor"></a><code><span>loc : <a href="Loc/index.html#type-t">Loc.t</a>;</span></code></li></ol><code><span>}</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Atomically load a <code>len</code>-byte value <code>val</code> from the contents of memory at address <code>ptr</code>, set <code>reg</code> to <code>val</code>, and store the <code>len</code>-byte value of <code>(λreg. exp) val</code> into memory at address <code>ptr</code>. Note that, unlike other instructions and arguments, occurrences of <code>reg</code> in <code>exp</code> refer to the new, not old, value.</p><span class="comment-delim">*)</span></div></li><li id="type-inst.AtomicCmpXchg" class="def variant constructor anchored"><a href="#type-inst.AtomicCmpXchg" class="anchor"></a><code><span>| </span><span><span class="constructor">AtomicCmpXchg</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-inst.reg" class="def record field anchored"><a href="#type-inst.reg" class="anchor"></a><code><span>reg : <a href="Reg/index.html#type-t">Reg.t</a>;</span></code></li><li id="type-inst.ptr" class="def record field anchored"><a href="#type-inst.ptr" class="anchor"></a><code><span>ptr : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-inst.cmp" class="def record field anchored"><a href="#type-inst.cmp" class="anchor"></a><code><span>cmp : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-inst.exp" class="def record field anchored"><a href="#type-inst.exp" class="anchor"></a><code><span>exp : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-inst.len" class="def record field anchored"><a href="#type-inst.len" class="anchor"></a><code><span>len : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-inst.len1" class="def record field anchored"><a href="#type-inst.len1" class="anchor"></a><code><span>len1 : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-inst.loc" class="def record field anchored"><a href="#type-inst.loc" class="anchor"></a><code><span>loc : <a href="Loc/index.html#type-t">Loc.t</a>;</span></code></li></ol><code><span>}</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Atomically load a <code>len</code>-byte value from the contents of memory at address <code>ptr</code>, compare the value to <code>cmp</code>, and if equal store <code>len</code>-byte value <code>exp</code> into memory at address <code>ptr</code>. Sets <code>reg</code> to the loaded value concatenated to a <code>len1</code>-byte value <code>1</code> if the store was performed, otherwise <code>0</code>.</p><span class="comment-delim">*)</span></div></li><li id="type-inst.Alloc" class="def variant constructor anchored"><a href="#type-inst.Alloc" class="anchor"></a><code><span>| </span><span><span class="constructor">Alloc</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-inst.reg" class="def record field anchored"><a href="#type-inst.reg" class="anchor"></a><code><span>reg : <a href="Reg/index.html#type-t">Reg.t</a>;</span></code></li><li id="type-inst.num" class="def record field anchored"><a href="#type-inst.num" class="anchor"></a><code><span>num : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-inst.len" class="def record field anchored"><a href="#type-inst.len" class="anchor"></a><code><span>len : int;</span></code></li><li id="type-inst.loc" class="def record field anchored"><a href="#type-inst.loc" class="anchor"></a><code><span>loc : <a href="Loc/index.html#type-t">Loc.t</a>;</span></code></li></ol><code><span>}</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Allocate a block of memory large enough to store <code>num</code> elements of <code>len</code> bytes each and bind <code>reg</code> to the first address.</p><span class="comment-delim">*)</span></div></li><li id="type-inst.Free" class="def variant constructor anchored"><a href="#type-inst.Free" class="anchor"></a><code><span>| </span><span><span class="constructor">Free</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-inst.ptr" class="def record field anchored"><a href="#type-inst.ptr" class="anchor"></a><code><span>ptr : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-inst.loc" class="def record field anchored"><a href="#type-inst.loc" class="anchor"></a><code><span>loc : <a href="Loc/index.html#type-t">Loc.t</a>;</span></code></li></ol><code><span>}</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Deallocate the previously allocated block at address <code>ptr</code>.</p><span class="comment-delim">*)</span></div></li><li id="type-inst.Nondet" class="def variant constructor anchored"><a href="#type-inst.Nondet" class="anchor"></a><code><span>| </span><span><span class="constructor">Nondet</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-inst.reg" class="def record field anchored"><a href="#type-inst.reg" class="anchor"></a><code><span>reg : <span><a href="Reg/index.html#type-t">Reg.t</a> option</span>;</span></code></li><li id="type-inst.msg" class="def record field anchored"><a href="#type-inst.msg" class="anchor"></a><code><span>msg : string;</span></code></li><li id="type-inst.loc" class="def record field anchored"><a href="#type-inst.loc" class="anchor"></a><code><span>loc : <a href="Loc/index.html#type-t">Loc.t</a>;</span></code></li></ol><code><span>}</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Bind <code>reg</code> to an arbitrary value, representing non-deterministic approximation of behavior described by <code>msg</code>.</p><span class="comment-delim">*)</span></div></li><li id="type-inst.Builtin" class="def variant constructor anchored"><a href="#type-inst.Builtin" class="anchor"></a><code><span>| </span><span><span class="constructor">Builtin</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-inst.reg" class="def record field anchored"><a href="#type-inst.reg" class="anchor"></a><code><span>reg : <span><a href="Reg/index.html#type-t">Reg.t</a> option</span>;</span></code></li><li id="type-inst.name" class="def record field anchored"><a href="#type-inst.name" class="anchor"></a><code><span>name : <a href="Builtin/index.html#type-t">Builtin.t</a>;</span></code></li><li id="type-inst.args" class="def record field anchored"><a href="#type-inst.args" class="anchor"></a><code><span>args : <span><a href="Exp/index.html#type-t">Exp.t</a> <a href="../NS/index.html#type-iarray">NS.iarray</a></span>;</span></code></li><li id="type-inst.loc" class="def record field anchored"><a href="#type-inst.loc" class="anchor"></a><code><span>loc : <a href="Loc/index.html#type-t">Loc.t</a>;</span></code></li></ol><code><span>}</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Bind <code>reg</code> to the value of applying builtin <code>name</code> to <code>args</code>.</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>Instructions for memory manipulation or other non-control effects.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-cmnd"><a href="#type-cmnd" class="anchor"></a><code><span><span class="keyword">type</span> cmnd</span><span> = <span><a href="#type-inst">inst</a> <a href="../NS/index.html#type-iarray">NS.iarray</a></span></span></code></div><div class="spec-doc"><p>A (straight-line) command is a sequence of instructions.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-label"><a href="#type-label" class="anchor"></a><code><span><span class="keyword">type</span> label</span><span> = string</span></code></div><div class="spec-doc"><p>A label is a name of a block.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-jump"><a href="#type-jump" class="anchor"></a><code><span><span class="keyword">type</span> jump</span><span> = <span class="keyword">private</span> </span><span>{</span></code><ol><li id="type-jump.dst" class="def record field anchored"><a href="#type-jump.dst" class="anchor"></a><code><span><span class="keyword">mutable</span> dst : <a href="#type-block">block</a>;</span></code></li><li id="type-jump.retreating" class="def record field anchored"><a href="#type-jump.retreating" class="anchor"></a><code><span><span class="keyword">mutable</span> retreating : bool;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>A jump to a block.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-call_target"><a href="#type-call_target" class="anchor"></a><code><span><span class="keyword">and</span> call_target</span><span> = </span><span>{</span></code><ol><li id="type-call_target.func" class="def record field anchored"><a href="#type-call_target.func" class="anchor"></a><code><span><span class="keyword">mutable</span> func : <a href="#type-func">func</a>;</span></code></li><li id="type-call_target.recursive" class="def record field anchored"><a href="#type-call_target.recursive" class="anchor"></a><code><span><span class="keyword">mutable</span> recursive : bool;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Holds unless this call target is definitely not recursive</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-icall_target"><a href="#type-icall_target" class="anchor"></a><code><span><span class="keyword">and</span> icall_target</span><span> = </span><span>{</span></code><ol><li id="type-icall_target.ptr" class="def record field anchored"><a href="#type-icall_target.ptr" class="anchor"></a><code><span>ptr : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Dynamically resolved function pointer.</p><span class="comment-delim">*)</span></div></li><li id="type-icall_target.candidates" class="def record field anchored"><a href="#type-icall_target.candidates" class="anchor"></a><code><span><span class="keyword">mutable</span> candidates : <span><a href="#type-call_target">call_target</a> <a href="../NS/index.html#type-iarray">NS.iarray</a></span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Statically computed over-approximation of possible call targets.</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-callee"><a href="#type-callee" class="anchor"></a><code><span><span class="keyword">and</span> callee</span><span> = </span></code><ol><li id="type-callee.Direct" class="def variant constructor anchored"><a href="#type-callee.Direct" class="anchor"></a><code><span>| </span><span><span class="constructor">Direct</span> <span class="keyword">of</span> <a href="#type-call_target">call_target</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Statically resolved function</p><span class="comment-delim">*)</span></div></li><li id="type-callee.Indirect" class="def variant constructor anchored"><a href="#type-callee.Indirect" class="anchor"></a><code><span>| </span><span><span class="constructor">Indirect</span> <span class="keyword">of</span> <a href="#type-icall_target">icall_target</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Dynamically resolved function</p><span class="comment-delim">*)</span></div></li><li id="type-callee.Intrinsic" class="def variant constructor anchored"><a href="#type-callee.Intrinsic" class="anchor"></a><code><span>| </span><span><span class="constructor">Intrinsic</span> <span class="keyword">of</span> <a href="Intrinsic/index.html#type-t">Intrinsic.t</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Intrinsic implemented in analyzer rather than source code</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-call"><a href="#type-call" class="anchor"></a><code><span><span class="keyword">and</span> <span>'a call</span></span><span> = </span><span>{</span></code><ol><li id="type-call.callee" class="def record field anchored"><a href="#type-call.callee" class="anchor"></a><code><span>callee : <span class="type-var">'a</span>;</span></code></li><li id="type-call.typ" class="def record field anchored"><a href="#type-call.typ" class="anchor"></a><code><span>typ : <a href="Typ/index.html#type-t">Typ.t</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Type of the callee.</p><span class="comment-delim">*)</span></div></li><li id="type-call.actuals" class="def record field anchored"><a href="#type-call.actuals" class="anchor"></a><code><span>actuals : <span><a href="Exp/index.html#type-t">Exp.t</a> <a href="../NS/index.html#type-iarray">NS.iarray</a></span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Actual arguments.</p><span class="comment-delim">*)</span></div></li><li id="type-call.areturn" class="def record field anchored"><a href="#type-call.areturn" class="anchor"></a><code><span>areturn : <span><a href="Reg/index.html#type-t">Reg.t</a> option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Register to receive return value.</p><span class="comment-delim">*)</span></div></li><li id="type-call.return" class="def record field anchored"><a href="#type-call.return" class="anchor"></a><code><span>return : <a href="#type-jump">jump</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Return destination.</p><span class="comment-delim">*)</span></div></li><li id="type-call.throw" class="def record field anchored"><a href="#type-call.throw" class="anchor"></a><code><span>throw : <span><a href="#type-jump">jump</a> option</span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Handler destination.</p><span class="comment-delim">*)</span></div></li><li id="type-call.loc" class="def record field anchored"><a href="#type-call.loc" class="anchor"></a><code><span>loc : <a href="Loc/index.html#type-t">Loc.t</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>A call to a function.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-term"><a href="#type-term" class="anchor"></a><code><span><span class="keyword">and</span> term</span><span> = <span class="keyword">private</span> </span></code><ol><li id="type-term.Switch" class="def variant constructor anchored"><a href="#type-term.Switch" class="anchor"></a><code><span>| </span><span><span class="constructor">Switch</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-term.key" class="def record field anchored"><a href="#type-term.key" class="anchor"></a><code><span>key : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-term.tbl" class="def record field anchored"><a href="#type-term.tbl" class="anchor"></a><code><span>tbl : <span><span>(<a href="Exp/index.html#type-t">Exp.t</a> * <a href="#type-jump">jump</a>)</span> <a href="../NS/index.html#type-iarray">NS.iarray</a></span>;</span></code></li><li id="type-term.els" class="def record field anchored"><a href="#type-term.els" class="anchor"></a><code><span>els : <a href="#type-jump">jump</a>;</span></code></li><li id="type-term.loc" class="def record field anchored"><a href="#type-term.loc" class="anchor"></a><code><span>loc : <a href="Loc/index.html#type-t">Loc.t</a>;</span></code></li></ol><code><span>}</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Invoke the <code>jump</code> in <code>tbl</code> associated with the integer expression <code>case</code> which is equal to <code>key</code>, if any, otherwise invoke <code>els</code>.</p><span class="comment-delim">*)</span></div></li><li id="type-term.Iswitch" class="def variant constructor anchored"><a href="#type-term.Iswitch" class="anchor"></a><code><span>| </span><span><span class="constructor">Iswitch</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-term.ptr" class="def record field anchored"><a href="#type-term.ptr" class="anchor"></a><code><span>ptr : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-term.tbl" class="def record field anchored"><a href="#type-term.tbl" class="anchor"></a><code><span>tbl : <span><a href="#type-jump">jump</a> <a href="../NS/index.html#type-iarray">NS.iarray</a></span>;</span></code></li><li id="type-term.loc" class="def record field anchored"><a href="#type-term.loc" class="anchor"></a><code><span>loc : <a href="Loc/index.html#type-t">Loc.t</a>;</span></code></li></ol><code><span>}</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Invoke the <code>jump</code> in <code>tbl</code> whose <code>dst</code> is equal to <code>ptr</code>.</p><span class="comment-delim">*)</span></div></li><li id="type-term.Call" class="def variant constructor anchored"><a href="#type-term.Call" class="anchor"></a><code><span>| </span><span><span class="constructor">Call</span> <span class="keyword">of</span> <span><a href="#type-callee">callee</a> <a href="#type-call">call</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Call function with arguments.</p><span class="comment-delim">*)</span></div></li><li id="type-term.Return" class="def variant constructor anchored"><a href="#type-term.Return" class="anchor"></a><code><span>| </span><span><span class="constructor">Return</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-term.exp" class="def record field anchored"><a href="#type-term.exp" class="anchor"></a><code><span>exp : <span><a href="Exp/index.html#type-t">Exp.t</a> option</span>;</span></code></li><li id="type-term.loc" class="def record field anchored"><a href="#type-term.loc" class="anchor"></a><code><span>loc : <a href="Loc/index.html#type-t">Loc.t</a>;</span></code></li></ol><code><span>}</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Invoke <code>return</code> of the dynamically most recent <code>Call</code>.</p><span class="comment-delim">*)</span></div></li><li id="type-term.Throw" class="def variant constructor anchored"><a href="#type-term.Throw" class="anchor"></a><code><span>| </span><span><span class="constructor">Throw</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-term.exc" class="def record field anchored"><a href="#type-term.exc" class="anchor"></a><code><span>exc : <a href="Exp/index.html#type-t">Exp.t</a>;</span></code></li><li id="type-term.loc" class="def record field anchored"><a href="#type-term.loc" class="anchor"></a><code><span>loc : <a href="Loc/index.html#type-t">Loc.t</a>;</span></code></li></ol><code><span>}</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Invoke <code>throw</code> of the dynamically most recent <code>Call</code> with <code>throw</code> not <code>None</code>.</p><span class="comment-delim">*)</span></div></li><li id="type-term.Abort" class="def variant constructor anchored"><a href="#type-term.Abort" class="anchor"></a><code><span>| </span><span><span class="constructor">Abort</span> <span class="keyword">of</span> </span><span>{</span></code><ol><li id="type-term.loc" class="def record field anchored"><a href="#type-term.loc" class="anchor"></a><code><span>loc : <a href="Loc/index.html#type-t">Loc.t</a>;</span></code></li></ol><code><span>}</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Trigger abnormal program termination</p><span class="comment-delim">*)</span></div></li><li id="type-term.Unreachable" class="def variant constructor anchored"><a href="#type-term.Unreachable" class="anchor"></a><code><span>| </span><span><span class="constructor">Unreachable</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Halt as control is assumed to never reach <code>Unreachable</code>.</p><span class="comment-delim">*)</span></div></li></ol></div><div class="spec-doc"><p>Block terminators for function call/return or other control transfers.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-block"><a href="#type-block" class="anchor"></a><code><span><span class="keyword">and</span> block</span><span> = <span class="keyword">private</span> </span><span>{</span></code><ol><li id="type-block.lbl" class="def record field anchored"><a href="#type-block.lbl" class="anchor"></a><code><span>lbl : <a href="#type-label">label</a>;</span></code></li><li id="type-block.cmnd" class="def record field anchored"><a href="#type-block.cmnd" class="anchor"></a><code><span>cmnd : <a href="#type-cmnd">cmnd</a>;</span></code></li><li id="type-block.term" class="def record field anchored"><a href="#type-block.term" class="anchor"></a><code><span>term : <a href="#type-term">term</a>;</span></code></li><li id="type-block.parent" class="def record field anchored"><a href="#type-block.parent" class="anchor"></a><code><span><span class="keyword">mutable</span> parent : <a href="#type-func">func</a>;</span></code></li><li id="type-block.sort_index" class="def record field anchored"><a href="#type-block.sort_index" class="anchor"></a><code><span><span class="keyword">mutable</span> sort_index : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Position in a topological order, ignoring <code>retreating</code> edges.</p><span class="comment-delim">*)</span></div></li><li id="type-block.goal_distance" class="def record field anchored"><a href="#type-block.goal_distance" class="anchor"></a><code><span><span class="keyword">mutable</span> goal_distance : int;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>An upper bound on the distance from this block to the end of the current goal trace, measured in blocks.</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>A block is a destination of a jump with arguments, contains code.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-func"><a href="#type-func" class="anchor"></a><code><span><span class="keyword">and</span> func</span><span> = <span class="keyword">private</span> </span><span>{</span></code><ol><li id="type-func.name" class="def record field anchored"><a href="#type-func.name" class="anchor"></a><code><span>name : <a href="FuncName/index.html#type-t">FuncName.t</a>;</span></code></li><li id="type-func.formals" class="def record field anchored"><a href="#type-func.formals" class="anchor"></a><code><span>formals : <span><a href="Reg/index.html#type-t">Reg.t</a> <a href="../NS/index.html#type-iarray">NS.iarray</a></span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Formal parameters</p><span class="comment-delim">*)</span></div></li><li id="type-func.freturn" class="def record field anchored"><a href="#type-func.freturn" class="anchor"></a><code><span>freturn : <span><a href="Reg/index.html#type-t">Reg.t</a> option</span>;</span></code></li><li id="type-func.fthrow" class="def record field anchored"><a href="#type-func.fthrow" class="anchor"></a><code><span>fthrow : <a href="Reg/index.html#type-t">Reg.t</a>;</span></code></li><li id="type-func.locals" class="def record field anchored"><a href="#type-func.locals" class="anchor"></a><code><span>locals : <a href="Reg/Set/index.html#type-t">Reg.Set.t</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Local registers</p><span class="comment-delim">*)</span></div></li><li id="type-func.entry" class="def record field anchored"><a href="#type-func.entry" class="anchor"></a><code><span>entry : <a href="#type-block">block</a>;</span></code></li><li id="type-func.loc" class="def record field anchored"><a href="#type-func.loc" class="anchor"></a><code><span>loc : <a href="Loc/index.html#type-t">Loc.t</a>;</span></code></li></ol><code><span>}</span></code></div><div class="spec-doc"><p>A function is a control-flow graph with distinguished entry block, whose parameters are the function parameters.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-ip"><a href="#type-ip" class="anchor"></a><code><span><span class="keyword">type</span> ip</span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-functions"><a href="#type-functions" class="anchor"></a><code><span><span class="keyword">type</span> functions</span><span> = <span><a href="#type-func">func</a> <a href="FuncName/Map/index.html#type-t">FuncName.Map.t</a></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-program"><a href="#type-program" class="anchor"></a><code><span><span class="keyword">type</span> program</span><span> = <span class="keyword">private</span> </span><span>{</span></code><ol><li id="type-program.globals" class="def record field anchored"><a href="#type-program.globals" class="anchor"></a><code><span>globals : <span><a href="GlobalDefn/index.html#type-t">GlobalDefn.t</a> <a href="../NS/index.html#type-iarray">NS.iarray</a></span>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Global definitions.</p><span class="comment-delim">*)</span></div></li><li id="type-program.functions" class="def record field anchored"><a href="#type-program.functions" class="anchor"></a><code><span>functions : <a href="#type-functions">functions</a>;</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>(Global) function definitions.</p><span class="comment-delim">*)</span></div></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Inst"><a href="#module-Inst" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Inst/index.html">Inst</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Jump"><a href="#module-Jump" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Jump/index.html">Jump</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Term"><a href="#module-Term" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Term/index.html">Term</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Block"><a href="#module-Block" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Block/index.html">Block</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-IP"><a href="#module-IP" class="anchor"></a><code><span><span class="keyword">module</span> <a href="IP/index.html">IP</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Func"><a href="#module-Func" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Func/index.html">Func</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Program"><a href="#module-Program" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Program/index.html">Program</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>
